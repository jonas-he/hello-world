/*!
 * Squarespace Universal Filter - Filter any data on your site
 * Author: Michael Mashay <michael@squarespacewebsites.com>
 * License: Commercial License
 * 14.12.2020
 */
!function(){var e,t,n,s,r=[],a=window.Y&&Y.one("body"),$=!1,K="undefined"!=typeof InstallTrigger;function St(t,e,i){var s;document.getElementById(e)||((s=document.createElement("style")).type="text/css",s.id=e,s.styleSheet?s.styleSheet.cssText=t:s.appendChild(document.createTextNode(t)),i.appendChild(s))}function At(a,n,r){var o;return function(){var t=this,e=arguments,i=function(){o=null,r||a.apply(t,e)},s=r&&!o;clearTimeout(o),o=setTimeout(i,n),s&&a.apply(t,e)}}function o(t){return t&&0==t.indexOf("/")&&(t=t.substr(1)),t&&t.indexOf("/")==t.length-1&&(t=t.substr(0,t.length-1)),t}Element.prototype.f_matches||(Element.prototype.f_matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){var e=this.parentElement||this.parentNode;e||(e=document.createDocumentFragment()).appendChild(this);for(var i=e.querySelectorAll(t),s=i.length;0<=--s&&i.item(s)!==this;);return-1<s}),Object.size=function(t){var e,i=0;for(e in t)t.hasOwnProperty(e)&&i++;return i};var v,i,l,c,Pt=(v=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",l={},c={compressToEncodedURIComponent:function(t){return null==t?"":c._compress(t,6,function(t){return i.charAt(t)})},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),c._decompress(e.length,32,function(t){return function(t,e){if(!l[t]){l[t]={};for(var i=0;i<t.length;i++)l[t][t.charAt(i)]=i}return l[t][e]}(i,e.charAt(t))}))},compress:function(t){return c._compress(t,16,function(t){return v(t)})},_compress:function(t,e,i){if(null==t)return"";for(var s,a,n,r,o={},l={},c="",d=2,g=3,u=2,p=[],m=0,h=0,f=0;f<t.length;f+=1)if(n=t.charAt(f),Object.prototype.hasOwnProperty.call(o,n)||(o[n]=g++,l[n]=!0),r=c+n,Object.prototype.hasOwnProperty.call(o,r))c=r;else{if(Object.prototype.hasOwnProperty.call(l,c)){if(c.charCodeAt(0)<256){for(s=0;s<u;s++)m<<=1,h==e-1?(h=0,p.push(i(m)),m=0):h++;for(a=c.charCodeAt(0),s=0;s<8;s++)m=m<<1|1&a,h==e-1?(h=0,p.push(i(m)),m=0):h++,a>>=1}else{for(a=1,s=0;s<u;s++)m=m<<1|a,h==e-1?(h=0,p.push(i(m)),m=0):h++,a=0;for(a=c.charCodeAt(0),s=0;s<16;s++)m=m<<1|1&a,h==e-1?(h=0,p.push(i(m)),m=0):h++,a>>=1}0==--d&&(d=Math.pow(2,u),u++),delete l[c]}else for(a=o[c],s=0;s<u;s++)m=m<<1|1&a,h==e-1?(h=0,p.push(i(m)),m=0):h++,a>>=1;0==--d&&(d=Math.pow(2,u),u++),o[r]=g++,c=String(n)}if(""!==c){if(Object.prototype.hasOwnProperty.call(l,c)){if(c.charCodeAt(0)<256){for(s=0;s<u;s++)m<<=1,h==e-1?(h=0,p.push(i(m)),m=0):h++;for(a=c.charCodeAt(0),s=0;s<8;s++)m=m<<1|1&a,h==e-1?(h=0,p.push(i(m)),m=0):h++,a>>=1}else{for(a=1,s=0;s<u;s++)m=m<<1|a,h==e-1?(h=0,p.push(i(m)),m=0):h++,a=0;for(a=c.charCodeAt(0),s=0;s<16;s++)m=m<<1|1&a,h==e-1?(h=0,p.push(i(m)),m=0):h++,a>>=1}0==--d&&(d=Math.pow(2,u),u++),delete l[c]}else for(a=o[c],s=0;s<u;s++)m=m<<1|1&a,h==e-1?(h=0,p.push(i(m)),m=0):h++,a>>=1;0==--d&&(d=Math.pow(2,u),u++)}for(a=2,s=0;s<u;s++)m=m<<1|1&a,h==e-1?(h=0,p.push(i(m)),m=0):h++,a>>=1;for(;;){if(m<<=1,h==e-1){p.push(i(m));break}h++}return p.join("")},decompress:function(e){return null==e?"":""==e?null:c._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(t,e,i){for(var s,a,n,r,o,l,c=[],d=4,g=4,u=3,p="",m=[],h={val:i(0),position:e,index:1},f=0;f<3;f+=1)c[f]=f;for(a=0,r=Math.pow(2,2),o=1;o!=r;)n=h.val&h.position,h.position>>=1,0==h.position&&(h.position=e,h.val=i(h.index++)),a|=(0<n?1:0)*o,o<<=1;switch(a){case 0:for(a=0,r=Math.pow(2,8),o=1;o!=r;)n=h.val&h.position,h.position>>=1,0==h.position&&(h.position=e,h.val=i(h.index++)),a|=(0<n?1:0)*o,o<<=1;l=v(a);break;case 1:for(a=0,r=Math.pow(2,16),o=1;o!=r;)n=h.val&h.position,h.position>>=1,0==h.position&&(h.position=e,h.val=i(h.index++)),a|=(0<n?1:0)*o,o<<=1;l=v(a);break;case 2:return""}for(s=c[3]=l,m.push(l);;){if(h.index>t)return"";for(a=0,r=Math.pow(2,u),o=1;o!=r;)n=h.val&h.position,h.position>>=1,0==h.position&&(h.position=e,h.val=i(h.index++)),a|=(0<n?1:0)*o,o<<=1;switch(l=a){case 0:for(a=0,r=Math.pow(2,8),o=1;o!=r;)n=h.val&h.position,h.position>>=1,0==h.position&&(h.position=e,h.val=i(h.index++)),a|=(0<n?1:0)*o,o<<=1;c[g++]=v(a),l=g-1,d--;break;case 1:for(a=0,r=Math.pow(2,16),o=1;o!=r;)n=h.val&h.position,h.position>>=1,0==h.position&&(h.position=e,h.val=i(h.index++)),a|=(0<n?1:0)*o,o<<=1;c[g++]=v(a),l=g-1,d--;break;case 2:return m.join("")}if(0==d&&(d=Math.pow(2,u),u++),c[l])p=c[l];else{if(l!==g)return null;p=s+s.charAt(0)}m.push(p),c[g++]=s+p.charAt(0),s=p,0==--d&&(d=Math.pow(2,u),u++)}}});function It(t){var s=[],a=function(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])if(s.push(e),t[e].length&&"string"==typeof t[e]&&-1<t[e].indexOf(",")){t[e]=t[e].split(",");for(var i=0;i<t[e].length;i++)t[e][i]=(t[e][i]+"").trim(),s.push(t[e][i])}else"object"!=typeof t[e]||t[e].length?"object"==typeof t[e]&&t[e].forEach&&t[e].forEach(function(t){"object"!=typeof t||t.length?s.push(t.trim()):a(t)}):a(t[e])};return a(t),s}function d(){var t=document.createEvent("HTMLEvents");t.initEvent("resize",!0,!1),window.dispatchEvent(t)}function A(t,e){var s=[],a=[];for(t.replace(/(\d+)|(\D+)/g,function(t,e,i){s.push([e||1/0,i||""])}),e.replace(/(\d+)|(\D+)/g,function(t,e,i){a.push([e||1/0,i||""])});s.length&&a.length;){var i=s.shift(),n=a.shift(),r=i[0]-n[0]||i[1].localeCompare(n[1]);if(r)return r}return s.length-a.length}var g={};function Tt(i,t){if(!(i=i.toString()))return"";var e=i+(t?"_no_change_case":"");if(g[e])return g[e];var s="Ã€ÃÃ„Ã‚ÃˆÃ‰Ã‹ÃŠÃŒÃÃÃŽÃ’Ã“Ã–Ã”Ã™ÃšÃœÃ›Ã Ã¡Ã¤Ã¢Ã¨Ã©Ã«ÃªÃ¬Ã­Ã¯Ã®Ã²Ã³Ã¶Ã´Ã¹ÃºÃ¼Ã»Ã‘Ã±Ã‡Ã§Â·Â®Â©",a="AAAAEEEEIIIIOOOOUUUUaaaaeeeeiiiioooouuuunncc-rc";i=i.replace(/^\s+|\s+$/g,"").replace(/\'/g,"-").replace(/\"/g,"-").replace(/\#/g,"-").replace(/\=/g,"-"),t||(i=i.toLowerCase(),s="Ã£Ã Ã¡Ã¤Ã¢áº½Ã¨Ã©Ã«ÃªÃ¬Ã­Ã¯Ã®ÃµÃ²Ã³Ã¶Ã´Ã¹ÃºÃ¼Ã»Ã±Ã§Â·Â®Â©",a="aaaaaeeeeeiiiiooooouuuunc-rc");if(function(){for(var t=0,e=s.length;t<e;t++)if(-1<i.indexOf(s.charAt(t)))return!0;return!1}())for(var n=0,r=s.length;n<r;n++){var o=s.charAt(n);-1<i.indexOf(s.charAt(n))&&(i=i.replace(new RegExp(o,"g"),a.charAt(n)))}return i=i.replace(/\s+/g,"-").replace(/\-\-+/g,"-").replace(/\â‚¤/g,"-gbp").replace(/\Â£/g,"-gbp").replace(/\$/g,"-usd").replace(/\â‚¬/g,"-eur").replace(/\&/g,"and").replace(/[^a-zA-Z0-9_\u3400-\u9FBF\s-]/g,"").replace(/\,/g,"-").replace(/\//g,"-").replace(/\:/g,"-").replace(/\;/g,"-"),g[e]=i}function u(t,e,i,s){t*=Math.PI/180,i*=Math.PI/180,e*=Math.PI/180,s*=Math.PI/180;var a=Math.cos(t),n=Math.cos(i),r=Math.sin(t),o=Math.sin(i),l=s-e,c=Math.cos(l),d=Math.sin(l),g=Math.sqrt(Math.pow(n*d,2)+Math.pow(a*o-r*n*c,2)),u=r*o+a*n*c,p=Math.atan2(g,u);return parseFloat((6372795*p/1e3).toFixed(2))}function tt(t){return t.charAt(0).toUpperCase()+t.slice(1)}function At(s,a,n){var r;return function(){var t=this,e=arguments,i=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||s.apply(t,e)},a),i&&s.apply(t,e)}}function Lt(l,c){return new Y.Promise(function(r){var o={collection:{},items:[]},t=Mt(l);t&&c?r(t):Y.io(l,{on:{success:function(t,e){function i(t){if(t)try{o=0==t.indexOf("LZString")?JSON.parse(Pt.decompressFromEncodedURIComponent(t.slice(8))):JSON.parse(t),c&&P(o,l,!0),r(o)}catch(t){console.warn("error : "+t),r(o)}else r(o)}var s,a,n=e.responseText;n&&-1<n.indexOf('id="collectionsIndex"')?i(n=-1<n.indexOf('<textarea id="collectionsIndex" class="hidden" style="display:none">')?n.split('<textarea id="collectionsIndex" class="hidden" style="display:none">')[1].split("</textarea>")[0]:((s=document.createElement("div")).innerHTML=n,(a=s.querySelector("#collectionsIndex")).value||a.querySelector(".sqs-block-content")&&a.querySelector(".sqs-block-content").innerText||"")):i(n)},failure:function(t,e){console.warn("error : "+e.status),r(o)}}})})}function Mt(t){try{var e=window.localStorage,i=(t=t.replace(/\//g,"")+"_json")+"_expires";if(!t||!e)return!1;try{var s=e.getItem(i);return!!s&&(!(parseInt(s)<(new Date).getTime())&&JSON.parse(e.getItem(t)))}catch(t){return console.log(t),!1}}catch(t){return console.log(t),!1}}function P(e,i,s,t){try{var a=window.localStorage,n=i,r=(i=i.replace(/\//g,"").replace(/\,/g,"-")+"_json")+"_expires";if(t=t||10,e&&a){var o=(new Date).getTime()+6e4*t,l={};if((l=JSON.stringify(e)).length){-1<n.indexOf("/")&&a.getItem(n)&&a.removeItem(n);try{a.setItem(i,l)}catch(t){if(console.log(t.message||t),!s&&e&&e.items&&e.items.length)for(var c=e.items.length-1;0<=c;c--)e.items[c].body&&(e.items[c].body="y");l=JSON.stringify(e);try{a.setItem(i,l),console.log("Items body was reduced to fit localStorage quota")}catch(t){console.log(t.message||t,"Still too heavy collection to save local.")}}a.setItem(r,o)}}}catch(t){console.log(t)}}function Nt(r,d){var g=d&&d.target&&d.target.settings.useSQSProxy;return new Y.Promise(function(o){var t,l={html:""},c=function(t){var e="";if(t){var i=t.querySelectorAll('a[href*="?offset="]');if(i&&i.length)for(var s=i.length-1;0<=s;s--){var a=i[s];a&&-1==a.search.indexOf("reverse")&&(e=a.search.replace("?",""))}}return e},e=c(d.container._node),i=!!(t=window.location)&&(t.search&&(-1<t.search.indexOf("?category=")||-1<t.search.indexOf("?tag=")||-1<t.search.indexOf("?year=")||-1<t.search.indexOf("?month="))||-1<t.pathname.indexOf("/category/")||-1<t.pathname.indexOf("/tag/"));function s(){e||i?function n(r,t){var e="";t&&(e="?"+t,-1<r.indexOf("?")&&(e="&"+t));Y.io(r+e,{on:{success:function(t,e){var i=e.responseText;if(i){var s=document.createElement("div");s.innerHTML=i;var a=c(s);if(s)try{a?(l.html+=s.innerHTML,n(r,a)):(l.html+=s.innerHTML,g&&g.enabled&&Et(r,l,"main-content",g),o(l))}catch(t){console.warn("error : "+t),o(l)}else o(l)}else o(l)},failure:function(t,e){console.warn("error : "+e.status),o(l)}}})}(r,e):o(l)}var a,n;g&&g.enabled?(a="main-content",n=Mt(window.location.hostname.replace(/\./g,"-")+"_"+a+"_"+r),Dt(r,a,n,g).then(function(t){t.nestedCategories&&t.nestedCategories.categoryTree&&t.nestedCategories.tree&&d.target.settings.filter&&d.target.settings.filter.followNewProductsCategories&&d.regenerateAllowedStructure(t.nestedCategories.categoryTree,t.nestedCategories.tree),o(t),(!n||!n.saved||n&&n.minutes&&n.minutes!=g.cacheTime||!g.cacheTime||window.top.Static&&window.top.Static.IN_BACKEND)&&s()}).catch(function(t){console.log(t),s()})):s()})}function b(t,e,i){if(window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.authenticatedAccount)return new Y.Promise(function(s){var a=!1,t="/api/content-service/product/1.1/websites/"+e.website.id+"/products/"+e.collection.id+"/categories/tree";try{Y.io(t,{on:{success:function(t,e){var i=e.responseText;i&&-1<i.indexOf("categoryTree")&&!(a=JSON.parse(i))||s(a)},failure:function(t,e){console.warn("Get Nested Categories error : "+e.status),s(a)}}})}catch(t){s(a)}});var s="https://tools.squarewebsites.org/sqs-response/"+window.location.hostname.replace(/\./g,"-")+"/"+i+"/"+(o(decodeURIComponent(t)).replace("?","--query--").replace(/[^A-Za-z0-9-]+/g,"-")||"-")+"--nested-categories-tree--.js";return new Y.Promise(function(i,t){Y.io(s,{headers:{"Content-Type":"text/javascript;charset=UTF-8"},on:{success:function(t,e){e&&e.responseText&&i(JSON.parse(e.responseText))},failure:function(){i(!1)}}})})}function qt(i,n,m){var h=m&&m.target&&m.target.settings.useSQSProxy,f=!1;return new Y.Promise(function(d){var g,u={collection:{},past:[],upcoming:[],items:[],html:"",nestedCategories:null};function p(l,c){var t;n?Y.io(l,{on:{success:function(t,e){var i,s,a=e.responseText;if(a&&-1<a.indexOf('id="collectionsIndex"'))if(a=-1<a.indexOf('<textarea id="collectionsIndex" class="hidden" style="display:none">')?a.split('<textarea id="collectionsIndex" class="hidden" style="display:none">')[1].split("</textarea>")[0]:((i=document.createElement("div")).innerHTML=a,(s=i.querySelector("#collectionsIndex")).value||s.querySelector(".sqs-block-content")&&s.querySelector(".sqs-block-content").innerText||""))try{0==a.indexOf("LZString")?u.items=JSON.parse(Pt.decompressFromEncodedURIComponent(a.slice(8))):u.items=JSON.parse(a),m.target.settings.useSessionCache&&P(u,n,!0),h&&h.enabled&&Et(l,u,"main-content",h),d(u)}catch(t){console.warn("error : "+t),d(u)}else d(u);else d(u)},failure:function(t,e){console.warn("error : "+e.status),d(u)}}}):(t=-1<l.indexOf("?")?"&format=page-context":"?format=page-context",t+="&cache="+((new Date).getTime()+"").substr(0,10),c&&(t+="&offset="+c),m.isEventsCollection&&(t+="&view=list"),Y.io(l+t,{data:{},on:{success:function(t,e){var i=e.responseText;if(i)try{var s,a,n,r=JSON.parse(i),o=!!r.upcoming||!!r.past||!!r.items||!!r.collection&&!!r.collection.collections;o&&(r.collection&&(u.collection=r.collection),r.upcoming&&(u.upcoming=u.upcoming.concat(r.upcoming)),r.past&&(u.past=u.past.concat(r.past)),r.items&&(u.items=u.items.concat(r.items)),r.collection.collections&&(u.items=u.items.concat(r.collection.collections)),r.collection&&r.collection.typeName&&"events"==r.collection.typeName&&(u.items=u.items.concat(r.upcoming,r.past))),c=r.offset&&r.offset!==c?r.offset:r.pagination&&r.pagination.nextPageOffset&&c!==r.pagination.nextPageOffset?r.pagination.nextPageOffset:"",r.collection&&"products"===r.collection.typeName&&0,r.squarespace&&r.squarespace["main-content"]&&u.items&&u.items.length>m.existedItems.size()&&(s=r.squarespace["main-content"].replace(/<squarespace:escape>/g,"").replace(/<\/squarespace:escape>/g,""),a=Y.Node.create(s),a&&(m.target&&m.target.settings&&m.target.settings.listCollection&&m.target.settings.listCollection.getItemsHTMLOnly?a.all(m.target.items).each(function(t){u.html+=t._node.outerHTML||t._node.nodeValue}):u.html+=a.get("innerHTML"))),r.nestedCategories&&(u.nestedCategories=r.nestedCategories),c&&0,c?(m.hasOwnProperty("__all_loaded")&&(o?(r.collection,r.items,r.past,r.nestedCategories,r.upcoming):r.items),m.__all_loaded=!1,p(l,c)):(!u.html&&r.squarespace&&r.squarespace["main-content"]&&(s=r.squarespace["main-content"].replace(/<squarespace:escape>/g,"").replace(/<\/squarespace:escape>/g,""),a=Y.Node.create(s),a&&(m.target&&m.target.settings&&m.target.settings.listCollection&&m.target.settings.listCollection.getItemsHTMLOnly?a.all(m.target.items).each(function(t){u.html+=t._node.outerHTML||t._node.nodeValue}):u.html+=a.get("innerHTML"))),m.__all_loaded=!0,m.target.settings.useSessionCache&&P(u,l),g=u.items&&u.items.length,n=u.items,g||!u.upcoming.length&&!u.past.length||(n=u.upcoming.concat(u.past),g=n.length),g&&n.forEach(function(t){t.updatedOn&&t.updatedOn}),r.nestedCategories&&r.nestedCategories.categories&&r.nestedCategories.categories.length&&!r.nestedCategories.tree?(u.nestedCategories=r.nestedCategories,b(l,r,"page-context").then(function(t){var e;t&&(e={},t.categoryTree&&(e.generated=!0,t.categoryTree.forEach(function(t){e[t.id]=t}),u.nestedCategories||(u.nestedCategories={})),t.generated&&(e=t),m.target.settings.filter&&m.target.settings.filter.followNewProductsCategories&&m.regenerateAllowedStructure(t.categoryTree,e),u.nestedCategories.tree=e,u.nestedCategories.categoryTree=t.categoryTree),(h={enabled:!0,cacheTime:10,removeFields:"excerpt,variants,body"})&&(m._updateFilterData(u),m.multipleCollectionsFetched||Et(l,u,"page-context",h,!1)),d(u)})):(h&&(f&&m._updateFilterData(u),m.multipleCollectionsFetched||Et(l,u,"page-context",h,!1)),d(u)))}catch(t){console.warn("error : "+t),d(u)}else d(u)},failure:function(t,e){console.warn("error : "+e.status),d(u)}}}))}n&&(-1<n.indexOf("http://")||-1<n.indexOf("https://"))&&(i=n+"",n=!1);function s(){var t=Mt(e);t&&m.target.settings.useSessionCache?(setTimeout(function(){p(i)},1e3),d(t)):p(i)}var t,a,e=n||i;h&&h.enabled&&(!m||m&&!m.multipleCollectionsFetched)?(t=n?"main-content":"page-context",a=Mt(window.location.hostname.replace(/\./g,"-")+"_"+t+"_"+i),Dt(i,t,a,h).then(function(t){var e=t.items&&t.items.length,i=t.items;e||!u.upcoming.length&&!u.past.length||(e=(i=u.upcoming.concat(u.past)).length),e&&i.forEach(function(t){t.updatedOn&&t.updatedOn}),t.nestedCategories&&t.nestedCategories.categoryTree&&t.nestedCategories.tree&&m.target.settings.filter&&m.target.settings.filter.followNewProductsCategories&&m.regenerateAllowedStructure(t.nestedCategories.categoryTree,t.nestedCategories.tree),d(t),f=!0,(!e||!a||!a.saved||a&&a.minutes&&a.minutes!=h.cacheTime||!h.cacheTime||window.top.Static&&window.top.Static.IN_BACKEND)&&s()}).catch(function(t){console.log(t),s()})):s()})}function Et(e,t,i,s,a){if(s.removeFields&&s.removeFields.length&&(s.removeFields=(s.removeFields+"").split(","),t&&t.items&&t.items.length))for(var n=t.items.length-1;0<=n;n--){var r=t.items[n];s.removeFields.forEach(function(t){t=t.trim(),r.hasOwnProperty(t)&&delete r[t]})}function o(){var t=window.location.hostname.replace(/\./g,"-")+"_"+i+"_"+e;P({saved:!0,minutes:s.cacheTime,timestamp:(new Date).getTime()},t,!0,s.cacheTime)}var l={url:(window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.website&&window.Static.SQUARESPACE_CONTEXT.website.baseUrl||window.location.origin)+e,content:t};a?o():(t.html,Y.io("https://tools.squarewebsites.org/api/save-sqs-response/"+i+"/",{headers:{"Content-Type":"application/json;charset=UTF-8"},method:"POST",data:JSON.stringify(l),on:{success:function(t,e){e&&e.responseText&&(e=JSON.parse(e.responseText)).success&&e.file_saved&&o()},failure:function(t){console.log(t)}}}))}function Dt(t,e,i,s){var a="https://tools.squarewebsites.org/sqs-response/"+(window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.website&&window.Static.SQUARESPACE_CONTEXT.website.baseUrl&&new URL(window.Static.SQUARESPACE_CONTEXT.website.baseUrl)||window.location).hostname.replace(/\./g,"-")+"/"+e+"/"+(o(decodeURIComponent(t)).replace("?","--query--").replace(/[^A-Za-z0-9-]+/g,"-")||"-")+".js";return!i||!i.saved||i&&i.minutes&&i.minutes!=s.cacheTime||!s.cacheTime?a+="?ver="+((new Date).getTime()+"").substr(0,8):i&&i.timestamp&&(a+="?ver="+i.timestamp),new Y.Promise(function(i,s){Y.io(a,{headers:{"Content-Type":"text/javascript;charset=UTF-8"},on:{success:function(t,e){if(e&&e.responseText)try{i(JSON.parse(e.responseText))}catch(t){s("server empty response")}else s("server empty response")},failure:function(){s("server")}}})})}function Wt(a,l){var c=l&&l.target&&l.target.settings.useSQSProxy,d="",g="",u=!1;return new Y.Promise(function(n){var r={collection:{},items:[]};function o(s,a){var t={format:"json",view:"list",cache:((new Date).getTime()+"").substr(0,8)};(a=a&&(-1<a.indexOf("%26")||-1<a.indexOf("&"))?a.split("%26")[0].split("&")[0]:a||"")&&(t.offset=a),Y.io(s,{data:t,on:{success:function(t,e){var i;try{i=e.responseJSON||JSON.parse(e.responseText),r.collection=i.collection,i.items&&i.items.length||i.upcoming&&i.upcoming.length||i.past&&i.past.length?(r.items=i.items?r.items.concat(i.items):r.items.concat(i.upcoming,i.past),i.pagination&&i.pagination.nextPage&&a!==i.pagination.nextPageUrl.split("offset=")[1]?o(s,i.pagination.nextPageUrl.split("offset=")[1]):(l.target.settings.useSessionCache&&P(r,s),r.items&&r.items.length&&r.items.forEach(function(t){t.updatedOn&&(g+=t.updatedOn+"-")}),i.nestedCategories&&i.nestedCategories.categories&&i.nestedCategories.categories.length&&!i.nestedCategories.tree?(r.nestedCategories=i.nestedCategories,b(s,i,"json").then(function(t){var e;t&&(e={},t.categoryTree&&(e.generated=!0,t.categoryTree.forEach(function(t){e[t.id]=t}),r.nestedCategories||(r.nestedCategories={})),t.generated&&(e=t),l.target.settings.filter&&l.target.settings.filter.followNewProductsCategories&&l.regenerateAllowedStructure(t.categoryTree,e),r.nestedCategories.tree=e,r.nestedCategories.categoryTree=t.categoryTree),(c={enabled:!0,cacheTime:10,removeFields:"excerpt,variants,body"})&&(l._updateFilterData(r),l.multipleCollectionsFetched||Et(s,r,"json",c,!1)),n(r)})):(c&&(u&&l._updateFilterData(r),Et(s,r,"json",c,d==g||!window.top.Static||!window.top.Static.IN_BACKEND)),n(r)))):(l.target.settings.useSessionCache&&P(r,s),r.items&&r.items.length&&r.items.forEach(function(t){t.updatedOn&&(g+=t.updatedOn+"-")}),c&&(u&&d!==g&&l._updateFilterData(r),Et(s,r,"json",c,d==g||!window.top.Static||!window.top.Static.IN_BACKEND)),n(r))}catch(t){return $&&console.log("JSON Parse failed!"),!1}},failure:function(t){console.warn("error : "+t.message),n(r)}}})}function i(){var t=Mt(e);t&&l.target.settings.useSessionCache?(setTimeout(function(){o(a)},1e4),n(t)):o(a)}var s,e=a;c&&c.enabled?(s=Mt(window.location.hostname.replace(/\./g,"-")+"_json_"+a),Dt(a,"json",s,c).then(function(t){var e=t.items&&t.items.length;e&&t.items.forEach(function(t){t.updatedOn&&(d+=t.updatedOn+"-")}),t.nestedCategories&&t.nestedCategories.categoryTree&&t.nestedCategories.tree&&l.target.settings.filter&&l.target.settings.filter.followNewProductsCategories&&l.regenerateAllowedStructure(t.nestedCategories.categoryTree,t.nestedCategories.tree),n(t),u=!0,(!e||!s||!s.saved||s&&s.minutes&&s.minutes!=c.cacheTime||!c.cacheTime||window.top.Static&&window.top.Static.IN_BACKEND)&&i()}).catch(function(t){console.log(t),i()})):i()})}function p(){window._scrollBarWidth=window.innerWidth&&document.body&&document.body.offsetWidth?window.innerWidth-document.body.offsetWidth:0,e&&clearTimeout(e),e=setTimeout(function(){var t;r&&r.length&&(t=!1,Y.one("body").hasClass("collection-type-products")&&(t=!0),r.forEach(function(t){t.isotope&&(t.itemsWidthStyleNode&&t._setItemsMaxWidthStyle(),t.isotope.layout()),t.loadImages(t.items),t.target.settings.hooks&&t.target.settings.hooks.onResize&&"function"==typeof t.target.settings.hooks.onResize&&t.target.settings.hooks.onResize(t)}),t&&Y.Global.fire("tweak:reset")),e=null},400)}function m(){t&&clearTimeout(t),t=setTimeout(function(){r&&r.length&&r.forEach(function(t){t.container._node.getBoundingClientRect().top<10&&t.target.settings.closeOnOverScroll&&(t.container.hasClass("mobile-panel-open")||(t.customFiltersWrapper.all(".archive-dropdown-toggle-checkbox").set("checked",!1),t.searchContainer&&t.searchContainer.removeClass("active")))}),t=null},60)}function Yt(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]&&"object"==typeof e[i]?Yt(t[i],e[i]):t[i]=e[i]);return t}function Ut(t,e){var i=!1;e&&-1<e.indexOf("--noQtyInStock")&&(i=!0,e=e.replace("--noQtyInStock",""));var s=[];if(t.variantOptions&&t.variantOptions.hasOwnProperty(e)&&i)return t.variantOptions[e];var a=t&&t.variants?t.variants:!(!t||!t.structuredContent)&&t.structuredContent.variants;if(a&&a.length)for(var n=0;n<a.length;n++){var r=i?!!i&&a[n].attributes[e]:(a[n].hasOwnProperty("qtyInStock")&&a[n].qtyInStock||a[n].hasOwnProperty("unlimited")&&a[n].unlimited)&&a[n].attributes[e];r&&s.push(r.trim())}return s[0]&&-1<s[0].indexOf(",")&&(s=(s+"").split(",")),s}function h(i){var e,s,t,a;i&&i.container&&i.items?(e=Y.all(i.container),(s=e.size())?(Y.one("body")&&Y.one("body").removeClass("no-custom-filter-activated"),t="Container: "+i.container+"\nItems: "+i.items,i.settings&&i.settings.isotope&&i.settings.isotope.enabled&&(t=t+"\nIsotope: "+JSON.stringify(i.settings.isotope)),setTimeout(function(){!function(t){try{var e=Static&&Static.SQUARESPACE_CONTEXT,i={pluginName:"Universal Filter",pluginPage:e&&e.website.baseUrl?e.website.baseUrl+location.pathname:location.href,pageTitle:document.title,pluginData:t||"No plugin data",siteTitle:e&&e.website.siteTitle||"",siteUrl:e&&e.website.baseUrl||location.origin},s=new XMLHttpRequest;s.open("POST","https://tools.squarewebsites.org/api/sqs-plugins",!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.send(JSON.stringify(i))}catch(t){console.log(t)}}(t)},4e4),window.customFiltersInitInterval?(a=0,n=setInterval(function(){var t;s<=a?(window.clearInterval(n),n=null,$&&console.log("customFilters built")):(((t=e.item(a)).ancestor(".sqs-block-summary-v2")||t.ancestor(".sqs-block-gallery"))&&(t=t.ancestor(".sqs-block")),t.hasClass("custom-filter-container")||(i.index=a,t.CustomFilter=new f(t,i),r.push(t.CustomFilter))),a++},window.customFiltersInitInterval)):e.each(function(t,e){i.settings.hooks&&i.settings.hooks.beforeCreate&&"function"==typeof i.settings.hooks.beforeCreate&&i.settings.hooks.beforeCreate(i,t),(t.ancestor(".sqs-block-summary-v2")||t.ancestor(".sqs-block-gallery"))&&(t=t.ancestor(".sqs-block")),t.hasClass("custom-filter-container")||i.noNeedCreate||t.hasClass("ProductItem-relatedProducts")||(i.index=e,t.CustomFilter=new f(t,i),r.push(t.CustomFilter))})):Y.one("body")&&Y.one("body").addClass("no-custom-filter-activated")):Y.one("body")&&Y.one("body").addClass("no-custom-filter-activated")}function O(t,i){return t=t.replace(/{{(\w+)}}/g,function(t,e){return i&&i.hasOwnProperty(e)?i[e]:"auto"})}function f(t,e){if(t){this.target=Yt({container:".ProductList",items:".hentry",settings:{hidden:!1,runOnDOMReady:!1,wrapFilterContainer:!1,placeFiltersTo:null,shuffle:!1,position:"top",align:"left",noResultMessage:"",noResultOnStart:!1,customClasses:"",view:"dropdowns",showItemsCount:!0,itemsCount:{enabled:!0,text:"",positionOrder:1},showCheckboxes:!1,closeOptionsOnSelect:!0,closeOnOverScroll:!1,closeOnMouseOut:!1,accordionDropdowns:!1,keepDropdownsOpen:!1,handleImagesLoading:!0,stripHTMLComments:!1,urlQuery:!0,listCollection:{enabled:!0,container:null,getItemsHTMLOnly:!0,itemLinkSelector:"a"},requestAttrWithAjax:!0,waitForAjax:!1,collectionUrl:null,useLocalCache:!1,compatCatTagInQuery:!0,useSQSProxy:{enabled:!0,cacheTime:10,removeFields:"excerpt,variants"},useHistory:!1,initState:{},parentFilter:null,performanceMode:!1,optionsDescription:{container:null},updateFilterOptions:{enabled:!0,nonExistOptions:{hide:!1,disable:!1,disableHard:!1,moveBottom:!1},showOptionsCounters:!1,optionsCounterWrap:"- ()"},pagination:{enabled:!1,pageSize:20,place:"bottom",scrollToTop:{duration:600},backgroundColor:"transparent",margin:"3% 0",padding:"0",align:"center",pagesRange:3,pagesAround:2,showPrevNext:{enabled:!1,hideItems:!1,next:"Next",prev:"Prev"},items:{style:"square",width:"32px",margin:"20px",borderWidth:"2px",backgroundColor:"#fff",activeBackgroundColor:"#555",color:"#000",activeColor:"#fff"},loadMoreButton:{enabled:!1,text:"Load more...",alignment:"center",size:"small",ignoreLZSSetings:!1}},mobilePanel:{enabled:!0,forceOnWidth:"500px",triggerButtonName:"Filter",align:"left",closeButtonPosition:"bottom",keepDropdownsOpen:null,closeOnSelect:!1,closeOnSearch:!1,closeOnOutsideClick:!1},advancedMap:{advancedMapContainer:null,activateMarkerInfoOnItemHover:!0,activateItemOnMarkerClick:!0,activateMarkerInfoOnItemClick:!1,desactivateMarkerOnItemMouseOut:!1,updateMapBound:!0,followMapBounds:!1,autocomplete:{enabled:!1,positionOrder:100,text:"Search Zip",minLength:3,customSearchFunc:!1,timeout:300,dimension:{enabled:!0,val:"",values:{}},radius:{enabled:!0,hidden:!1,val:100,step:1,max:200,min:10},circle:{strokeColor:"#65bedc",strokeWeight:1,strokeOpacity:1,fillColor:"#65bedc",fillOpacity:.4},options:{types:["(regions)"],componentRestrictions:{country:"usa"}}}},externalFilterLinks:{enabled:!1,hideFilters:!1,container:null,items:"a[href]"},simpleFilter:{anim:!0,layoutAnim:!1,show:{effect:"scale",transitionDuration:300,stagger:16,easing:"ease-in-out"},hide:{effect:"scale",transitionDuration:200,stagger:36,easing:"ease-in-out"}},isotope:{enabled:!1,transitionDuration:300,columnWidth:null,gutter:null,layoutMode:null,stamp:null},mixitup:{enabled:!1,transitionDuration:300},clearAllButton:{enabled:!1,text:"Clear All",place:"before"},sort:{enabled:!0,title:"Sort",positionOrder:99,items:[]},filter:{enabled:!0,useItemsClassesForData:!1,cacheOptions:!0,setCategoriesClasses:!0,setTagsClasses:!0,followNewProductsCategories:!0,category:{positionOrder:2,main:"categoriesDropdown",hideValueLabel:!1,name:"Category",sort:"asc",getAttr:"categories",multiple:!0,strict:!0,hideDefaultLabelIfDirty:!1,showAll:!1},tag:{positionOrder:3,main:"tagsDropdown",hideValueLabel:!1,name:"Tag",sort:"asc",getAttr:"tags",multiple:!0,strict:!0,hideDefaultLabelIfDirty:!1,showAll:!1},items:[]},search:{enabled:!0,positionOrder:100,text:"Search",minLength:1,submitOnEnter:!1,timeout:400,regExpWordsDelimiter:null,searchFunc:"exst_text",customSearchFunc:!1},productsBadges:null,hooks:{beforeCreate:null,beforeInit:null,onInit:null,afterInit:null,htmlListFetched:null,htmlListJSONTransform:null,onStart:null,onDropdownsBuilt:null,afterRequest:null,beforeFilter:null,onFilter:null,afterFilter:null}}},e),this.container=t,this.slugify=Tt;var i=this;if(window.location.search){var s=window.location.search.substring(1);try{var a=JSON.parse('{"'+s.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(t,e){return""===t?e:e.replace(/\+/g," ")});a["filter-timelog"]&&(this.target.settings.timelog=!0),a["filter-disable-images-loading"]&&(this.target.settings.handleImagesLoading=!1),a["filter-enable-pagination"]&&(this.target.settings.pagination.enabled=!0,this.target.settings.pagination.pageSize=parseInt(a["filter-enable-pagination"])),a["filter-enable-load-more"]&&(this.target.settings.pagination.enabled=!0,this.target.settings.pagination.pageSize=parseInt(a["filter-enable-load-more"]),this.target.settings.pagination.loadMoreButton.ignoreLZSSetings=!0,this.target.settings.pagination.loadMoreButton.enabled=!0)}catch(t){console.log(t)}}this.table_block=this.container.one("table.custom-table-block");try{!this.table_block||this.table_block.hasClass("custom-table-inited")?this._init():this.table_block._node.addEventListener("table-init",function(t){i._init()})}catch(t){console.log("Init Error",t)}}}function w(){window.Y&&(window.Squarespace.onInitialize(window.Y,function(){var e,i,t;!function(){a=a||window.Y.one("body");try{window.customFilterSettings||(window.customFilterSettings={targets:[{container:".ProductList,.collection-type-products.view-list .main-content",items:".hentry",settings:{sort:{enabled:!0,items:[{name:"Price",order:"asc|desc"}]}}}]}),window.customFilterSettings&&(window.customFilterSettings.targets&&window.customFilterSettings.targets.length&&($&&console.log("find target"),window.customFilterSettings.targets.forEach(function(t){t.settings?t.settings.runOnDOMReady?Y.once("domready",function(){h(t)}):t.settings.runDelay?setTimeout(function(){h(t)},t.settings.runDelay):h(t):(console.log("No Settings"),a&&a.addClass("no-custom-filter-activated"))}),d()),s=Y.Global.on("advanced-maps:initialized",function(s){var a;s&&(a=s.parentNode&&s.parentNode.className&&-1<s.parentNode.className.indexOf("map-block")?s.parentNode.id:"",r&&r.length&&r.forEach(function(e){var t,i=e.target.settings.advancedMap;a&&i&&i.advancedMapContainer&&(s._map_data&&(!e.coll_data||!e.coll_data.items||e.coll_data.items.length<s._map_data.length)&&(e.coll_data.items=s._map_data),s._map_config&&s._markers&&s._markers[0]&&s._markers[0].outsideItem&&!e.items.size()&&(e.target.items=".outside-marker-item",e.target.settings.performanceMode=!0,i.activateMarkerInfoOnItemHover=!1,e.items=e.container.all(".outside-marker-item"),e.items.size()&&e.items.addClass("custom-filter-grid-item"),e.itemsParent=e.items.item(0).get("parentNode"),e.itemsParent&&e.itemsParent.addClass("custom-filter-grid")),e._addItemsAttributes(),e._buildDropdowns(),e._checkInitState(),e._sortGrid(!0),i.autocomplete&&i.autocomplete.enabled&&e.mapAutocompleteContainer&&e._initMapAutoComplete(),i.followMapBounds&&s.__map&&(i.updateMapBound=!1,t=At(function(t){e.needBoundsChange||e._followMapBounds(s),e.needBoundsChange=!1},100,!1),s.__map.addListener("bounds_changed",t)))}))}),window.addEventListener("resize",p,!1),window.addEventListener("scroll",m,!1)),Y.fire("custom-filter:check-child-filters")}catch(t){console.warn(t)}}(),e=window,t=(e=e||window).document.body,!e.SQSLayoutObserver&&t&&(i=At(function(t){Y.Global.fire("SQSLayout:edit",{context:t})},2e3,!1),e.SQSLayoutObserver=new MutationObserver(function(t){t.forEach(function(t){t.type&&"attributes"==t.type&&"class"===t.attributeName&&t.target.className&&t.target.className.length&&(-1<t.target.className.indexOf("sqs-layout-rendering")||-1<t.target.className.indexOf("sqs-editing"))&&i(e)})}),e.SQSLayoutObserver.observe(t,{childList:!0,subtree:!0,attributes:!0})),window._scrollBarWidth=window.innerWidth&&document.body&&document.body.offsetWidth?window.innerWidth-document.body.offsetWidth:0,r&&r.length&&r.forEach(function(t){t._registerChildFilters()})}),window.Squarespace.onDestroy(window.Y,function(){r&&r.length&&r.forEach(function(t){t._destroy()}),n&&(window.clearInterval(n),n=null),r=[],s&&(s.detach(),s=null),window.removeEventListener("resize",p),$&&console.log("destroy")}))}f.prototype={addVirtualItems:function(t,e){e&&e.length&&(this.coll_data.items=e),t&&t.addClass("custom-filter-grid-item"),this.virtual_list&&this.virtual_list.size()?this.virtual_list=this.virtual_list.concat(t):t&&t.size()&&this.existedItems&&this.existedItems.size()&&this.existedItems.item(0).getAttribute("id")!=t.item(0).getAttribute("id")&&!this.existedItems.item(0).hasClass("summary-item")?this.virtual_list=this.existedItems.concat(t):t&&t.size()?this.virtual_list=t:this.virtual_list=this.container.all(this.target.items);var i=this;i.requestComplete=!0,i.virtual_active=!0,i._addItemsAttributes(!1,i.virtual_list),i._buildDropdowns(),i._checkInitState(),i.customFiltersWrapper&&(!i.customFiltersWrapper.one(".archive-group-name-link.active")||i.customFiltersWrapper.one(".archive-group-name-link.active")&&i.customFiltersWrapper.one(".archive-group-name-link.active").getAttribute("data-filter-val")),i._sortGrid(!0),i.container.addClass("cf-request-finished")},regenerateAllowedStructure:function(t,i){var e,s=this,a="",n={};if(t&&t.length){for(var r in t.forEach(function(t){"ROOT"==t.type?a=t.id:t.parentCategoryId==a&&(n[t.displayName]=[])}),t.forEach(function(t){var e;t.parentCategoryId===a||(e=i[t.parentCategoryId]&&i[t.parentCategoryId].displayName)&&t.displayName&&n[e]&&n[e].push&&n[e].push(t.displayName)}),s.getFilterAttrObj)if(s.getFilterAttrObj.hasOwnProperty(r)&&"categories"==s.getFilterAttrObj[r].attr){var o=It(s.getFilterAttrObj[r].optionsStructure=n);s.getFilterAttrObj[r].allowedOptions=o,s.getFilterAttrObj[r].sort="asAllowed";var l={};if(o.length)for(var c=0,d=o.length;c<d;c++)l[o[c]]=c;s.getFilterAttrObj[r].allowedHash=l}s.target.settings&&s.target.settings.filter&&s.target.settings.filter.cacheOptions&&(e=s.u_id+"_"+Tt(s.customIndexUrl||s.collectionUrl)+"_categoriesStructure",parseFloat(s.target.settings.filter.cacheOptions),P(n,e,!0))}},addItems:function(e){var i,t=this;t.target.settings.timelog&&console.time("addItems"),this.items=this.items&&this.items.size()?this.items.concat(e):e&&e.size()?e:this.container.all(this.target.items),!this.itemsParent&&this.items.size()&&(this.itemsParent=this.items.item(0).get("parentNode"),this.itemsParent&&this.itemsParent.addClass("custom-filter-grid")),Y.fire("custom-filter-items-added",this.container),this.container.fire&&this.container.fire("custom-filter:items-added",{customFilter:t}),t.filterAnim=!1,t.waitingForNewItems,t.waitingForNewItems=!1,this.isotope?(i=this.isotope.options.transitionDuration,this.isotope.once("layoutComplete",function(t){setTimeout(function(){e.each(function(t){t.all("img").each(function(t){t.fire("refresh")})})},i)}),e&&e.size()&&(t.isotope_item_width?t.isotope_item_width:this.target.settings.isotope.columnWidth?this.target.settings.isotope.columnWidth:this.config?this.config.columnWidth:e.item(0).get("outerWidth"),e.each(function(t){t.setStyles({width:"100%",top:null,left:null,visibility:"visible",float:"left"})}),t.isotope.reloadItems(),t.isotope.layout(),t._sortGrid())):this.mixitup?(this.mixitup.forceRefresh(),t._sortGrid()):t._sortGrid(!0),this.target.settings.advancedMap&&this.target.settings.advancedMap.activateMarkerInfoOnItemClick&&this.advancedMap&&Y.SQS.Gallery.Manager&&!this.container.one(".custom-filter-grid").hasClass("outside-container")&&Y.SQS.Gallery.Manager.unlightboxify(this.items),t.target.settings.timelog&&t.target.settings.timelog&&console.timeEnd("addItems")},loadImages:function(t){if(!this.target.settings.handleImagesLoading)return!1;var d=this,i=(t=t||this.items)&&t.size&&t.size();!this.requestComplete&&t&&t._nodes&&!this.gallery&&(i=6);function g(t){t.ancestor(".ProductList-item")&&t.ancestor(".ProductList-item").addClass("image-is-loaded")}var s;d.container.hasClass("isotope-filter-used");t&&t.size&&(s=0,t.each(function(t,e){if(!t.hasClass("element-hidden")&&t._node.parentNode){if(i<s)return!1;t.all("img").each(function(t){var e=t.get("parentNode");if(e&&e.hasClass("info-marker-image"))return!1;var i="none";e&&(e.hasClass("content-fill")||t.ancestor(".Index-gallery-item-image")||t.ancestor(".index-gallery")||t.ancestor(".product-image")||t.ancestor(".blog-item")||t.ancestor(".ProductList-innerImageWrapper")||t.ancestor(".grid-image")||t._node.className&&-1<t._node.className.indexOf("cover")?i="fill":(e.hasClass("content-fit")||t._node.className&&-1<t._node.className.indexOf("contain"))&&(i="fit")),d.config&&d.config.imageAspectRatio&&"auto"!==d.config.imageAspectRatio.toLowerCase()&&"autocolumns"!==d.config.design&&(!e||e._node.style.paddingBottom||e.hasClass("sqs-video-overlay")||e.hasClass("summary-thumbnail-container")||e.hasClass("sqs-gallery-image-container")||e.setStyles({paddingBottom:100/parseFloat(d.config.imageAspectRatio)+"%",height:0,overflow:"hidden"}));var s,a,n,r,o,l=t.ancestor(".sqs-video-wrapper");if(l)l.videoloader||l.plug(Y.Squarespace.VideoLoader),l.videoloader.fire("refresh");else if(t.hasClass("loaded")||(t._node.addEventListener("load",function(){this.classList.add("loaded"),t.fire("refresh"),g(t)},!1),t.width()&&t.hasAttribute("src")&&(t.addClass("loaded"),g(t))),t.loader)t.width()?t.fire("refresh"):t.loader.load();else{t.ancestor(".BlogList-item-image-link")&&window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.tweakJSON&&(s="stacked"===window.Static.SQUARESPACE_CONTEXT.tweakJSON["tweak-blog-list-style"].toLowerCase(),a="auto"===window.Static.SQUARESPACE_CONTEXT.tweakJSON["tweak-blog-list-item-image-aspect-ratio-stacked"].toLowerCase(),i=s&&a?((n=t._node).style.position=null,n.style.top=null,n.style.right=null,n.style.bottom=null,n.style.left=null,n.style.width=null,n.style.height=null):"fill"),t._no_loader||(t._no_loader=1),t._no_loader++;var c=!0;t.hasClass("ProductList-image--alt")&&!Y.one(".tweak-product-list-item-hover-behavior-show-alternate-image")&&(c=!1,t.addClass("no-need-to-load")),g(t);try{ImageLoader.load(t,{load:c,mode:i}),t._no_loader}catch(t){}}t.hasClass("loaded")&&t.getAttribute("src")&&0==t._node.style.opacity&&t._node.className&&-1==t._node.className.indexOf("--alt")&&-1==t._node.className.indexOf("image-hover")&&(t._node.style.opacity=1,g(t)),d.target.settings.performanceMode&&(r=t.getAttribute("data-src"),o=t.getAttribute("src"),r&&!o&&(t._node.addEventListener("load",function(){this.classList.add("loaded")},!1),t.setStyles({position:"absolute",height:"100%",objectFit:"cover"}).setAttribute("src",r)))}),s++}}))},_buildPagination:function(t){var i=this,e=i.target.settings.pagination,s=t.size()/e.pageSize;if(this.paginationClicked,i.itemsCount&&i.itemsCount.one(".items-count").setAttribute("data-pagination",""),e.enabled){var a,n,r,o,l,c=e.showPrevNext&&e.showPrevNext.enabled,d=c&&e.showPrevNext.hideItems;if(this.container.one(".pagination-block")&&!this.container.one(".pagination-block").hasClass("cf-pagination-block")&&(this.container.one(".pagination-block").remove(),Y.all('style[id*="paginationStylesPlugin"]').remove()),1<s){if(this.container.removeClass("cf-no-pagination-items"),this.container.addClass("cf-pagination-items-exist"),this.container.one(".pagination-block"))i.pagination&&i.pagination.empty();else{e.guid=i.target.index,this.pagination=Y.Node.create('<nav class="pagination-block cf-pagination-block pagination-block-custom-filter-'+e.guid+' pagination-block-plugin clear"></nav>'),e.items&&(e.items.guid=e.guid,e.items.style&&this.pagination.addClass("style-"+e.items.style));try{e.items.lineHeight=e.items.lineHeight||parseFloat(e.items.width),isNaN(e.items.lineHeight)?e.items.lineHeight=e.items.width:e.items.lineHeight+="px"}catch(t){e.items.lineHeight=e.items.width}St(O(".pagination-block.pagination-block-custom-filter-{{guid}} {margin:{{margin}};padding:{{padding}};background-color:{{backgroundColor}};text-align:{{align}}}",e)+O(".pagination-block.pagination-block-custom-filter-{{guid}} .pagination-item{cursor:pointer;padding-bottom:5px;margin-right:{{margin}}}.pagination-block.pagination-block-custom-filter-{{guid}} .pagination-item a{border-width:{{borderWidth}};border-color:{{color}};height:{{width}};width:{{width}};line-height:{{lineHeight}};background-color:{{backgroundColor}};color:{{color}}}.pagination-block-custom-filter-{{guid}} .pagination-item.active a,.pagination-block-custom-filter-{{guid}} .pagination-item:hover a{background-color:{{activeBackgroundColor}};color:{{activeColor}};border-color:{{activeBackgroundColor}}}",e.items),"paginationStylesPlugin-"+e.guid,i.container._node),St('.pagination-block .before-next:not(.active):not(.around),.pagination-block .last-around:not(.active){margin-right: 4px!important}.pagination-block .around-first.around,.pagination-block .pagination-item.before-prev:not(.active):not(.around){margin-left: 4px!important}.pagination-block .pagination-item.show-dot{margin:0 1px!important;pointer-events:none!important}.pagination-block .pagination-item.show-dot:not(.active) a{border:none!important;width:auto!important;background-color:transparent!important}.pagination-block.hidePageNumbers .page-number,.pagination-block[data-page-number="1"] .arrow.prev,.pagination-block[data-page-number="last"] .arrow.next{display:none}.pagination-block:not(.showArrows) .arrow{display:none}.pagination-block:not(.showArrows) .page-number-last{margin:0!important}.pagination-block-plugin.loadMore-used .pagination-item{display:none}.pagination-block-plugin{margin:3% 0;clear:both;box-sizing:border-box;display:inline-block;width:100%}.pagination-item a{border:none;display:block;white-space:nowrap;text-align:center;padding:0;margin:0;border-width:2px;border-style: solid;transition:all .1s linear;-webkit-transition:all .1s linear}.pagination-block-plugin.style-circle .pagination-item a{border-radius:50%}.pagination-block-plugin.style-pillow .pagination-item a{border-radius:4px}.pagination-block-plugin .pagination-item:last-child{margin:0!important}.pagination-block-plugin .pagination-item{display:inline-block;margin-right:16px;overflow:hidden;vertical-align:middle}',"paginationStylesPlugin",document.body);var g=this.container.one(".sqs-gallery-container");g&&g.addClass("clear");var u=i.table_block&&i.table_block.get("parentNode")||g||this.container.one(".custom-filter-grid");u&&(e.place&&"top"===e.place.trim()?u.insert(this.pagination,"before"):u.insert(this.pagination,"after"))}c&&i.pagination&&i.pagination.addClass("showArrows"),d&&i.pagination&&i.pagination.addClass("hidePageNumbers");var p=!1;e.pagesRange&&3<=s/e.pagesRange&&(p=!0);t.size();var m=c&&e.showPrevNext.prev?e.showPrevNext.prev:"Prev";this.pagination&&this.pagination.append('<div class="pagination-item arrow prev"><a style="border-radius:0;width:auto;padding:0 5px" data-index="prev">'+m+"</a></div>");for(var h=this.pagination_num,f="",v=1;v<1+s;v++){var b="",w="",_="",C="",y=1===v?" page-number-first":s<v?" page-number-last":"";h!=v&&(h||1!==v)||(b=" active"),(v<h&&v>=h-e.pagesAround||h<v&&v<=h+e.pagesAround)&&h>=e.pagesRange&&(_=" around",f&&(_+=" around-first"),v==h+e.pagesAround&&v>e.pagesRange&&v<s-e.pagesRange&&(_+=" last-around")),p&&(C=v===e.pagesRange?" before-next":v===parseInt(2+s-e.pagesRange)?" before-prev":"",f=v>e.pagesRange&&v<s-e.pagesRange+1&&!_&&!b&&(w=" show-dot",!0));var x=w&&!b?".":v;i.pagination&&i.pagination.append('<div class="pagination-item page-number pagination-item-'+v+b+w+C+_+y+'"><a data-index="'+v+'">'+x+"</a></div>")}var k=c&&e.showPrevNext.next?e.showPrevNext.next:"Next";i.pagination&&i.pagination.append('<div class="pagination-item arrow next"><a style="border-radius:0;width:auto;padding:0 5px" data-index="next">'+k+"</a></div>"),e.loadMoreButton&&e.loadMoreButton.enabled&&(i.pagination.addClass("loadMore-used"),this.container.one(".pagination-loadMore-button")||(this.loadMoreButton=Y.Node.create(O('<div class="sqs-block-button sqs-block pagination-loadMore-button"><div class="sqs-block-button-container--{{alignment}}" data-alignment="{{alignment}}"><button class="sqs-block-button-element--{{size}} sqs-block-button-element pagination-loadMore">{{text}}</button></div></div>',e.loadMoreButton)),this.pagination&&this.pagination.insert(this.loadMoreButton,"after"),i.pagination.hide()))}else this.container.addClass("cf-no-pagination-items"),this.container.removeClass("cf-pagination-items-exist"),i.pagination_num=1,i.pagination&&i.pagination.remove(),i.pagination=null;this.pagination_num&&(this.pagination||this.loadMoreButton)&&(this.pagination&&(this.pagination.setAttribute("data-page-number",this.pagination_num),this.pagination.all(".active").removeClass("active"),(a=this.pagination.one(".pagination-item-"+this.pagination_num))&&a.addClass("active")),n=t.size(),r=(this.pagination_num-1)*e.pageSize,l=n-(o=e.pageSize+r>t.size()?t.size():e.pageSize+r),t.size()>e.pageSize&&(t.each(function(t,e){(e<r||o<=e)&&i.hidden.push(t)}),e.loadMoreButton&&e.loadMoreButton.enabled?t._nodes=t._nodes.slice(0,o):t._nodes=t._nodes.slice(r,o),this.loadMoreButton&&(r=0),i.itemsCount&&i.itemsCount.one(".items-count").setAttribute("data-pagination","("+r+" - "+o+")"),l<1&&this.pagination&&this.pagination.setAttribute("data-page-number","last")),this.loadMoreButton&&(l<1?this.loadMoreButton.hide(!0):this.loadMoreButton.show(!0),i.pagination&&i.pagination.hide(),this.loadMoreButton&&this.loadMoreButton.one(".sqs-block-button-element").setAttribute("data-size",l)))}return this.paginationClicked=!1,t},_init:function(){var t,e,i,s,a,ht=this;Y.one('link[rel="stylesheet"][href*="custom-filter.min.css"]')||(t="https://assets.squarewebsites.org/custom-filter/custom-filter.min.css",e=null,i=function(){ht._sortGrid()},(s=document.createElement("link")).href=t,s.rel="stylesheet",s.onload=function(){i&&i(null,{nodes:[this]})},(e=e||document.getElementsByTagName("head")[0]).appendChild(s)),Y.one("body").addClass("cf-filter-used-on-page"),this.target.settings.simpleFilter&&this.target.settings.simpleFilter.persistent&&!this.target.settings.itemsParent&&(a=this.container.get("children"),this.container.prepend('<div class="cf-persist-container"></div>'),this.container.one(".cf-persist-container").append(a),this.itemsParent=this.container.one(".cf-persist-container")),this.container.hasClass("summary-v2-block")&&this.container.getAttribute("data-block-json")&&(this.container.LazySummariesData=JSON.parse(this.container.getAttribute("data-block-json")));var n=this.container.getAttribute("id");if(n&&"productList"==n&&(this.container.get("parentNode").hasClass("container-content")||this.container.get("parentNode").hasClass("main-content")||"main-content"==this.container.get("parentNode").getAttribute("data-content-field")||"page"==this.container.get("parentNode").getAttribute("id"))&&(this.container=this.container.get("parentNode")),this.config=!!this.container.getAttribute("data-block-json")&&JSON.parse(this.container.getAttribute("data-block-json")),this.container.hasClass("hfeed")&&this.container.hasClass("article-list")&&(this.container=this.container.get("parentNode")),1==this.target.settings.wrapFilterContainer&&(this.container.wrap('<div class="cf-filter-wrapper"></div>'),this.container=this.container.get("parentNode")),window.location.search&&3<window.location.search.length&&this.container.addClass("cf-location-query-found"),this.container.get("parentNode")&&this.container.get("parentNode").addClass("custom-filter-parent-node"),this.items=this.target.items&&this.container.one(this.target.items)?this.container.all(this.target.items):new Y.NodeList,this.existedItems=this.target.items&&this.container.one(this.target.items)?this.container.all(this.target.items):new Y.NodeList,(this.container.hasClass("BlogList")||this.container.hasClass("sqs-blog-list"))&&(this.container=this.container.get("parentNode")),this.scrollEl=Y.one(document.scrollingElement)||Y.one(Y.UA&&Y.UA.gecko||Y.UA&&Y.UA.ie||navigator.userAgent.match(/Trident.*rv.11\./)?"html":"body"),this.first_sort_run=!1,this.target.settings.hooks&&this.target.settings.hooks.beforeInit&&"function"==typeof this.target.settings.hooks.beforeInit&&this.target.settings.hooks.beforeInit(this),this.container.get("parentNode")&&this.container.get("parentNode").hasClass("custom-filter-container"))console.log("Hey, seems Filter initialized in Parent Node");else{Y.one("#categoryNav")&&Y.one("#categoryNav").hide(),this.target.settings.productsBadges&&this.target.settings.productsBadges&&(this.target.settings.productsBadges.map?this.target.settings.productsBadges=this.target.settings.productsBadges.map(function(t){return t.trim()}):"string"==typeof this.target.settings.productsBadges?this.target.settings.productsBadges=this.target.settings.productsBadges.split(",").map(function(t){return t.trim()}):this.target.settings.productsBadges=null);var r,o=this.target.settings.advancedMap;o&&o.advancedMapContainer&&((r=Y.one(o.advancedMapContainer))&&(r.setAttribute("data-filter","request="+(this.target.settings.useSQSProxy&&this.target.settings.useSQSProxy.enabled)),this.advancedMap=r.one(".custom-map-block"),this.advancedMap&&this.advancedMap._node&&this.advancedMap._node._map_data&&this.advancedMap._node._map_data.length&&(this.coll_data||(this.coll_data={}),this.coll_data.items=this.advancedMap._node._map_data,Y.Global.fire("advanced-maps:initialized",this.advancedMap))));var l=["custom-filter-container","custom-filter-new-ver"];ht.filterAnim=!1,this.target.settings.requestAttrWithAjax&&this.container.addClass("cf-ajax-request"),this.target.settings.customClasses&&this.target.settings.customClasses.split(" ").forEach(function(t){t=Tt(t.trim()),l.push(t)}),this.target.settings.useLocalCache&&(this.target.settings.useSessionCache=!0),this.items.size()&&(this.items.each(function(t,e){t.hasAttribute("data-start-index")||t.setAttribute("data-start-index",e)}),this.items.addClass("custom-filter-grid-item"),this.itemsParent||(this.itemsParent=this.items.item(0).get("parentNode")),this.target.settings.shuffle&&setTimeout(function(){ht._addItemsAttributes(!0)},0)),this.container.LazySummariesData&&this.container.LazySummariesData.enableLazy&&!this.container.LazySummariesData.loadAllOrPag&&(this.target.settings.pagination.enabled=!0,this.target.settings.pagination.pageSize=this.container.LazySummariesData.pageSize||this.target.settings.pagination.pageSize,this.target.settings.pagination.loadMoreButton&&!this.target.settings.pagination.loadMoreButton.ignoreLZSSetings&&(this.target.settings.pagination.loadMoreButton.enabled=!0,this.target.settings.pagination.loadMoreButton.text=this.container.LazySummariesData.loadMoreText||this.target.settings.pagination.loadMoreButton.text));var c,d,g=!0;this.container.hasClass("summary-v2-block")&&this.container.one(".summary-item-list")&&(this.container.one(">.sqs-block-content").addClass("custom-filter-grid"),this.itemsParent=this.container.one(".summary-item-list"),g=!1),this.target.settings.itemsParent&&(this.itemsParent=this.container.one(this.target.settings.itemsParent)),this.itemsParent||(this.itemsParent=this.container.one(".collection-content-wrapper[data-controller]")),this.itemsParent&&g&&this.itemsParent.addClass("custom-filter-grid"),this.target.settings.stripHTMLComments&&ht.itemsParent&&ht.itemsParent._node&&setTimeout(function(){!function t(e){for(var i=0;i<e.childNodes.length;i++){var s=e.childNodes[i];8===s.nodeType||3===s.nodeType&&!/\S/.test(s.nodeValue)?(e.removeChild(s),i--):1===s.nodeType&&t(s)}}(ht.itemsParent._node)},0),this.sqs_query_factor=this.itemsParent&&(this.itemsParent.hasClass("ProductList-grid")||this.itemsParent.hasClass("ProductList-grid")||this.itemsParent.hasClass("BlogList")||this.itemsParent.hasClass("sqs-blog-list")||this.itemsParent.hasClass("blog-list"))&&(-1<window.location.href.indexOf("category=")||-1<window.location.href.indexOf("/category/")||-1<window.location.href.indexOf("tag=")||-1<window.location.href.indexOf("/tag/")),this.sqs_query_factor?Y.one("body").addClass("cf-sqs-query-in-url"):Y.one("body").removeClass("cf-sqs-query-in-url"),this._initFilterPosition(),this.target.settings.optionsDescription&&this.target.settings.optionsDescription.container&&(this.optionsDescriptionContainer=Y.one(this.target.settings.optionsDescription.container),this.optionsDescriptionContainer&&(l.push("cf-options-description-used"),this._initDescriptionContainer())),this.currentCats=[],this.currentTags=[],this.collectionUrl=this.target.settings.collectionUrl,this.getFilterAttrObj={},this.filterParams={},this.items_prices=[],this.pagination_num=1,this.sortObj={index:"[data-index] parseInt",index_desc:"[data-index] parseInt"},this.target.settings.performanceMode&&l.push("performance-mode-used"),this.config&&!this.target.settings.collectionUrl&&(this.collectionUrl=this.config.collectionUrl||this.config.mapCollection&&this.config.mapCollection[0]&&this.config.mapCollection[0].urlId&&"/"+this.config.mapCollection[0].urlId,this.config.collectionFilter&&(this.config.collectionFilter.tag||this.config.collectionFilter.category)&&(this.config.filter=this.config.collectionFilter),c=this.container.one(".summary-title-link")||this.container.one(".summary-thumbnail-container")&&this.container.one(".summary-thumbnail-container")._node.pathname&&this.container.one(".summary-thumbnail-container"),this.collectionUrl||(c?(d=c._node.pathname.split("/")).length<=6?this.collectionUrl="/"+d[1]:6<d.length&&(this.collectionUrl="/"+d[1]+"/"+d[2]):this.collectionUrl=location.pathname),this.config.filter&&(this.config.filter.tag||this.config.filter.category)&&(this.collectionUrl+=this.config.filter.category?"?category="+this.config.filter.category.trim().replace(/ /g,"+").replace(/%20/g,"+").replace(/&/g,"%26"):"?",this.collectionUrl+=this.config.filter.tag?(-1<this.collectionUrl.indexOf("?")&&-1<this.collectionUrl.indexOf("category=")?"&":"")+"tag="+this.config.filter.tag.trim().replace(/ /g,"+").replace(/%20/g,"+").replace(/%20/g,"+").replace(/&/g,"%26"):"")),this.collectionUrl=this.collectionUrl?this.collectionUrl:location.pathname;var u,p,m=this.target.settings.hidden?"display:none":"";this.customFiltersWrapper=Y.Node.create('<div class="customFiltersWrapper clearfix clear" style="'+m+'"><div class="customFiltersContainer"><div style="display:none!important" class="sqs-block reset-first-sqs-block hidden" hidden="true"><span hidden="true"></span></div></div><button class="mobile-panel-close" style="opacity:0"></button><div style="display:none!important" class="sqs-block reset-last-sqs-block hidden" hidden="true"><span hidden="true"></span></div></div>'),this.customFilters=this.customFiltersWrapper.one(".customFiltersContainer"),this.searchRegex="",this.filter_selectors="",this.sort_param="index",this.container.fire&&this.container.fire("custom-filter:filter-before-init",{customFilter:ht}),Y.fire("custom-filter:filter-before-init",{customFilter:ht}),ht.target.settings.hooks&&ht.target.settings.hooks.onInit&&"function"==typeof ht.target.settings.hooks.onInit&&ht.target.settings.hooks.onInit(ht),this.u_id="custom-filter-uid-"+this.target.index,this.target.settings.showItemsCount&&(u=parseInt(this.target.settings.itemsCount.positionOrder),p=this.target.settings.itemsCount.text?' data-items-text="'+this.target.settings.itemsCount.text+'"':"",this.itemsCount=Y.Node.create('<div class="items items-count-wrapper sqs-block" data-pos-order="'+u+'"><div class="sqs-block-content"><div class="items-count-inner"'+p+'><span class="items-count">'+this.items.size()+"</span></div></div></div>"),this.customFilters.append(this.itemsCount));var h=this.target.settings.view||"dropdowns";l.push("custom-filter-view-"+h),this.target.settings.showCheckboxes&&("right"==this.target.settings.showCheckboxes?l.push("cf-show-checkboxes-right"):l.push("cf-show-checkboxes"));var f,v=this.target.settings.filter;ht.SQSProxy={},ht.SQSProxy.bodyFieldNeeded=ht.target.settings&&ht.target.settings.useSQSProxy&&ht.target.settings.useSQSProxy.bodyFieldNeeded||!1,v.enabled&&((v.category||v.tag)&&(v.items||(v.items=[]),v.tag&&v.tag.name&&(v.tag.main&&"object"==typeof v.tag||(v.tag={}),v.tag.main="tagsDropdown",v.tag.name="Tags",v.tag.subName="tag",v.items[0]&&"tagsDropdown"===v.items[0].main||v.items.unshift(v.tag)),v.category&&v.category.name&&(v.category.main&&"object"==typeof v.category||(v.category={}),v.category.main="categoriesDropdown",v.category.subName="category",v.category.name="Categories",v.items[0]&&"categoriesDropdown"===v.items[0].main||v.items.unshift(v.category))),v&&v.items&&v.items.length&&v.items.forEach(function(n,t){if(n.name){var e=n.name.trim(),i=parseInt(n.positionOrder)||4+t,s=n.subName?Tt(n.subName):Tt(e);ht.filterParams[s]||(ht.filterParams[s]=[]);var a=n.main||"name-"+Tt(e,!0),r=n.defined||!1,o=n.getAttr?n.getAttr:"",l=(l=!!n.ignoreNonExistOptions)?'data-ignore-non-exist-options="true"':"",c=n.variantOption||!1;"string"==typeof o&&"tags"!==o&&"categories"!==o&&-1==o.indexOf("variant|")&&(ht.SQSProxy.bodyFieldNeeded=!0),o&&-1<(o+"").indexOf("variant|")&&(c=o.split("|")[1],o=Ut);var d=n.allOption||"All",g=n.options&&n.options.toLowerCase?n.options.split(","):n.options||[],u=n.allowedOptions||[];if(u.length){"string"==typeof u&&(u=u.split(","));for(var p=0;p<u.length;p++)u[p]=(u[p]+"").trim()}var m=n.optionsStructure;m||ht.target.settings.filter.cacheOptions&&"categories"==o&&(m=Mt(ht.u_id+"_"+Tt(ht.customIndexUrl||ht.collectionUrl)+"_categoriesStructure")),m&&"object"==typeof m&&!m.forEach&&(u=m),"object"!=typeof u||u.forEach||(u=It(m=u),n.sort="asAllowed");var h=n.visibleOptions||[],f="",v="";if(h.length){"string"==typeof h&&(h=h.split(","));for(var b=0;b<h.length;b++)h[b]=(h[b]+"").trim();h.length&&(f=' data-visible-options="set"')}var w=n.notVisibleOptions||[];if(w.length){"string"==typeof w&&(w=w.split(","));for(var _=0;_<w.length;_++)w[_]=(w[_]+"").trim();w.length&&(v=' data-not-visible-options="set"')}var C=n.rootOptions||[];if(C.length){"string"==typeof C&&(C=C.split(","));for(var y=0;y<C.length;y++)C[y]=(C[y]+"").trim();for(var x=C.length-1;0<=x;x--)u&&u.length&&-1===u.indexOf(C[x])&&u.unshift(C[x]),-1===g.indexOf(C[x])&&g.unshift(C[x])}var k=n.notAllowedOptions||!1;if(k.length){"string"==typeof k&&(k=k.split(","));for(var O=0;O<k.length;O++)k[O]=(k[O]+"").trim()}var F=n.allowedPrefSuf||"",S=null;if(u.length&&n.sort&&"asAllowed"===n.sort){S={};for(var A=0,P=u.length;A<P;A++)S[u[A]]=A}var I=n.hidden?" hidden":"",T=n.hideDefaultLabelIfDirty?" hide-def-label":"",L=n.hideValueLabel?" hide-val-label":"",M=!n.logic||"and"!==n.logic.trim()&&"or"!==n.logic.trim()?"and":n.logic.trim(),N=!n.multipleLogic||"and"!==n.multipleLogic.trim()&&"or"!==n.multipleLogic.trim()?"or":n.multipleLogic.trim(),q=n.children||"",E=!!n.checkChildren||!1,D=n.defaultAttrs||"",W=!n.hasOwnProperty("strict")||!!n.strict,U=!!n.multiple,B=n.hideTitle?" hidden":"",j=n.hasOwnProperty("allLabel")&&' data-all-label="'+n.allLabel+'"'||' data-all-label=": '+d+'"',z=n.initText?'data-init-text="'+n.initText+'"':"",R=Tt(e)+"-target-"+ht.target.index+"-"+(new Date).getTime(),V="",G=n.type||"dropdown",H=n.resetOthers?'data-reset-others="'+n.resetOthers+'"':"",Q=!!n.outsideFilterValues,Z=Q?" outside-values-visible":"";"dropdown"==G&&n.quickSearch&&n.quickSearch.enabled&&!0===n.quickSearch.enabled&&(V='<li class="quick-options-search"><input type="text" placeholder="'+(n.quickSearch.placeholder||"")+'" /><span class="reset-button qos-reset-button icn-cancel"></span></li>');var J,X,$,K,tt,et,it,st,at="";"dropdown"==G?at='<div class="archive-block-wrapper archive-block-setting-layout-dropdown archive-block-setting-text-alignment-left archive-block-setting-multicolumns"><input class="archive-dropdown-toggle-checkbox" id="dropdown-filter-'+R+'" type="checkbox"><label class="archive-dropdown-toggle-label '+B+'" for="dropdown-filter-'+R+'"><span class="archive-dropdown-toggle-title '+B+'"'+z+'><span class="defaultLabel"><span>'+e+'</span></span><span class="filterValues" '+j+'></span><span class="reset-button icn-cancel"></span></span><span class="icn-down-open"></span></label><div class="outsideFilterValues"></div><ul class="archive-group-list">'+V+"</ul></div>":"range-slider"==G&&(ht.rangesSliders||(ht.rangesSliders=[]),J="",n.min=n.min||0,n.max=n.max||100,n.step=n.step||10,n.tooltips=n.showTooltips?' data-tooltips="true"':"",X=n.showInputs?"":" hide-inputs",$=n.inputsDisabled?" inputs-disabled":"",K=n.showLabel?"":" hide-label",n.min&&(J+=" data-min="+parseFloat(n.min)),n.max&&(J+=" data-max="+parseFloat(n.max)),n.step&&(J+=" data-step="+parseFloat(n.step)),tt=n.inputsDisabled?1:20,n.dimension=n.dimension||"",et=n.dimension+""?' data-dimension="'+n.dimension+'"':"",it=n.dimensionPosition||"before",st="",et&&n.tooltips&&(st="<style>.custom-filter-uid-"+ht.target.index+" ."+a+" .noUi-tooltip:"+it+'{content:"'+n.dimension+'"}</style>'),n.filterFunction||(n.filterFunction=function(t,e,i,s){var a=t.getAttribute(e),n=!1;if(a&&2<=a.split(",").length&&(n=[],a.split(",").forEach(function(t){(t=t&&parseFloat(t))&&-1==n.indexOf(t)&&n.push(t)}),n=n.sort(function(t,e){return t-e})),n){n.length;var r=!1;return n.forEach(function(t){r=r||i<=t&&t<=s}),r}return!a||(a=parseFloat(a),i<=a&&a<=s)}),at='<div class="range-slider-wrapper'+X+K+$+'">'+st+'<div class="filter-block-label archive-dropdown-toggle-label">'+e+'</div><div class="range-slider" '+J+n.tooltips+et+'></div><div class="inputs-wrapper"><span '+et+' class="min-range"><input auto-width="'+tt+'" type="text" class="range-input range-input-min" /></span><span '+et+' class="max-range"><input auto-width="'+tt+'" type="text" class="range-input range-input-max" /></span></div></div>');var nt,rt,ot,lt,ct,dt,gt,ut=Y.Node.create("<div "+l+' class="sqs-block archive-block sqs-block-archive filterDropdown '+a+" filter-type-"+G+" "+I+T+L+Z+'" '+H+' data-quick-search="'+!!V+'" data-pos-order="'+i+'" data-filter-type="'+G+'" data-all-option="'+d+'" data-multiple-logic="'+N+'" data-logic="'+M+'" data-children="'+q+'" data-check-children="'+E+'" data-defined="'+r+'" data-multiple="'+U+'" data-strict="'+W+'" data-filter="'+s+'"'+f+v+'><div class="sqs-block-content">'+at+"</div></div>"),pt=n.showAll,mt=!!(n.optionsDelimiter||"string"==typeof n.optionsDelimiter&&n.optionsDelimiter.length)&&n.optionsDelimiter;pt&&-1===g.indexOf(d)&&(n.allOptionLast?g.push(d):g.unshift(d)),ht.getFilterAttrObj[s]?console.warn(s+" - method already exists in getFilterAttrObj"):(ht.getFilterAttrObj[s]={attr:o,name:n.name,slugified_name:s,showAll:pt,optionsDelimiter:mt,variantOption:c,type:G,logic:M,optionsStructure:m,lowercase:!!n.lowercase,uppercase:!!n.uppercase,capitalcase:!!n.capitalcase,multiple:U,multipleLogic:N,allOption:d,allOptionLast:n.allOptionLast,firstOption:n.firstOption,notAllowedOptions:k,allowedOptions:u,visibleOptions:h,notVisibleOptions:w,allowedPrefSuf:F,allowedHash:S,rootOptions:C,defaultAttrs:D,currentOptions:g,container:ut,disableOptionsUpdate:!!n.disableOptionsUpdate,filterFunction:n.filterFunction,quickSearch:!!V,outsideFilterValues:Q,format:n.format,sort:n.sort||"asc"},"range-slider"==G&&(nt=ut.one(".range-slider")&&ut.one(".range-slider")._node,rt=[ut.one(".range-input-min")._node,ut.one(".range-input-max")._node],ot=ut.getAttribute("data-filter"),window.noUiSlider&&nt&&(lt=parseFloat(nt.dataset.min||0),ct=parseFloat(nt.dataset.max||50),dt=parseFloat(nt.dataset.step||10),lt==ct&&(ct=lt+dt),gt={to:function(t){return"price"==o&&!n.format||n.format&&"price"==n.format?t.toFixed(2).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"):n.format?"function"==typeof n.format?n.format(t):"string"==typeof n.format&&-1<n.format.indexOf("nFormatter")?function(t,e){if(e=e||0,window.IntlS&&window.Intl.NumberFormat)return Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short",maximumSignificantDigits:e+2}).format(t);for(var i=t<0?"-":"",s=[{value:1,symbol:""},{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}],a=s.length-1;0<a&&!(t>=s[a].value);a--);return i+(t/s[a].value).toFixed(e).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+s[a].symbol}(t,n.format.split("|")[1]||2):t:t},from:function(t){return"string"==typeof n.format&&-1<n.format.indexOf("nFormatter")?(e=t,i=parseFloat((e+"").replace(/[^.0-9]/g,"")),s=(e+"").replace(/[^a-zA-Z-]/g,"").trim(),a={k:1e3,M:1e6,G:1e9,T:1e12,P:1e15,E:1e18},s&&a[s]&&(i*=a[s]),i):Number((t+"").replace(/\,/g,""));var e,i,s,a}},"object"==typeof n.format&&n.format.to&&n.format.from&&"function"==typeof n.format.to&&"function"==typeof n.format.from&&(gt=n.format),noUiSlider.create(nt,{animate:!0,animationDuration:300,tooltips:n.tooltips?[!0,!0]:[!1,!1],start:[lt,ct],step:dt,connect:!0,range:{min:lt,max:ct},format:gt}),nt.noUiSlider.on("update",function(t,e){rt[e].value=t[e];var i=nt.noUiSlider.options.range,s=Y.one(nt).ancestor(".filterDropdown"),a=nt.noUiSlider.options.format.from(t[0]),n=nt.noUiSlider.options.format.from(t[1]);a!=i.min||n!=i.max?s&&s.addClass("dirty"):s&&s.removeClass("dirty"),rt[e].parentNode.setAttribute("data-value",t[e]),rt[e].setWidth&&rt[e].setWidth()}),nt.noUiSlider.on("change",function(t,e){ht.filterAnim=!0,Y.fire("custom-filter:filter-filtering",{customFilter:ht}),ht.container.fire&&ht.container.fire("custom-filter:filter-filtering",{customFilter:ht,param:ut.getAttribute("data-filter-val")}),ht.advancedMap&&(ht.needBoundsChange=!0),ht._sortGrid()}),rt.forEach(function(t,n){t.addEventListener("change",function(){nt.noUiSlider.setHandle(n,this.value)}),t.addEventListener("keydown",function(t){var e,i=nt.noUiSlider.get(),s=Number(i[n].replace(/\,/g,"")),a=nt.noUiSlider.steps()[n];switch(t.which){case 13:nt.noUiSlider.setHandle(n,this.value);break;case 38:!1===(e=a[1])&&(e=1),null!==e&&nt.noUiSlider.setHandle(n,s+e);break;case 40:!1===(e=a[0])&&(e=1),null!==e&&nt.noUiSlider.setHandle(n,s-e)}})}),nt.filterFunction=function(t){var e=nt.noUiSlider.get();if("object"!=typeof e)return!1;var i=gt.from?gt.from(e[0]):parseFloat((e[0]+"").replace(/\,/g,"")),s=gt.from?gt.from(e[1]):parseFloat((e[1]+"").replace(/\,/g,"")),a="price"==o?"data-prices":"data-range-value-"+ot;return ht.getFilterAttrObj[ot].filterFunction(t,a,i,s)},nt.filterValue=s,nt.name=e,ht.rangesSliders.push(nt)))),ht.customFilters.append(ut)}}),ht.categoryFilter=ht.customFilters.one(".categoriesDropdown"),ht.tagFilter=ht.customFilters.one(".tagsDropdown"),ht.target.settings.filter.cacheOptions&&(f=ht.u_id+"_"+Tt(ht.customIndexUrl||ht.collectionUrl)+"_filter_options_"+location.pathname,ht.filterCachedOptions=Mt(f))),ht._addItemsAttributes(!0),ht._buildDropdowns();var b,w,_,C,y,x,k,O=this.target.settings.sort;O&&O.enabled&&O.items&&O.items.length&&(b="sort-target-"+ht.target.index+"-"+(new Date).getTime(),w=O.initText?'data-init-text="'+O.initText+'"':"",_=O.hidden?" hidden":"",I=parseInt(O.positionOrder),C=O.hideDefaultLabelIfDirty?" hide-def-label":"",y=O.defined||"",x=O.hasOwnProperty("allLabel")&&' data-all-label="'+O.allLabel+'"'||"",k=O.hideValueLabel?" hide-val-label":"",this.sortContainer=Y.Node.create('<div class="sqs-block archive-block sqs-block-archive sortDropdown '+_+C+k+'" data-defined="'+y+'" data-pos-order="'+I+'"><div class="sqs-block-content"><div class="archive-block-wrapper archive-block-setting-layout-dropdown archive-block-setting-text-alignment-left archive-block-setting-multicolumns"><input class="archive-dropdown-toggle-checkbox" id="dropdown-sort-'+b+'" type="checkbox"><label class="archive-dropdown-toggle-label" for="dropdown-sort-'+b+'"><span class="archive-dropdown-toggle-title"'+w+'><span class="defaultLabel"><span>'+O.title+'</span></span><span class="sortValues" '+x+'></span><span class="reset-button icn-cancel"></span></span><span class="icn-down-open"></span></label><ul class="archive-group-list"></ul></div></div></div>'),O.items.forEach(function(a){var n=a.name?a.name.trim():"Set name here",t=a.order?a.order.split("|"):a.order||["asc"],r=a.hidden?" hidden":"",o=!a.hasOwnProperty("showOrder")||a.showOrder,l="price"===Tt(n)?" parseInt":"",c=a.orderTexts?a.orderTexts.split("|"):[],d=c.length?"hide-pseudo":"",g=a.hideName?"":n;t&&t.length&&t.forEach(function(t,e){var i,s;ht.sortObj[Tt(n)+"_"+t]?console.warn(Tt(n)+"_"+t+" - method already exists in sortObj"):(ht.sortObj[Tt(n)+"_"+t]=a.sort||"[data-"+Tt(n)+"]"+l,i=o?"_"+t:"_"+t+" hide-order",s=c[e]||"",ht.sortContainer.one("ul").append('<li class="archive-group '+Tt(n)+i+r+'"><a href="?sort='+Tt(n)+"_"+t+'" data-sort="'+Tt(n)+"_"+t+'" class="archive-group-name-link '+d+'" data-hide-name="'+!g+'">'+g+'<span class="'+Tt(n)+"-"+t+'">'+s+"</span></a>"))})}),this.customFilters.append(ht.sortContainer));var F,S,A=this.target.settings.search;if(A&&A.enabled&&(P="string"==typeof A.text&&A.text.length?A.text:"Search",I=parseInt(A.positionOrder),this.searchMinLength=A.minLength,F=A.submitOnEnter?'data-submit-on-enter="true"':"",this.searchContainer=Y.Node.create('<div class="sqs-block custom-items-search" data-pos-order="'+I+'"><div class="sqs-block-content"><span class="search-icon icn-search"></span><div data-preview="false" class="search-wrap sqs-search-ui-button-wrapper color-dark"><input '+F+' minlength="'+A.minLength+'" class="search-input" placeholder="'+P+'" type="text"/><span class="reset-button icn-cancel"></span></div></div></div>'),this.customFilters.append(this.searchContainer),this.searchContainer.one(".search-icon").on("click",function(t){t.halt(),ht.target.settings.closeOptionsOnSelect&&ht.customFiltersWrapper.all(".archive-dropdown-toggle-checkbox").set("checked",!1),ht.searchContainer.toggleClass("active"),ht.searchContainer.hasClass("active")&&ht.searchContainer.one(".search-input")._node.focus()}),A.searchFunc&&"function"==typeof A.searchFunc?(this.searchFunction=A.searchFunc,A.searchFunc.toString&&-1<A.searchFunc.toString().indexOf("body")&&(ht.SQSProxy.bodyFieldNeeded=!0)):A.searchFunc&&"string"==typeof A.searchFunc&&(S=!1,-1<A.searchFunc.indexOf("exst_text")&&(A.searchFunc=A.searchFunc.replace(/exst_text/g,""),S=!0),this.searchAttr=A.searchFunc.replace(/ /g,"").split("|"),-1<this.searchAttr.indexOf("body")&&(ht.SQSProxy.bodyFieldNeeded=!0),this.searchFunction=function(i){var s="";return i=i._node?i._node:i,s=S?i.textContent&&i.textContent.replace(/\r?\n|\r/g," ").trim():"",i._item_data&&ht.searchAttr.length&&ht.searchAttr.forEach(function(t){var e;i._item_data[t]&&(e=i._item_data[t]+"","body"==t&&(i._item_data.__body__,e=(e=function(t){var e=document.createElement("div"),i=window.DOMParser&&new window.DOMParser;try{return i?i.parseFromString(t,"text/html").body:(e.innerHTML=t,e)}catch(t){console.log(t)}}(e)).innerText||""),s+=e)}),s=s.trim()}),null!==A.regExpWordsDelimiter&&(ht.regExpWordsDelimiter=A.regExpWordsDelimiter)),o&&o.advancedMapContainer&&o.autocomplete.enabled){var P=o.autocomplete.text.trim()||"Search Map",I=parseInt(o.autocomplete.positionOrder);this.searchMinLength=o.autocomplete.minLength,this.mapAutocompleteContainer=Y.Node.create('<div class="sqs-block custom-items-search map-autocomplete-search" data-pos-order="'+I+'"><div class="sqs-block-content"><span class="search-icon icn-search"></span><div data-preview="false" class="search-wrap sqs-search-ui-button-wrapper color-dark"><input minlength="'+o.autocomplete.minLength+'" class="search-input" placeholder="'+P+'" type="text"/><span class="reset-button icn-cancel"></span></div></div></div>');function T(){var t=o.autocomplete.dimension.val||1e4,e=o.autocomplete.radius.val?o.autocomplete.radius.val*t:1e5;ht.advancedMap&&ht.advancedMap._node&&ht.advancedMap._node.radiusCircle&&e!==ht.advancedMap._node.radiusCircle.getRadius()&&(ht.advancedMap._node.radiusCircle.setRadius(e),ht._followMapBounds())}this.mapAutocompleteContainer.one(".search-wrap");var L,M,N,q,E,D=Y.Node.create('<div class="sqs-block map-autocomplete-dimension-radius" data-pos-order="'+I+'"><div class="sqs-block-content"></div></div>'),W=!1;if(o.autocomplete.radius&&o.autocomplete.radius.enabled&&(L=o.autocomplete.radius.hidden?" hidden":"",M=o.autocomplete.radius.step||1,N=o.autocomplete.radius.max||100,q=o.autocomplete.radius.min||1,V=o.autocomplete.radius.val||N,(E=Y.Node.create('<div class="map-autocomplete-radius"><span class="radius-control quantity-input'+L+'"><input auto-width type="number" step="'+M+'" min="'+q+'" max="'+N+'" value="'+V+'" /><div class="quantity-nav"><div class="quantity-button quantity-up" data-val="up">+</div><div class="quantity-button quantity-down" data-val="down">-</div></div></span></div>')).one("input").on("change",function(t){var e=t.currentTarget.get("value");o.autocomplete.radius.val=parseFloat(e),T()}),W=!0,D.one(".sqs-block-content").append(E)),o.autocomplete.dimension&&o.autocomplete.dimension.enabled){var U,B,j=o.autocomplete.dimension.hidden?" hidden":"",z="",R=o.autocomplete.dimension.values,V=o.autocomplete.dimension.val,G=0;if(R)for(var H in R){R.hasOwnProperty(H)&&(G++,z+='<option value="'+(U=R[H])+'"'+(B=V&&H==V?" selected":"")+">"+H+"</option>",B&&(o.autocomplete.dimension.val=U))}var Q=Y.Node.create('<div class="map-autocomplete-dimension cf-selectbox"><span class="dimension-control'+j+'" data-count="'+G+'"><select>'+z+'</select><span class="icn-down-open"></span></span></div>');Q.one("select").on("change",function(t){var e=t.currentTarget.get("value");o.autocomplete.dimension.val=parseFloat(e),T()}),W=!0,D.one(".sqs-block-content").append(Q)}this.customFilters.append(this.mapAutocompleteContainer),W&&this.customFilters.append(D),this.mapAutocompleteContainer.one(".search-icon").on("click",function(t){t.halt(),ht.mapAutocompleteContainer.toggleClass("active"),ht.mapAutocompleteContainer.hasClass("active")&&ht.mapAutocompleteContainer.one(".search-input")._node.focus()});var Z=At(function(t){ht.mapAutocompleteContainer.addClass("searching"),t.newVal=t.newVal?t.newVal:!!t.target&&t.target.value,t.newVal&&t.newVal.trim()||ht.mapAutocompleteContainer.removeClass("searching"),t.newVal?ht.mapAutocompleteContainer.addClass("dirty"):ht.mapAutocompleteContainer.removeClass("dirty")},o.autocomplete.timeout,!1);this.mapAutocompleteContainer.one(".search-input").on("valuechange",function(t){Z(t)}),this.mapAutocompleteContainer.delegate("click",function(t){t.halt(),ht.filterAnim=!0,ht.mapAutocompleteContainer.one(".search-input").set("value",""),ht.mapAutocompleteContainer.removeClass("dirty"),ht.advancedMap&&ht.advancedMap._node&&ht.advancedMap._node.radiusCircle&&(ht.advancedMap._node.radiusCircle.setMap(null),ht.advancedMap._node.radiusCircle=null),ht.firstMapBoundRun=!1,ht.needBoundsChange=!0,ht._sortGrid(!0)},".reset-button")}this.target.settings.useSQSProxy&&this.target.settings.useSQSProxy.enabled&&(!this.target.settings.useSQSProxy.removeFields||this.target.settings.useSQSProxy.removeFields&&-1==this.target.settings.useSQSProxy.removeFields.indexOf("body"))&&(ht.SQSProxy.bodyFieldNeeded||(this.target.settings.useSQSProxy.removeFields+=",body"));var J,X,$,K,tt=ht.customFiltersWrapper.all(".sqs-block-archive .archive-group-list");tt&&tt.each(function(t,e){t.setStyle("zIndex",1100-e)}),this._checkExternalLinks(),this.target.settings.useHistory&&(l.push("cf-using-history"),ht.blockPushState=!0,this.popstateListener=function(t){ht.blockPushState=!0,ht._checkInitState(!0)},window.addEventListener("popstate",this.popstateListener)),this.customFiltersWrapper.delegate("click",function(t){t.halt(),ht.customFiltersWrapper.all(".archive-group-name-link.active").removeClass("active"),ht.rangesSliders&&ht.rangesSliders.forEach(function(t){var e;t.noUiSlider&&(e=t.noUiSlider.options.range,t.noUiSlider.set([e.min,e.max]))}),ht.searchContainer&&ht.searchContainer.one(".search-input")&&(ht.searchContainer.one(".search-input").set("value",""),ht.searchContainer.removeClass("dirty"),ht.debounce_search({newVal:"",reset:!0})),ht.filterAnim=!0,ht._sortGrid()},".clearAllBtn"),this.container.delegate("click",function(t){t.halt(),t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget);var e,i,s,a,n=t.currentTarget.getAttribute("data-index");"prev"==n?n=1<ht.pagination_num?ht.pagination_num-1:1:"next"==n&&(n=ht.pagination_num+1),n&&(e=function(){ht.filterAnim=!0,ht.paginationClicked=!0,ht.pagination_num=parseInt(n),ht._sortGrid()},"bottom"==ht.target.settings.pagination.place&&ht.target.settings.pagination.scrollToTop&&ht.target.settings.pagination.scrollToTop.duration?(i=ht.container.getY()-160,s=window.pageYOffset||document.documentElement.scrollTop,a=ht.target.settings.pagination.scrollToTop.duration/1e3,300<Math.abs(s-i)?ht.scrollEl.anim({},{to:{scroll:[0,i]},duration:a,easing:Y.Easing.easeBoth}).run().on("end",function(){e()}):e()):e())},".pagination-item a"),this.container.delegate("click",function(t){t.halt(),t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget);var e=!(!ht.pagination||!ht.pagination.one(".pagination-item.active a"))&&ht.pagination.one(".pagination-item.active a").getAttribute("data-index");e&&(ht.pagination.one('.pagination-item a[data-index="'+(parseInt(e)+1)+'"]')?(ht.filterAnim=!1,ht.paginationClicked=!0,ht.pagination_num=parseInt(e)+1,ht._sortGrid()):console.log("No next page",e))},".pagination-loadMore"),this.customFiltersWrapper.delegate("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget);var e,i=t.currentTarget.get("parentNode"),s=i&&i.one(".archive-dropdown-toggle-checkbox");s&&(e=s.get("checked"),s.set("checked",!e)),i.addClass("clicked"),ht.target.settings.accordionDropdowns&&ht.customFiltersWrapper.all(".archive-block-wrapper:not(.clicked) .archive-dropdown-toggle-checkbox").set("checked",!1),t.currentTarget.get("parentNode").removeClass("clicked")},".archive-dropdown-toggle-label"),this.customFiltersWrapper.delegate("click",function(t){t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget),t.currentTarget.addClass("clicked"),ht.target.settings.closeOptionsOnSelect&&ht.customFiltersWrapper.all(".archive-block-wrapper:not(.clicked) .archive-dropdown-toggle-checkbox").set("checked",!1),ht.searchContainer&&ht.searchContainer.removeClass("active"),t.currentTarget.removeClass("clicked")},".archive-block-wrapper"),this.target.settings.closeOnMouseOut&&ht.customFiltersWrapper.delegate("hover",function(t){t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget),t.currentTarget.addClass("hovered")},function(t){t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget),t.currentTarget.removeClass("hovered").one(".archive-dropdown-toggle-checkbox").set("checked",!1)},".archive-block"),this.container.config&&this.container.config.ajaxData?(this.coll_data=this.container.config.ajaxData,this.target.settings.requestAttrWithAjax=!1,ht._start()):this.coll_data&&this.coll_data.collection&&this.coll_data.collection.id&&ht._start(),this.container.LazySummariesData&&this.container.LazySummariesData.enableLazy&&window.__initializeLazySummaries&&(this.target.settings.requestAttrWithAjax=!1),l.push(this.u_id),this.target.settings.mobilePanel&&this.target.settings.mobilePanel.enabled&&(l.push("use-mobile-panel"),this.target.settings.mobilePanel.align&&l.push("cf-mobile-panel-align-"+this.target.settings.mobilePanel.align),J=(J=this.target.settings.mobilePanel.closeButtonPosition)||"bottom",l.push("cf-mobile-panel-close-position-"+J),!0===this.target.settings.mobilePanel.keepDropdownsOpen?l.push("mobile-panel-dropdowns-opened"):!1===this.target.settings.mobilePanel.keepDropdownsOpen&&l.push("mobile-panel-dropdowns-closed")),this.target.settings.keepDropdownsOpen&&l.push("keep-dropdowns-open"),this.target.settings.pagination&&this.target.settings.pagination.enabled&&l.push("cf-pagination-enabled"),this.target.settings.pagination&&this.target.settings.pagination.enabled&&this.target.settings.pagination.loadMoreButton&&this.target.settings.pagination.loadMoreButton.enabled&&(l.push("cf-loadMoreButton-enabled"),this.pagination_num=1),!this.target.settings.simpleFilter.anim||this.target.settings.isotope&&this.target.settings.isotope.enabled?l.push("no-used-css-animation"):this.target.settings.simpleFilter.layoutAnim?l.push("using-layout-animation"):(this.target.settings.simpleFilter.persistent&&l.push("persistent-animation"),l.push("used-css-animation"),l.push("show-animation-"+this.target.settings.simpleFilter.show.effect),l.push("hide-animation-"+this.target.settings.simpleFilter.hide.effect),X=this.target.settings.simpleFilter.show.easing,$="."+ht.u_id+".used-css-animation  .custom-filter-grid-item{transition: opacity "+this.target.settings.simpleFilter.show.transitionDuration+"ms "+X+", transform "+this.target.settings.simpleFilter.show.transitionDuration+"ms "+X+"}",this.target.settings.simpleFilter.hide.transitionDuration&&(K=this.target.settings.simpleFilter.hide.easing,$+="."+ht.u_id+".used-css-animation .hiding .custom-filter-grid-item{transition: opacity "+this.target.settings.simpleFilter.hide.transitionDuration+"ms "+K+", transform "+this.target.settings.simpleFilter.hide.transitionDuration+"ms "+K+"}"),St($,"stylesheet-"+(ht.container.getAttribute("id")||ht.container._node&&ht.container._node._yuid),ht.container._node));var et,it,st,at,nt,rt,ot,lt,ct,dt,gt=this.customFilters.all(".sqs-block");gt._nodes.sort(function(t,e){return(t=parseInt(t.getAttribute("data-pos-order")))-(e=parseInt(e.getAttribute("data-pos-order")))}),ht._checkInitState(this.target.settings.waitForAjax),ht._initFiltering(),ht.first_sort_run||ht.target.settings.requestAttrWithAjax&&(!ht.target.settings.requestAttrWithAjax||ht.target.settings.waitForAjax)||ht._sortGrid(),this.customFilters.insert(gt,null),this.target.settings.hidden&&ht.customFiltersWrapper.setStyles({display:"none",visibility:"hidden"}),this.target.settings.updateFilterOptions&&(this.target.settings.updateFilterOptions.showOptionsCounters&&l.push("cf-show-options-counter"),this.target.settings.updateFilterOptions.enabled&&(this.target.settings.updateFilterOptions.nonExistOptions&&this.target.settings.updateFilterOptions.nonExistOptions.disable&&l.push("cf-non-exist-options-disable"),this.target.settings.updateFilterOptions.nonExistOptions&&this.target.settings.updateFilterOptions.nonExistOptions.disableHard&&l.push("cf-non-exist-options-disable-hard"),this.target.settings.updateFilterOptions.nonExistOptions&&this.target.settings.updateFilterOptions.nonExistOptions.hide&&l.push("cf-non-exist-options-hide"))),this.target.settings.clearAllButton&&this.target.settings.clearAllButton.enabled&&1<this.customFilters.all(".archive-block").size()&&(l.push("custom-filter-clear-all-enabled"),et=this.target.settings.clearAllButton.text||"Clear All",it=this.target.settings.clearAllButton.place&&"after"===this.target.settings.clearAllButton.place?"after":"before",this.clearAllBtn=Y.Node.create('<div class="sqs-block clearAllBtnWrapper"><div class="sqs-block-content"><a href="#" class="clearAllBtn">'+et+"</a></div></div>"),st=this.customFilters.one(".sqs-block[data-pos-order]")?this.customFilters.one(".sqs-block[data-pos-order]:not(.items)"):this.customFilters.one(".filterDropdown")||this.customFilters.one(".sortDropdown"),"before"==it?st&&ht.customFilters.insert(ht.clearAllBtn,st):(st=ht.customFilters.all(".sortDropdown").size()?ht.customFilters.all(".sortDropdown"):ht.customFilters.all(".filterDropdown")).size()&&st.item(st.size()-1).insert(ht.clearAllBtn,"after")),this.target.settings.parentFilter&&Y.one(this.target.settings.parentFilter)&&(l.push("cf-child-filter"),this.parentFilter=Y.one(this.target.settings.parentFilter),this.parentFilter&&this.parentFilter._node&&(this.parentFilter._node.__childFilters=this.parentFilter._node.__childFilters||[],this.parentFilter._node.__childFilters.push(this),this.parentFilter.addClass("cf-parent-filter"))),this.itemsParent&&this.target.settings.noResultMessage&&(l.push("cf-custom-no-results-message"),this.itemsParent.insert('<div class="cf-no-results-wrapper">'+this.target.settings.noResultMessage+"</div>","before"),this.noResultWrapper=this.container.one(".cf-no-results-wrapper")),l=l.toString().replace(/,/g," "),this.container.addClass(l),this.target.settings.placeFiltersTo?(ht.container._node&&(ht.container._node.className=ht.container._node.className.replace(/custom-filter-position-/g,"no-position-")),at=!1,nt="",rt="append","string"==typeof this.target.settings.placeFiltersTo&&(2==(nt=this.target.settings.placeFiltersTo.split("|")).length&&(rt=nt[1]||rt),nt=nt[0]),"object"==typeof this.target.settings.placeFiltersTo&&this.target.settings.placeFiltersTo.desktop&&this.target.settings.placeFiltersTo.mobile||(at=Y.one(nt)),at?(ht.placedContainer=at.addClass("cf-placed-filters").addClass(l).addClass(ht.positionClasses)[rt](this.customFiltersWrapper),(ot=ht.placedContainer.ancestor("#header"))&&-1<l.indexOf("use-mobile-panel")&&ot.addClass("header-filter-placed")):(console.log("Sorry, place container is not found."),ht.container.prepend(ht.customFiltersWrapper))):ht.container.hasClass("sqs-block-gallery")&&ht.container.one(".sqs-gallery-container")?ht.container.one(".sqs-gallery-container").prepend(ht.customFiltersWrapper):ht.container.prepend(ht.customFiltersWrapper),(this.container&&-1<this.container._node.className.indexOf("ProductList")||this.itemsParent&&-1<this.itemsParent._node.className.indexOf("ProductList"))&&(Y.one("body").addClass("tweak-product-list-filter-display-hide").removeClass("tweak-product-list-filter-display-left-side").removeClass("tweak-product-list-filter-display-right-side").removeClass("tweak-product-list-filter-display-top"),window.getComputedStyle&&this.items.item(0)&&(lt=window.getComputedStyle(this.items.item(0)._node).marginRight,ct=700<window.innerWidth&&ht.customFiltersWrapper&&window.getComputedStyle(ht.customFiltersWrapper._node).width?parseFloat(window.getComputedStyle(ht.customFiltersWrapper._node).width)-20:280,lt&&St("@media only screen and (min-width: 701px){body .custom-filter-position-right .ProductList-grid.custom-filter-grid,body .custom-filter-position-left .ProductList-grid.custom-filter-grid{max-width: calc(100% - "+(ct-parseFloat(lt)+.1)+"px)}}","grid-width-"+ht.target.index,ht.container._node))),this.target.settings.mobilePanel&&this.target.settings.mobilePanel.enabled&&(this.container.prepend('<button class="mobile-filter-trigger">'+this.target.settings.mobilePanel.triggerButtonName+"</button>"),this.container.delegate("click",function(t){t.preventDefault(),ht.parentFilter&&ht.parentFilter.CustomFilter&&ht.parentFilter.CustomFilter.container&&ht.parentFilter.CustomFilter.container.one(".mobile-filter-trigger")?ht.parentFilter.CustomFilter.container.one(".mobile-filter-trigger").simulate("click"):(ht.customFiltersWrapper.hasClass("cf-mp-transitions")||ht.customFiltersWrapper.addClass("cf-mp-transitions"),ht.container.toggleClass("mobile-panel-open"),ht.container.hasClass("mobile-panel-open")?(ht.placedContainer&&ht.placedContainer.addClass("mobile-panel-open"),Y.one("body").setStyles({marginRight:window._scrollBarWidth,overflow:"hidden"}),setTimeout(function(){Y.one("body").addClass("filter-scroll-lock")},20)):(ht.placedContainer&&ht.placedContainer.removeClass("mobile-panel-open"),Y.one("body").removeClass("filter-scroll-lock").setStyles({marginRight:"auto",overflow:"auto"})))},".mobile-filter-trigger"),dt=function(t){t.preventDefault(),ht.container.removeClass("mobile-panel-open"),ht.placedContainer&&ht.placedContainer.removeClass("mobile-panel-open"),Y.one("body").removeClass("filter-scroll-lock").setStyles({marginRight:"auto",overflow:"auto"})},this.customFiltersWrapper.delegate("click",dt,".mobile-panel-close"),this.target.settings.mobilePanel.closeOnOutsideClick&&Y.one("body").on("click",function(t){!Y.one("body").hasClass("filter-scroll-lock")||t.target.ancestor(".customFiltersWrapper")||t.target.hasClass("customFiltersWrapper")||dt(t)}),this.target.settings&&this.target.settings.mobilePanel&&this.target.settings.mobilePanel.enabled&&this.target.settings.mobilePanel.forceOnWidth&&(-1==(this.target.settings.mobilePanel.forceOnWidth+"").indexOf("px")&&-1==(this.target.settings.mobilePanel.forceOnWidth+"").indexOf("em")&&parseFloat(this.target.settings.mobilePanel.forceOnWidth)&&(this.target.settings.mobilePanel.forceOnWidth=this.target.settings.mobilePanel.forceOnWidth+"px"),window.mob_stls_tpl="{.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.custom-filter-view-dropdowns.mobile-panel-dropdowns-closed:not(.custom-filter-position-top) .sqs-block-archive .archive-block-setting-layout-dropdown .archive-dropdown-toggle-checkbox:not(:checked)~.archive-group-list{display:none}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.custom-filter-view-dropdowns.mobile-panel-dropdowns-closed:not(.custom-filter-position-top) .sqs-block-archive .archive-block-setting-layout-dropdown .archive-dropdown-toggle-checkbox:checked~.archive-dropdown-toggle-label .icn-down-open:before{content:'\\e802'!important}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.custom-filter-view-dropdowns.mobile-panel-dropdowns-opened:not(.custom-filter-position-top) .sqs-block-archive .archive-block-setting-layout-dropdown .archive-dropdown-toggle-label .icn-down-open:before{content:'\\e801'!important}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.custom-filter-view-dropdowns.mobile-panel-dropdowns-opened:not(.custom-filter-position-top) .sqs-block-archive .archive-block-setting-layout-dropdown .archive-group-list{display:block}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z .customFiltersWrapper{position:fixed;bottom:0;margin:0;background-color:#fff;border:2px solid #000;max-width:80%;max-width:80vw;width:100%;height:80%;visibility:visible!important;min-height:76%!important;float:none!important;min-height:300px;overflow:hidden;z-index:2147483649;will-change:transform;transition-property:transform}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z .customFiltersWrapper.cf-mp-transitions{transition-duration:.3s;transition-timing-function:ease-in-out;transition-delay:.3s}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z .customFiltersWrapper .customFiltersContainer{width:100%;height:100%;padding:10px 5% 48px 5%;position:relative;align-items:start;-webkit-overflow-scrolling:touch;overflow-y:auto;overflow-x:hidden}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.mobile-panel-open .customFiltersWrapper{transform:translate3d(0,0,0)!important;transition-delay:0s!important}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.mobile-panel-open .mobile-panel-close:after,.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.mobile-panel-open .mobile-panel-close:before{transition-delay:.2s}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.mobile-panel-open .mobile-panel-close:before{transform:rotate(45deg);-webkit-transform:rotate(45deg)}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.mobile-panel-open .mobile-panel-close:after{transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.custom-filter-view-modern .sqs-block .archive-dropdown-toggle-label .archive-dropdown-toggle-title.dirty .filterValues,.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.custom-filter-view-modern .sqs-block .archive-dropdown-toggle-label .archive-dropdown-toggle-title.dirty .sortValues{display:inline-block}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z .customFiltersWrapper .archive-block-wrapper ul.archive-group-list{position:relative;border:none;right:0;left:0;margin:0;max-width:100%}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z .customFiltersWrapper{left:0;transform:translateX(-110%)}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.cf-mobile-panel-align-right .mobile-filter-trigger{display:block;width:auto;clear:both;float:right}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.cf-mobile-panel-align-right .customFiltersWrapper{right:0;left:auto;transform:translateX(110%)}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.cf-mobile-panel-align-center .mobile-filter-trigger{display:block;width:auto;clear:both;margin:0 auto;float:none}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z.cf-mobile-panel-align-center .customFiltersWrapper{left:0;margin:0 10vw;transform:translateY(110%)}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z .mobile-filter-trigger{display:inline-block}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z .mobile-panel-close{display:block}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z .custom-filter-grid{margin-top:30px;float:none;padding:0}.custom-filter-container.use-mobile-panel.custom-filter-uid-Z .custom-filter-grid:not(#productList):not(.ProductList-grid):not(.uk-grid){max-width:100%!important;width:100%;margin:30px 0 0 0}.custom-filter-container .customFiltersWrapper .sqs-block{clear:both;float:none;width:100%;margin:0;padding:10px 0;max-width:100%}.cf-mobile-panel-close-position-left .customFiltersContainer,.cf-mobile-panel-close-position-right .customFiltersContainer,.cf-mobile-panel-close-position-top .customFiltersContainer{padding-top:20%!important}.custom-filter-container.custom-filter-view-dropdowns .customFiltersWrapper .sqs-block{max-width:100%!important}.cf-sort-left .sortDropdown,.cf-sort-right .sortDropdown{position:relative!important;padding:10px!important;top:auto!important;left:auto!important;right:auto!important}.custom-filter-container.custom-filter-view-modern .customFiltersWrapper .sqs-block{margin-bottom:8px;padding:0}.custom-filter-container.custom-filter-view-modern .customFiltersWrapper .sqs-block:last-child{margin:0}.custom-filter-container.custom-filter-view-modern .customFiltersWrapper .archive-block-wrapper{position:relative}.custom-filter-container.custom-filter-view-modern .customFiltersWrapper .archive-block-wrapper .archive-group-list{box-shadow:none;border:2px solid #000;z-index:10;max-width:110%;width:100%;max-height:300px;overflow-y:auto}.custom-filter-container.custom-filter-view-modern .customFiltersWrapper .sqs-block.custom-items-search{padding:1px 0;width:100%}.custom-filter-container.custom-filter-view-modern .customFiltersWrapper .sqs-block.custom-items-search .search-icon{display:none}.custom-filter-container.custom-filter-view-modern .customFiltersWrapper .sqs-block.custom-items-search .search-wrap{display:block;position:relative;max-width:100%;box-shadow:none;padding:0}.custom-filter-container.custom-filter-view-modern .customFiltersWrapper .sqs-block.custom-items-search .search-wrap .search-input{line-height:inherit;border:none}.custom-filter-container.custom-filter-view-modern .filterDropdown .archive-dropdown-toggle-label,.custom-filter-container.custom-filter-view-modern .sortDropdown .archive-dropdown-toggle-label{width:100%}.custom-filter-container.custom-filter-view-modern .filterDropdown .archive-dropdown-toggle-label .archive-dropdown-toggle-title,.custom-filter-container.custom-filter-view-modern .sortDropdown .archive-dropdown-toggle-label .archive-dropdown-toggle-title{width:93%}}",St("@media only screen and (max-width:"+this.target.settings.mobilePanel.forceOnWidth+")"+mob_stls_tpl.replace(/-uid-Z/g,"-uid-"+ht.target.index).replace(/-CFC/g,"custom-filter-container").replace(/-CF/g,"custom-filter"),"cf-mobilePanel-"+ht.target.index,ht.container._node))),o&&(o.activateMarkerInfoOnItemHover&&this.container.delegate("hover",function(t){o.activateMarkerInfoOnItemHover&&(t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget),t.currentTarget._markerInst&&t.currentTarget._markerInst.openInfo&&t.currentTarget._markerInst.openInfo())},function(){ht.advancedMap&&ht.advancedMap._node&&ht.advancedMap._node._map&&o.desactivateMarkerOnItemMouseOut&&ht.advancedMap._node._closeInfo&&ht.advancedMap._node._closeInfo()},".custom-filter-grid-item"),o.activateMarkerInfoOnItemClick&&this.container.delegate("click",function(t){ht.advancedMap&&(t.halt(),t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget),t.currentTarget._markerInst&&t.currentTarget._markerInst.openInfo&&t.currentTarget._markerInst.openInfo())},".custom-filter-grid-item")),this.customFiltersWrapper.all(".quantity-input").each(function(t){var r=t.one("input"),o=(t.one(".quantity-up"),t.one(".quantity-down"),parseFloat(r.getAttribute("step"))),l=parseFloat(r.getAttribute("min")),c=parseFloat(r.getAttribute("max"));r.on("valuechange",function(t){var e=parseFloat(r.get("value"));c<e?(e=c,r.set("value",e)):e<l&&(e=l,r.set("value",e))}),t.delegate("click",function(t){t.preventDefault();var e,i,s,a,n=t.currentTarget.getAttribute("data-val");e=n,i=parseFloat(r.get("value")),s=0,a="up"==e?c<=i:i<=l,s="up"==e?a?i:i+o:a?i:i-o,r.set("value",s),r.simulate("change")},".quantity-button")}),this.customFiltersWrapper.all("input[auto-width]").each(function(t){var e=Y.Node.create('<div class="auto-width-buffer" style="position:absolute;opacity:1;visibility:hidden;top:-999px;left:-999px;white-space:nowrap;font-size:inherit"></div>');t.buffer=e,t.get("parentNode").append(e);function i(t){t.buffer._node.innerHTML=t.get("value"),t.setStyles({width:t.buffer._node.clientWidth+s})}var s=t.getAttribute("auto-width")?parseFloat(t.getAttribute("auto-width")):22;t.on("update",function(t){i(t.currentTarget)}),t.on("valuechange",function(t){i(t.currentTarget)}),t.on("change",function(t){i(t.currentTarget)}),i(t),t._node.setWidth=function(){i(t)}}),this.target.settings.keepDropdownsOpen&&this.container.delegate("click",function(t){t.halt();var e=t.currentTarget.ancestor(".archive-block");e&&e.toggleClass("closed-archive")},".icn-down-open"),this.all_filter_classes=l+" "+this.positionClasses;var ut=!1,pt=!1;this.target.settings.listCollection&&this.target.settings.listCollection.enabled&&this.target.settings.listCollection.container&&(ut=this.container._node&&this.container._node.f_matches(this.target.settings.listCollection.container)||this.itemsParent._node&&this.itemsParent._node.f_matches(this.target.settings.listCollection.container)||this.itemsParent.one(this.target.settings.listCollection.container),pt=this.target.settings.listCollection.itemLinkSelector);var mt,ft,vt,bt,wt,_t,Ct,yt,xt,kt,Ot=this.items.item(0)&&this.items.item(0).hasClass("post-type-store-item")||this.itemsParent&&(this.itemsParent.hasClass("ProductList-grid")||"productList"==this.itemsParent.getAttribute("id"))&&(-1<window.location.href.indexOf("category=")||-1<window.location.href.indexOf("/category/")||-1<window.location.href.indexOf("tag=")||-1<window.location.href.indexOf("/tag/")),Ft=ut||this.itemsParent&&this.itemsParent.hasClass("eventlist")||this.container.hasClass("ProductList")&&this.container.one(".ProductList-pagination-nextPageLink")||this.itemsParent&&this.itemsParent.hasClass("productlist-container")&&Y.one(".productpager-list")||this.itemsParent&&(Ot||this.itemsParent.hasClass("BlogList")||this.itemsParent.hasClass("sqs-blog-list")||this.itemsParent.hasClass("blog-list")||this.container.hasClass("blog-list")||this.container.hasClass("article-list")||this.itemsParent.hasClass("article-list")||this.itemsParent.hasClass("collection-content-wrapper")&&-1==this.itemsParent._node.className.indexOf("portfolio-"))||ht.items&&ht.items.size()&&ht.items.item(0).hasClass("blog-item");Ft&&(Y.one(".BlogList-pagination")&&Y.one(".BlogList-pagination").hide(),Y.one(".blog-list-pagination")&&Y.one(".blog-list-pagination").hide(),Y.one(".productpager-list")&&Y.one(".productpager-list").hide(),Y.one(".ProductList-pagination")&&Y.one(".ProductList-pagination").hide(),this.target.settings.listCollection.paginationSelector),this.target.settings.customIndexUrl?(this.requestComplete=!1,Lt(this.target.settings.customIndexUrl,ht.target.settings.useSessionCache).then(function(t){var e;t.collection?ht.coll_data=t:ht.coll_data.items=t,Ft?(-1<ht.collectionUrl.indexOf("/category/")&&(ht.collectionUrl=ht.collectionUrl.split("/category/")[0]),-1<ht.collectionUrl.indexOf("/tag/")&&(ht.collectionUrl=ht.collectionUrl.split("/tag/")[0]),e=function(t){if(ht.existedItems=ht.existedItems?ht.existedItems:ht.target.items&&ht.container.one(ht.target.items)?ht.container.all(ht.target.items):new Y.NodeList,t.html){var e=t.html;ht.target.settings.timelog&&console.time("LZS Decompress"),0==e.indexOf("LZString")&&(e=Pt.decompressFromEncodedURIComponent(e.replace("LZString",""))),ht.target.settings.timelog&&console.timeEnd("LZS Decompress");var i=Y.Node.create(e),s=!1,a=[],n=[];if(ht.existedItems.each(function(t){var e=t.getAttribute("id")||t.getAttribute("data-item-id")||t.getAttribute("data-slide-id"),i=pt&&t.one(pt)||t.one(".eventlist-title-link")||t.one(".BlogList-item-title")||t.one(".ProductList-item-link")||t.one('a[data-content-field="title"]')||t.one(".blog-title a");(i=i&&i.getAttribute("href"))&&n.push(i),e&&e.length&&-1==e.indexOf("yui_3_17_2")&&a.push(e)}),i&&i.one(ht.target.items)){if((s=i.one(ht.target.items)?i.all(ht.target.items).addClass("item-filter-loaded").addClass("is-loaded"):new Y.NodeList).size())if(a.length)for(var r=s._nodes.length-1;0<=r;r--){var o=(l=s._nodes[r]).id||l.getAttribute("data-item-id")||l.getAttribute("data-slide-id");o&&o.length&&-1==o.indexOf("yui_3_17_2")&&-1<a.indexOf(o)&&s._nodes.splice(r,1)}else if(n.length)for(r=s._nodes.length-1;0<=r;r--){var l=s._nodes[r],c=pt&&l.querySelector(pt)||l.querySelector(".eventlist-title-link")||l.querySelector(".BlogList-item-title")||l.querySelector(".ProductList-item-link")||l.querySelector('a[data-content-field="title"]')||l.querySelector(".blog-title a");(c=c&&c.getAttribute("href"))&&-1<n.indexOf(c)&&s._nodes.splice(r,1)}else console.log("No way to filter new items.");ht.requestComplete=!0,ht.addVirtualItems(s,ht.coll_data.items),s.size()&&ht.addItems(s)}}ht._start()},t.html?e(t):Nt(ht.collectionUrl,ht).then(function(t){e(t)})):ht._start()})):this.target.settings.requestAttrWithAjax?(this.requestComplete=!1,mt=this.collectionUrl.trim().replace(/ /g,"").split("|"),ft=window.location.pathname,mt.forEach(function(t,e){t==ft&&(mt.splice(e,1),mt.unshift(t))}),(vt=mt.length&&mt[1]&&mt[1].trim())&&(Ft=!0,ht.multipleCollectionsFetched=mt),Ft?(bt=function(t){if(ht.target.settings.hooks&&ht.target.settings.hooks.htmlListFetched&&"function"==typeof ht.target.settings.hooks.htmlListFetched&&ht.target.settings.hooks.htmlListFetched(ht,t),ht.target.settings.hooks&&ht.target.settings.hooks.htmlListJSONTransform&&"function"==typeof ht.target.settings.hooks.htmlListJSONTransform&&(t=ht.target.settings.hooks.htmlListJSONTransform(ht,t)||t),ht.coll_data||(ht.coll_data={collection:{},items:[]}),(!t.items||t.items&&0==t.items.length)&&(t.upcoming.length||t.past.length)&&(t.items=t.upcoming.concat(t.past)),t&&t.items&&t.items.length&&(!ht.coll_data||!ht.coll_data.items||t.items.length>=ht.coll_data.items.length||Ot)){if(ht.coll_data=t,ht.existedItems=ht.existedItems?ht.existedItems:ht.target.items&&ht.container.one(ht.target.items)?ht.container.all(ht.target.items):new Y.NodeList,t.html){var e=t.html;ht.target.settings.timelog&&console.time("LZS Decompress"),0==e.indexOf("LZString")&&(e=Pt.decompressFromEncodedURIComponent(e.replace("LZString",""))),ht.target.settings.timelog&&console.timeEnd("LZS Decompress");var i=Y.Node.create(e),s=!1,a=[],n=[];if(ht.existedItems.each(function(t){var e=t.getAttribute("id")&&-1==t.getAttribute("id").indexOf("yui_3_17")&&t.getAttribute("id")||t.getAttribute("data-item-id")||t.getAttribute("data-slide-id")||t.getAttribute("data-set-id"),i=pt&&t.one(pt)||t.one(".eventlist-title-link")||t.one(".BlogList-item-title")||t.one(".productlist-item-link")||t.one(".ProductList-item-link")||t.one('a[data-content-field="title"]')||t.one(".blog-title a");(i=i&&i.getAttribute("href"))&&n.push(i),e&&-1==e.indexOf("yui_3_17")&&a.push(e)}),i&&i.one(ht.target.items)){if(s=i.one(ht.target.items)?i.all(ht.target.items).addClass("item-filter-loaded").addClass("is-loaded"):new Y.NodeList,ht.target.settings.hooks&&ht.target.settings.hooks.htmlListTransform&&"function"==typeof ht.target.settings.hooks.htmlListTransform&&ht.target.settings.hooks.htmlListTransform(ht,i,s,t),s.size())if(a.length)for(var r=s._nodes.length-1;0<=r;r--){var o=(l=s._nodes[r]).id&&-1==l.id.indexOf("yui_3_17")&&l.id||l.getAttribute("data-item-id")||l.getAttribute("data-slide-id")||l.getAttribute("data-set-id");o&&-1==o.indexOf("yui_3_17")&&-1<a.indexOf(o)&&s._nodes.splice(r,1)}else if(n.length)for(r=s._nodes.length-1;0<=r;r--){var l=s._nodes[r],c=pt&&l.querySelector(pt)||l.querySelector(".eventlist-title-link")||l.querySelector(".BlogList-item-title")||l.querySelector(".productlist-item-link")||l.querySelector(".ProductList-item-link")||l.querySelector('a[data-content-field="title"]')||l.querySelector(".blog-title a");(c=c&&c.getAttribute("href"))&&-1<n.indexOf(c)&&s._nodes.splice(r,1)}else console.log("No Way to filter new items");ht.requestComplete=!0,ht.addVirtualItems(s,t.items),s.size()&&ht.addItems(s)}}}else ht.coll_data=t;ht._start()},wt=ht.target&&ht.target.settings.useSQSProxy,vt?(_t=[],Ct=function(){mt.forEach(function(t){_t.push(qt(t,!1,ht))}),Y.Promise.all(_t).then(function(t){var e={collection:{},html:"",items:[],past:[],upcoming:[]};t.forEach(function(t){ht.target.settings.hooks&&ht.target.settings.hooks.htmlListJSONCollectionTransform&&"function"==typeof ht.target.settings.hooks.htmlListJSONCollectionTransform&&(t=ht.target.settings.hooks.htmlListJSONCollectionTransform(ht,t)||t),e.html+=t.html,e.items=e.items.concat(t.items),e.upcoming.concat(t.upcoming),e.past.concat(t.past)}),wt&&wt.enabled&&Et(mt+"",Yt({},e),"page-context",ht.target.settings.useSQSProxy,!1),bt(e)})},wt&&wt.enabled?(yt="page-context",xt=Mt(H=window.location.hostname.replace(/\./g,"-")+"_"+yt+"_"+(mt+"").replace(/\,/g,"-").replace(/\//g,"")),Dt((mt+"").toLowerCase(),yt,xt,wt).then(function(t){!(t.items&&t.items.length)||!xt||!xt.saved||xt&&xt.minutes&&xt.minutes!=wt.cacheTime||!wt.cacheTime?Ct():bt(t)}).catch(function(t){console.log(t),Ct()})):Ct()):(-1<this.collectionUrl.indexOf("/category/")&&(this.collectionUrl=this.collectionUrl.split("/category/")[0]),-1<this.collectionUrl.indexOf("/tag/")&&(this.collectionUrl=this.collectionUrl.split("/tag/")[0]),qt(this.collectionUrl,this.target.settings.customIndexUrl,this).then(function(t){bt(t)}))):(kt=this.collectionUrl,this.config&&this.config.enableLazy?this.container&&this.container._node&&this.container._node.LazySummariesData&&this.container._node.LazySummariesData.existedItems&&this.container._node.LazySummariesData.__current&&this.addVirtualItems(this.container._node.LazySummariesData.existedItems,this.container._node.LazySummariesData.__current):o&&o.advancedMapContainer&&Y.one(o.advancedMapContainer)&&window.___customInitMapBlocks?this.requestComplete=!0:Wt(kt,this).then(function(t){ht.coll_data=t,ht._start()}))):this.requestComplete=!0,this.container.fire("custom-filter-init",this.container),this.container.fire&&this.container.fire("custom-filter:filter-init",{customFilter:ht}),Y.fire("custom-filter:filter-init",{customFilter:ht}),ht.target.settings.hooks&&ht.target.settings.hooks.afterInit&&"function"==typeof ht.target.settings.hooks.afterInit&&ht.target.settings.hooks.afterInit(ht)}},_checkExternalLinks:function(){var t,e=this;this.target.settings.externalFilterLinks&&this.target.settings.externalFilterLinks.enabled&&this.target.settings.externalFilterLinks.items&&((t=this.target.settings.externalFilterLinks.container&&Y.one(this.target.settings.externalFilterLinks.container)?Y.one(this.target.settings.externalFilterLinks.container):Y.one("body")).addClass("external-cf-filter-links-container"),this.target.settings.externalFilterLinks.hideFilters?this.container.addClass("cf-hide-filter-panel"):this.container.removeClass("cf-hide-filter-panel"),this.externalClicksListener&&(this.externalClicksListener.detach(),this.externalClicksListener=null),this.externalFilterLinks=t.all(this.target.settings.externalFilterLinks.items),this.externalFilterLinks.size()&&this.externalFilterLinks.each(function(t){var e=t.get("search");if(e){e=e.substring(1);var i=[],s=JSON.parse('{"'+e.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(t,e){return""===t?e:decodeURIComponent(e.replace(/\+/g," "))});for(var a in s)s[a]&&i.push(decodeURIComponent(s[a]))}t.setAttribute("data-slug-filter",Tt(i+"")),t.addClass("external-cf-filter-link")}),this.externalClicksListener=t.delegate("click",function(t){t.preventDefault(),t.stopImmediatePropagation(),e._extLinksClick(t.currentTarget)},this.target.settings.externalFilterLinks.items))},_updateFilterData:function(t){},_start:function(){var t=this;t.target.settings.hooks&&t.target.settings.hooks.onStart&&"function"==typeof t.target.settings.hooks.onStart&&t.target.settings.hooks.onStart(t),t.requestComplete=!0,t._addItemsAttributes(),t._buildDropdowns(),t._checkInitState(this.target.settings.waitForAjax),t._sortGrid(),t.container.addClass("cf-request-finished"),t.target.settings.hooks&&t.target.settings.hooks.afterRequest&&"function"==typeof t.target.settings.hooks.afterRequest&&t.target.settings.hooks.afterRequest(t)},_extLinksClick:function(t){var a=this,e=t.get("search")||t.getAttribute("data-filter-val"),i=e&&0===e.indexOf("?")&&-1<e.indexOf("="),s=[];if(e&&i){e=e.substring(1);var n=JSON.parse('{"'+e.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(t,e){return""===t?e:decodeURIComponent(e.replace(/\+/g," "))});for(var r in n)n[r]&&s.push(decodeURIComponent(n[r])+"|"+r)}a.target.settings.hooks&&a.target.settings.hooks.onExternalLinkClicked&&"function"==typeof a.target.settings.hooks.onExternalLinkClicked&&a.target.settings.hooks.onExternalLinkClicked(a,t),s.length&&s.forEach(function(t){var e,i=(t=t.split("|"))[1]?'[data-filter="'+t[1]+'"]':"[data-filter]",s=!!t[0]&&'[data-filter-val="'+Tt(t[0])+'"]';s&&((e=a.customFiltersWrapper.all(".archive-group-name-link"+i+s)).size()?(a.pagination_num=1,e.each(function(t){t.simulate("click")})):console.log("Not found "+s))})},_initDescriptionContainer:function(){this.optionsDescriptionContainer&&(this.optionsDescriptionContainer.addClass("cf-descr-activated"),this.optionsDescriptionContainer.all("h3").each(function(t){var e=Tt(t._node.innerText),i=function(t,e,i){var s=[];for(t=t.nextElementSibling;t&&!t.f_matches(e);)t=((!i||t.f_matches(i))&&s.push(t),t.nextElementSibling);return s}(t._node,"h3"),s=Y.Node.create('<div class="cf-option-descr '+e+'"></div>');s&&i.length&&(s.prepend(i),t.insert(s,"after"))}),this.optionsDescriptionContainer.addClass("cf-descr-initialized").removeClass("hidden"))},_showOptionsDescriptions:function(){for(var t in this.optionsDescriptionContainer.all(".cf-option-descr").removeClass("active"),this.currentFilterValues){var e;this.currentFilterValues.hasOwnProperty(t)&&0!==t.indexOf("__")&&this.currentFilterValues[t].sel&&((e=this.optionsDescriptionContainer.one(this.currentFilterValues[t].sel))&&e.addClass("active"))}},_initFilterPosition:function(){var t=this.target.settings.position||"top",e=this.target.settings.align||"center";this.positionClasses="custom-filter-position-"+t+" custom-filter-align-"+e,this.container.addClass("custom-filter-position-"+t).addClass("custom-filter-align-"+e).addClass("clear clearfix")},_buildFilterSelectors:function(){var i=this;i.needRunFilterFunctions=!1,i.filter_selectors="";var t,s,e,a,n=[],r={};for(var o in i.filterParams){i.filterParams.hasOwnProperty(o)&&i.filterParams[o]&&i.filterParams[o].length&&(s="",i.filterParams[o].forEach(function(t,e){s=t.multipleLogic&&"or"===t.multipleLogic?(s&&0<e?s+",":s)+t.selectors:s+t.selectors,t.filterFunction&&"function"==typeof t.filterFunction&&(s="*-*",i.needRunFilterFunctions=!0),n.push(t)}),r[o]={selectors:s,logic:i.filterParams[o][0].logic})}if(this.container._node&&this.container._node.__childFilters&&this.container._node.__childFilters.length)for(var l=this.container._node.__childFilters,c=l.length-1;0<=c;c--)i._checkChildFilterForOptions(l[c]);for(var o in r){r.hasOwnProperty(o)&&r[o]&&r[o].logic&&(t=r[o],s=t.selectors,e=!(!i.filter_selectors||!i.filter_selectors.length)&&i.filter_selectors.split(","),a=[],e?"and"===t.logic?(e.forEach(function(e){e&&s.split(",").forEach(function(t){t&&"*-*"!==t?a.push(e+t):"*-*"==t&&a.push(e)})}),i.filter_selectors=a.join()):i.filter_selectors+=s:i.filter_selectors=s)}return Y.fire&&Y.fire("custom-filter:currentFilters",{customFilter:i,currentFilters:n}),i.filter_selectors&&i.filter_selectors.length&&","===i.filter_selectors[i.filter_selectors.length-1]&&(i.filter_selectors=i.filter_selectors.substring(0,i.filter_selectors.length-1)),i.filter_selectors},_sortNodes:function(t){var s=this,a=!1,n=!1,r=!1,o=s.sortObj[s.sort_param]||s.sortObj.index;if(!o)return t;"function"!=typeof o&&(a=-1<o.indexOf("parseInt"),n=-1<o.indexOf("parseFloat"),r=-1<o.indexOf("]")),a&&(o=o.split("parseInt")[0]),n&&(o=o.split("parseFloat")[0]);var l=-1<s.sort_param.indexOf("desc"),c=[];-1<s.sort_param.indexOf("price_")&&!a&&!n&&(a=!0);var e=t._nodes.slice(0);t._nodes.sort(function(t,e){var i="";return s.sort_param in s.sortObj&&("function"==typeof o?i=(t=s.sortObj[s.sort_param](t,t.itemData,s.sort_param))<(e=s.sortObj[s.sort_param](e,e.itemData,s.sort_param))?-1:e<t?1:0:o&&(o=o.replace(/ /g,"").replace(/\[/g,"").replace(/\]/g,""),(!r&&t.querySelector(o)&&e.querySelector(o)||r&&t.getAttribute(o)&&e.getAttribute(o))&&(r&&e.getAttribute(o)&&t.getAttribute(o)?(t=t.getAttribute(o).toLowerCase().replace(/ /g,""),e=e.getAttribute(o).toLowerCase().replace(/ /g,"")):e.querySelector(o)&&t.querySelector(o)&&(t=t.querySelector(o).textContent.toLowerCase().replace(/\r?\n|\r/g,"").replace(/ /g,""),e=e.querySelector(o).textContent.toLowerCase().replace(/\r?\n|\r/g,"").replace(/ /g,"")),i=a?(t=parseInt(t))-(e=parseInt(e)):n?(t=parseFloat(t))-(e=parseFloat(e)):t<e?-1:e<t?1:0))),0===i&&t&&(t._node||t.nodeName)&&(i=l?parseInt(e.getAttribute("data-index"))-parseInt(t.getAttribute("data-index")):parseInt(t.getAttribute("data-index"))-parseInt(e.getAttribute("data-index"))),0===i&&c.push(i),i});return c.length===t._nodes.length-1?t._nodes=e:l&&t._nodes.reverse(),t},_updateFilterOptions:function(t){var o=this;this.target.settings.updateFilterOptions&&(this.target.settings.updateFilterOptions.enabled||this.target.settings.updateFilterOptions.showOptionsCounters)&&this.filtersDropdowns&&this.filtersDropdowns.size()&&this.filtersDropdowns.each(function(t){var e=t.all(".archive-group-name-link"),r=t.getAttribute("data-ignore-non-exist-options");e.each(function(t){var e=t.getAttribute("data-filter")+"-"+t.getAttribute("data-filter-val");if(o.filterSelectors[e]){var i=o.filterSelectors[e];if(i){var s,a,n=i.length;if(n?t.removeClass("not-in-filter-view"):t.addClass("not-in-filter-view"),t.getAttribute("data-items-count")&&!n&&r)return;t.hasAttribute("data-items-count")&&t.getAttribute("data-items-count")==n||(a=(s=o.target.settings.updateFilterOptions.optionsCounterWrap)?s.slice(0,-1)+n+s.slice(-1):n,t.setAttribute("data-items-count",a),t.setAttribute("data-count",n))}}})})},_checkChildOptionsToHide:function(i,s,t,a,e){var n,r;t.hasClass("filter-hidden")||(n=this,r=t.getAttribute("data-filter").trim(),t.all(".archive-group-name-link[data-filter]").each(function(t){var e=t.getAttribute("data-filter-val").trim();n.itemsParent.one(s+"."+r+"-"+e)?(t.get("parentNode").show().removeClass("hidden-by-parent"),a&&t.get("parentNode").addClass("showed-by-parent"),i.checkedChildren[r].push(e)):(a&&t.get("parentNode").hasClass("showed-by-parent")||t.get("parentNode").hide().addClass("hidden-by-parent"),i.checkedChildren[r]&&-1<i.checkedChildren[r].indexOf(e)&&i.checkedChildren[r].splice(i.checkedChildren[r].indexOf(e),1))}))},_addMarkersInstancesToItems:function(){var i=this,t=this.target.settings.advancedMap;if(t&&t.advancedMapContainer&&(this.advancedMap=Y.one(t.advancedMapContainer+" .custom-map-block"),this.advancedMap&&this.advancedMap._node&&this.advancedMap._node._markersObj&&(this.container.addClass("cf-map-found"),t.activateItemOnMarkerClick&&(i.advancedMap._node._activatingFilterItems=!0),this.items.each(function(t){var e=!(!t._node._item_data||!t._node._item_data.id)&&t._node._item_data.id;e&&i.advancedMap._node._markersObj&&i.advancedMap._node._markersObj["marker-"+e]&&(i.advancedMap._node._markersObj["marker-"+e].outsideItem=t,i.advancedMap._node._markersObj["marker-"+e].outsideItemFromFilter=!0,t._markerInst=i.advancedMap._node._markersObj["marker-"+e],t._node._markerInst=i.advancedMap._node._markersObj["marker-"+e])}),t.activateMarkerInfoOnItemClick&&Y.SQS.Gallery.Manager&&!this.container.one(".custom-filter-grid").hasClass("outside-container"))))try{Y.SQS.Gallery.Manager.unlightboxify(this.items)}catch(t){console.log(t)}},_filterAdvancedMapMarkers:function(){var t=this,e=null,i=30,s=this.target.settings.advancedMap;window.google&&window.google.maps&&(s.updateMapBound||s.followMapBounds&&t.needBoundsChange)&&(e=new google.maps.LatLngBounds);function a(t){t.hasClass("element-showed")&&t._markerInst?(t._markerInst.getVisible()||t._markerInst.setVisible(!0),e&&(e.extend(t._markerInst.getPosition()),o=!0),l.push(t._markerInst)):(t.hasClass("element-hidden")||-1<t._node.style.display.indexOf("none")||0==t.width()||0==t.height())&&t._markerInst&&t._markerInst.getVisible()&&t._markerInst.setVisible(!1)}var n,r,o=!1,l=[];if(this.advancedMap&&this.advancedMap._node&&this.advancedMap._node._markersObj)for(var c in t.advancedMap._node._markersObj){t.advancedMap._node._markersObj.hasOwnProperty(c)&&((r=(n=t.advancedMap._node._markersObj[c]).outsideItem)?a(r):t.filter_selectors?n.setVisible(!1):n.setVisible(!0))}else this.items.each(function(t,e){t._markerInst&&a(t)});this.advancedMap&&this.advancedMap._node&&this.advancedMap._node._markerCluster&&(this.advancedMap._node._markerCluster.clearMarkers(),this.advancedMap._node._markerCluster.addMarkers(l)),e&&o&&this.advancedMap&&this.advancedMap._node&&(this.advancedMap._node.__map||this.advancedMap._node.radiusCircle)&&(this.advancedMap._node.radiusCircle&&(e=this.advancedMap._node.radiusCircle.getBounds(),i=2),this.advancedMap._node._mapBound=e,t.needBoundsChange=!0,t.advancedMap._node.__map.fitBounds(e,i),t.advancedMap._node.__map.panToBounds(e))},_sortGrid:function(t){var e,i,s,a,n,r,o,p=this;if(p.target.settings.timelog&&console.time("Sort Grid PROCESS"),p.target.settings.timelog&&console.time("Sort Grid:beforeFilter"),p.currentFilterValues={},p.container.addClass("cf-sorting-grid-running"),p.target.settings.hooks&&p.target.settings.hooks.beforeFilter&&"function"==typeof p.target.settings.hooks.beforeFilter&&p.target.settings.hooks.beforeFilter(p),(p.itemsParent&&p.itemsParent.hasClass("sqs-gallery")||p.itemsParent&&p.itemsParent.getData("gallery"))&&(p.gallery=p.itemsParent.getData("gallery"),p.autocolumns_there&&p.gallery&&!p.container.hasClass("performance-mode-used")&&p.gallery.refresh()),this.advancedMap&&this.items.size()&&!this.items.item(this.items.size()-1)._markerInst&&this._addItemsAttributes(),p.target.settings.timelog&&console.time("Sort Grid:runFilter dropdowns"),this.filtersDropdowns&&this.filtersDropdowns.size()&&this.filtersDropdowns.each(function(t){var r=!!t.getAttribute("data-strict")&&"true"===t.getAttribute("data-strict"),o=!!t.getAttribute("data-multiple")&&"true"===t.getAttribute("data-multiple"),l=t.getAttribute("data-multiple-logic")||"or",c=t.getAttribute("data-logic")||"or",d=t.getAttribute("data-filter").trim();p.filterParams[d]=[];var e=t.one(".archive-dropdown-toggle-title")||t.one(".filter-block-label"),i=t.one(".archive-dropdown-toggle-title .filterValues"),s=t.one(".outsideFilterValues"),a=(!t.getAttribute("data-children")||t.getAttribute("data-children").split(","),!t.getAttribute("data-check-children")||t.getAttribute("data-check-children"),!!t.getAttribute("data-defined")&&"true"===t.getAttribute("data-defined"));a&&!t.one(".active")&&t.one('[data-filter-val="all"]')?t.one('.archive-group-name-link[data-filter-val="all"]')&&t.one('.archive-group-name-link[data-filter-val="all"]').addClass("active"):a&&!t.one(".active")&&t.one(".archive-group-name-link")&&t.one(".archive-group-name-link").addClass("active");var g,u;t.all(".archive-group-name-link[data-filter]");t.hasClass("filter-type-range-slider")?t.hasClass("filter-type-range-slider"):t.one(".archive-group-name-link.active")?(g="",t.hasClass("filter-hidden")||((u=t.all(".archive-group:not(.hidden-by-parent) .archive-group-name-link.active")).each(function(t,e){g+='<span class="filter-value">'+t.get("innerHTML")+"</span>",1<u.size()&&e<u.size()-1&&(g+='<span class="divider">, </span>');var i=t.getAttribute("data-filter-val").trim(),s=t.getAttribute("data-parent-cat"),a={};a.value=i,a.attr=p.getFilterAttrObj?p.getFilterAttrObj[d].attr:"",a.filterFunction=!!p.getFilterAttrObj&&p.getFilterAttrObj[d].filterFunction,a.textValue=(t.get("textContent")||t.get("innerText")).replace(/\r?\n|\r/g,"").trim(),a.param=d,a.multiple=o,a.multipleLogic=s?"and":l,a.logic=c,a.nested=s;var n=r?"."+d+"-"+i:'[class*="'+d+"-"+i+'"]';a.sel=n,a.selectors=n,p.filterParams[d].push(a),p.currentFilterValues[d]=a,p.currentFilterValues["__"+d+"-values"]||(p.currentFilterValues["__"+d+"-values"]=[]),p.currentFilterValues["__"+d+"-values"].push(a.textValue)}),i&&i.set("innerHTML",g),s&&s.set("innerHTML",g),e.addClass("dirty"),t.addClass("dirty"))):(i&&i.set("innerHTML",""),s&&s.set("innerHTML",""),e&&e.removeClass("dirty"),t.removeClass("dirty"))}),p.target.settings.timelog&&p.target.settings.timelog&&console.timeEnd("Sort Grid:runFilter dropdowns"),p.target.settings.timelog&&console.time("Sort Grid:runSorters"),this.sortContainer&&(e=this.sortContainer.one(".archive-dropdown-toggle-title"),i=this.sortContainer.one(".archive-dropdown-toggle-title .sortValues"),s=this.sortContainer.getAttribute("data-defined"),!this.sortContainer.one(".active")&&s&&this.sortContainer.one('[data-sort="'+s+'"]')&&this.sortContainer.one('[data-sort="'+s+'"]').addClass("active"),(a=this.sortContainer.one(".active"))?(i&&i.set("innerHTML",p.sortContainer.one(".active").get("innerHTML")),e&&e.addClass("dirty")&&this.sortContainer.addClass("dirty"),p.sort_param=a.getAttribute("data-sort")||"",$&&console.log(a.getAttribute("data-sort"))):(i&&i.set("innerHTML",""),e&&e.removeClass("dirty")&&this.sortContainer.removeClass("dirty"),p.sort_param="index")),p.target.settings.timelog&&p.target.settings.timelog&&console.timeEnd("Sort Grid:runSorters"),p.target.settings.hooks&&p.target.settings.hooks.beforeSort&&"function"==typeof p.target.settings.hooks.beforeSort&&p.target.settings.hooks.beforeSort(p),p.target.settings.timelog&&p.target.settings.timelog&&console.timeEnd("Sort Grid:beforeFilter"),this.target.settings.waitForAjax&&!this.requestComplete)return console.log("Filter is waiting for requestComplete"),p.isotope&&p.isotope.layout(),void(p.target.settings.timelog&&p.target.settings.timelog&&console.timeEnd("Sort Grid PROCESS"));if(p.first_sort_run=!0,this.customFiltersWrapper.one(".filterDropdown.dirty")?(this.customFiltersWrapper.addClass("dropdowns-dirty"),this.container.addClass("filter-dropdowns-dirty"),this.placedContainer&&this.placedContainer.addClass("filter-dropdowns-dirty")):(this.customFiltersWrapper.removeClass("dropdowns-dirty"),this.container.removeClass("filter-dropdowns-dirty"),this.placedContainer&&this.placedContainer.removeClass("filter-dropdowns-dirty")),this.customFiltersWrapper.one(".sortDropdown.dirty")?(this.customFiltersWrapper.addClass("dropdowns-dirty"),this.container.addClass("filter-sort-dirty"),this.placedContainer&&this.placedContainer.addClass("filter-sort-dirty")):(this.container.hasClass("filter-dropdowns-dirty")||this.customFiltersWrapper.removeClass("dropdowns-dirty"),this.container.removeClass("filter-sort-dirty"),this.placedContainer&&this.placedContainer.removeClass("filter-sort-dirty")),this.searchRegex?(this.customFiltersWrapper.addClass("search-dirty"),this.container.addClass("filter-search-dirty"),this.placedContainer&&this.placedContainer.addClass("filter-search-dirty")):(this.customFiltersWrapper.removeClass("search-dirty"),this.container.removeClass("filter-search-dirty"),this.placedContainer&&this.placedContainer.removeClass("filter-search-dirty")),this.parentFilter||this._buildFilterSelectors(),this.container.setAttribute("data-filter-selectors",this.filter_selectors).setAttribute("data-filter-sorters",this.sort_param),p.filter_selectors||p.searchRegex||!p.target.settings.noResultOnStart?this.container.removeClass("no-result-items-on-start"):(p.filter_selectors=".no-result-items-on-start",this.container.setAttribute("data-filter-selectors",".no-result-items-on-start").addClass("no-result-items-on-start")),this.placedContainer&&this.placedContainer.setAttribute("data-filter-selectors",this.filter_selectors).setAttribute("data-filter-sorters",this.sort_param),this.itemsParent,this.searchContainer&&this.searchContainer.removeClass("searching"),this.target.settings.mobilePanel&&this.target.settings.mobilePanel.enabled&&this.target.settings.mobilePanel.closeOnSelect&&(this.container.removeClass("mobile-panel-open"),p.placedContainer&&p.placedContainer.removeClass("mobile-panel-open"),Y.one("body").removeClass("filter-scroll-lock").setStyles({marginRight:"auto",overflow:"auto"})),p.virtual_list&&p.virtual_list.size()&&(p.items&&p.items.size()!==p.virtual_list.size()?p.virtual_active=!0:p.virtual_active=!1),p.target.settings.timelog&&console.time("Sort Grid:Items Run"),p.filterSelectors)for(var l in p.filterSelectors)p.filterSelectors[l]=[];(!p.sqs_query_factor||!p.sqs_query_not_found||p.filter_selectors||p.sort_param&&"index"!=p.sort_param||p.searchRegex)&&(p.filter_selectors&&(p.sqs_query_not_found=!1),p.items&&p.items.size()?(p.target.settings.timelog&&console.time("Sort Grid:Items Run EACH"),n=p.items.item(0)&&p.items.item(0).hasClass("summary-item"),p.filtered=new Y.NodeList,p.hidden=new Y.NodeList,r=p.target.settings.search.customSearchFunc,o=!!p.filter_selectors&&p.filter_selectors.trim().replace(/\*-\*/g,"").replace(/ /g,","),p.items.each(function(e){n&&e.addClass("positioned"),p.filterSelectors&&p.target.settings.updateFilterOptions&&!p.target.settings.updateFilterOptions.enabled&&p.target.settings.updateFilterOptions.showOptionsCounters&&(e._node.classList&&e._node.classList.forEach?e._node.classList.forEach(function(t){p.filterSelectors[t]&&p.filterSelectors[t].push(1)}):e._node.className.split(" ").forEach(function(t){p.filterSelectors[t]&&p.filterSelectors[t].push(1)}));var t=p.searchRegex&&!r?p.searchFunction(e).match(p.searchRegex):!p.searchRegex||!r||"function"!=typeof r||r(!1,e),i=!o||e._node.f_matches(o);if(p.needRunFilterFunctions&&i)for(var s in p.currentFilterValues)p.currentFilterValues.hasOwnProperty(s)&&p.currentFilterValues[s].filterFunction&&(i=p.currentFilterValues[s].filterFunction(e,p.currentFilterValues["__"+s+"-values"],i));p.target.settings.advancedMap&&p.advancedMap&&p.target.settings.advancedMap.followMapBounds&&t&&i&&p.firstMapBoundRun&&(i="true"==e.getAttribute("data-in-bounds"));var a=[];p.rangesSliders&&i&&p.rangesSliders.forEach(function(t){a.push(t.filterFunction(e))}),-1<a.indexOf(!1)&&(i=!1),t&&i?(e.hasClass("element-hidden")&&e.removeClass("element-hidden"),e.addClass("element-showed").removeClass("marker-activated"),!e.hasClass("blog-item")&&!e.hasClass("post-type-store-item")||e.hasClass("is-loaded")||e.addClass("is-loaded"),p.filtered.push(e),p.filterSelectors&&p.target.settings.updateFilterOptions&&p.target.settings.updateFilterOptions.enabled&&(e._node.classList&&e._node.classList.forEach?e._node.classList.forEach(function(t){p.filterSelectors[t]&&p.filterSelectors[t].push(1)}):e._node.className.split(" ").forEach(function(t){p.filterSelectors[t]&&p.filterSelectors[t].push(1)}))):(e.hasClass("element-hidden")||e.addClass("element-hidden"),e.removeClass("element-showed").removeClass("marker-activated"),p.hidden.push(e))}),p.target.settings.timelog&&p.target.settings.timelog&&console.timeEnd("Sort Grid:Items Run EACH"),p.target.settings.timelog&&console.time("Sort Grid:Sort Nodes"),p.sort_param&&(p.filtered=p._sortNodes(p.filtered)),p.target.settings.timelog&&p.target.settings.timelog&&console.timeEnd("Sort Grid:Sort Nodes"),p.filtered.size()||p.pagination&&(p.pagination.remove(),p.pagination=null,p.pagination_num=1),p._updateFilterOptions(p.filtered),p.target.settings.timelog&&console.time("Sort Grid:Build Pagination"),p.isotope||p.mixitup||(p.container._node.__childFilters&&p.container._node.__childFilters.length||!p.itemsCount||p.itemsCount.one(".items-count").set("textContent",p.filtered.size()),p.filtered=p._buildPagination(p.filtered)),p.target.settings.timelog&&p.target.settings.timelog&&console.timeEnd("Sort Grid:Build Pagination")):p.pagination&&(p.pagination.remove(),p.pagination=null,p.pagination_num=1),this.target.settings.useHistory&&!this.blockPushState&&this._pushHistoryState(!0),p.target.settings.timelog&&p.target.settings.timelog&&console.timeEnd("Sort Grid:Items Run"),p.filtered&&p.filtered.size()?(this.customFiltersWrapper.addClass("has-results").removeClass("no-results"),this.container.addClass("filter-has-results").removeClass("filter-has-no-results"),this.placedContainer&&this.placedContainer.addClass("filter-has-results").removeClass("filter-has-no-results")):(this.customFiltersWrapper.removeClass("has-results").addClass("no-results"),this.container.removeClass("filter-has-results").addClass("filter-has-no-results"),this.placedContainer&&this.placedContainer.removeClass("filter-has-results").addClass("filter-has-no-results")),this.requestComplete&&(this.blockPushState=!1),this.target.settings.noResultMessage&&this.noResultWrapper,this.container.fire&&this.container.fire("custom-filter:sort-grid",{customFilter:p}),Y.fire("custom-filter:sort-grid",{customFilter:p}),this._sortChildFilters(),this.optionsDescriptionContainer&&this._showOptionsDescriptions(),this.externalFilterLinks&&this.externalFilterLinks.size()&&(this.externalFilterLinks.removeClass("filter-activated"),p.customFiltersWrapper.all(".archive-group-name-link.active").each(function(t){var e=t.getAttribute("data-filter-val");p.externalFilterLinks.each(function(t){-1<t.getAttribute("data-slug-filter").indexOf(e)&&(t.addClass("filter-activated"),p.target.settings.hooks&&p.target.settings.hooks.onExternalLinkActivate&&"function"==typeof p.target.settings.hooks.onExternalLinkActivate&&p.target.settings.hooks.onExternalLinkActivate(p,t))})})),p.target.settings.hooks&&p.target.settings.hooks.onFilter&&"function"==typeof p.target.settings.hooks.onFilter&&p.target.settings.hooks.onFilter(p),this.container.one(".active-marker-info")&&this.container.one(".active-marker-info").removeClass("active-marker-info"),p.filter_selectors,p.target.settings.timelog&&console.time("Sort Grid: RUN FILTERING"),p.isotope?(p.container.removeClass("cf-sorting-grid-running"),p.filterAnim?p.isotope.options.transitionDuration=p.isotope.options.origTransitionDuration:p.isotope.options.transitionDuration=0,p.isotope.arrange({sortBy:p.sort_param})):p.mixitup?(p.container.removeClass("cf-sorting-grid-running"),p.mixitup.multimix({filter:p.filter_selectors,sort:p.sort_param.replace("_",":")})):p._simpleFilter(t),p.target.settings.timelog&&p.target.settings.timelog&&console.timeEnd("Sort Grid: RUN FILTERING"),p.target.settings.timelog&&p.target.settings.timelog&&console.timeEnd("Sort Grid PROCESS"))},_pushHistoryState:function(t){var e,i=this,n="";for(var s in i.currentFilterValues){i.currentFilterValues.hasOwnProperty(s)&&-1<s.indexOf("-values")&&i.currentFilterValues[s]&&i.currentFilterValues[s].length&&(e=s.split("-values")[0].replace("__","")+"="+i.currentFilterValues[s],n=n?n+"&"+e:"?"+e)}if(i.rangesSliders&&i.rangesSliders.length&&i.rangesSliders[0].noUiSlider&&i.rangesSliders.forEach(function(t){var e,i,s,a=t.filterValue;a&&(e=t.noUiSlider.get(),i=t.noUiSlider.options.range.min,s=t.noUiSlider.options.range.max,(t.noUiSlider.options.format.from(e[0])>i||t.noUiSlider.options.format.from(e[1])<s)&&(n=n?n+"&"+a+"="+e:"?"+a+"="+e))}),i.pagination_num&&1<i.pagination_num&&(n=n?n+"&page_n="+i.pagination_num:"?page_n="+i.pagination_num),window.history&&decodeURIComponent(window.location.search)!==n){if(!i.first_sort_run&&window.location.search&&!n||!i.first_sort_run&&!n&&window.location.search&&(-1<window.location.search.indexOf("category=")||-1<window.location.search.indexOf("tag=")))return;window.history.pushState({url:window.location.pathname,search:n,docTitle:document.title,position:{x:window.scrollX,y:window.scrollY}},document.title,window.location.pathname+n)}},_simpleFilter:function(t){function e(){var t,e,i,s,a,n;o&&(r.filter_ids="",o&&(r.target.settings.simpleFilter.persistent||r.hidden&&r.hidden.size()&&r.hidden.remove(),r.itemsParent?r.target.settings.simpleFilter.persistent||r.itemsParent.insert(o,null):r.container.hasClass("collection-type-blog")?(t=r.container.one(".blog-list")||r.container.one(".sqs-blog-list")||r.container.one(".BlogList"))&&(r.target.settings.simpleFilter.persistent?t.insert(o,t.one(".element-hidden")):t.insert(o,null)):r.container.hasClass("ProductList")?r.container.one(".ProductList-grid")&&(r.target.settings.simpleFilter.persistent?r.container.one(".ProductList-grid").insert(o,r.container.one(".ProductList-grid").one(".element-hidden")):r.container.one(".ProductList-grid").insert(o,null)):r.container.insert(o,null)),e=o,r.filter_selectors||r.searchRegex||r.target.settings.noResultOnStart,r.gallery&&(i=r.gallery["gallery-design"])?(s=r.itemsParent.get("children"),i&&i.dimensions&&(i.dimensions=[]),i&&i.imageRegions&&(i.imageRegions=[]),s&&r.gallery.set("slides",s),i._getProperty("SLIDE_CLASS")&&s.addClass(i._getProperty("SLIDE_CLASS")),r.container.hasClass("isotope-filter-used")||r.container.hasClass("performance-mode-used")||!i||(a=new Y.NodeList,n=new Y.NodeList,s.each(function(t){var e=t.one(".sqs-video-wrapper")?"video":"image";if(e)switch(e){case"image":t.one("img")&&a.push(t.one("img"));break;case"video":n.push(t)}}),r.gallery._images=a,r.gallery._imagesByMedia={image:a},r.gallery._slidesByMedia={image:a,video:n},r.gallery.plugLoaders&&r.gallery.plugLoaders(),i._evaluateBricks&&i._evaluateBricks(),i._processImages&&i._processImages(),r.gallery.refresh()),r.container.hasClass("lazy-summary-enabled")||r.loadImages(s)):r.loadImages(e),r.advancedMap&&(r._addMarkersInstancesToItems(),r._filterAdvancedMapMarkers()),Y.fire("custom-filter:gallery-refresh",r),r.container.fire&&r.container.fire("custom-filter:gallery-refresh",{customFilter:r}),r.waitingForNewItems=!1,r.target.settings.hooks&&r.target.settings.hooks.afterFilter&&"function"==typeof r.target.settings.hooks.afterFilter&&r.target.settings.hooks.afterFilter(r),r.itemsParent&&(r.itemsParent.hasClass(".ProductList-grid")||r.itemsParent._node&&r.itemsParent._node.className&&(-1<r.itemsParent._node.className.indexOf("-list--ready")||-1<r.itemsParent._node.className.indexOf("blog-")||-1<r.itemsParent._node.className.indexOf("thumb-list")))&&d(),r.waitingForNewItems?$&&console.log("waiting..."):(r.target.settings.simpleFilter.anim&&o.each(function(t,e){var i=r.target.settings.simpleFilter.show.stagger*e;t.setStyles({transitionDelay:2200<i?"2200ms":i+"ms"})}),r.target.settings.simpleFilter.layoutAnim?r.itemsParent.removeClass("refreshing"):r.filterAnim&&r.target.settings.simpleFilter.anim?($&&console.log("anim"),setTimeout(function(){r.itemsParent.removeClass("refreshing"),r.itemsParent.removeClass("hiding"),r.itemsParent.addClass("pre-showing"),setTimeout(function(){r.itemsParent.addClass("showing"),l?setTimeout(function(){r.itemsParent.removeClass("showing"),r.itemsParent.removeClass("pre-showing"),r.container.removeClass("cf-sorting-grid-running"),r.itemsParent&&(r.itemsParent.hasClass(".ProductList-grid")||r.itemsParent._node&&r.itemsParent._node.className&&(-1<r.itemsParent._node.className.indexOf("-list--ready")||-1<r.itemsParent._node.className.indexOf("blog-")||-1<r.itemsParent._node.className.indexOf("thumb-list")))&&setTimeout(function(){d()},100)},l):(r.itemsParent.removeClass("showing"),r.itemsParent.removeClass("pre-showing"),r.container.removeClass("cf-sorting-grid-running"))},17)},17)):($&&console.log("no-anim"),r.itemsParent.removeClass("refreshing"),r.itemsParent.removeClass("hiding"),r.itemsParent.removeClass("showing"),r.itemsParent.removeClass("pre-showing"),r.container.removeClass("cf-sorting-grid-running"))))}var r=this,o=(this.container.hasClass("custom-filter-init-state"),!1),i=0,l=0;if(r.items&&r.items.size()){(o=r.filtered)&&0===o.size()?r.container.addClass("custom-filter-no-result"):r.container.removeClass("custom-filter-no-result");var s="";if(o&&o.size()&&(o.each(function(t){s+=t.get("_yuid")}),r.sorted_ids&&s===r.sorted_ids&&o._nodes[0].parentElement&&!t&&!r.itemsParent.one(".element-hidden")))return void r.container.removeClass("cf-sorting-grid-running");r.sorted_ids=s;var a=r.hidden.size()?r.hidden.size()*r.target.settings.simpleFilter.hide.stagger:20,n=r.filtered?r.filtered.size()*r.target.settings.simpleFilter.show.stagger:20;r.filterAnim&&r.target.settings.simpleFilter.anim&&(i=r.target.settings.simpleFilter.hide.transitionDuration?r.target.settings.simpleFilter.hide.transitionDuration+a:0,i=Math.min(1e3,Math.max(20,i)),l=r.target.settings.simpleFilter.show.transitionDuration?r.target.settings.simpleFilter.show.transitionDuration+n:0,l=Math.min(500,Math.max(20,l))),$&&console.log(i,l),r.target.settings.simpleFilter.anim&&r.itemsParent.all(".custom-filter-grid-item").each(function(t,e){var i=r.target.settings.simpleFilter.hide.stagger*e;t.setStyles({transitionDelay:2e3<i?"0ms":i+"ms"})}),r.itemsParent.removeClass("showing"),this.advancedMap&&this.advancedMap._node&&this.advancedMap._node._closeInfo,r.filterAnim?(r.target.settings.simpleFilter.anim&&r.itemsParent.addClass("hiding"),i&&r.target.settings.simpleFilter.anim?setTimeout(function(){e()},i):e()):e()}else this.advancedMap&&this.advancedMap._node&&this.advancedMap._node._closeInfo&&this.advancedMap._node._closeInfo()},_checkInitState:function(t){var s=this;this.queryParams=null;var e,i,a=[];if(t&&(s.customFiltersWrapper.all(".archive-group-name-link").removeClass("active"),s.target.settings.initState={}),s.requestComplete&&s.target.settings.useHistory&&(s.blockPushState=!1),this.target.settings.urlQuery&&window.location.search&&-1<window.location.search.indexOf("=")){var n=window.location.search.substring(1);try{s.target.settings.stripQuery&&(!0===s.target.settings.stripQuery&&(n=decodeURIComponent(n).replace(/<\/?[^>]+(>|$)/g,"")),"function"==typeof s.target.settings.stripQuery&&(n=s.target.settings.stripQuery(n)||n));var r,o,l=JSON.parse('{"'+n.replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(t,e){return""===t?e:decodeURIComponent(e.replace(/\+/g," "))});for(var c in this.queryParams=l){l[c]&&(s.getFilterAttrObj&&s.getFilterAttrObj[c]?(s.target.settings.initState.filter||(s.target.settings.initState.filter=[]),r=c+"|"+decodeURIComponent(l[c]),-1===s.target.settings.initState.filter.indexOf(r)&&s.target.settings.initState.filter.push(r)):s.sortObj&&(s.sortObj[c]||s.sortObj[c+"_desc"])&&(s.target.settings.initState.sort||(s.target.settings.initState.sort=[]),o=c+"|"+decodeURIComponent(l[c]),-1===s.target.settings.initState.sort.indexOf(o)&&s.target.settings.initState.sort.push(o)),a.push(decodeURIComponent(l[c])))}}catch(t){console.log(t)}}-1<window.location.pathname.indexOf("/category/")&&(e=decodeURIComponent(window.location.pathname.split("/category/")[1].replace(/\+/g," ")),s.target.settings.initState.filter||(s.target.settings.initState.filter=[]),-1===s.target.settings.initState.filter.indexOf("category|"+e)&&s.target.settings.initState.filter.push("category|"+e),e&&a.push(e)),-1<window.location.pathname.indexOf("/tag/")&&(i=decodeURIComponent(window.location.pathname.split("/tag/")[1].replace(/\+/g," ")),s.target.settings.initState.filter||(s.target.settings.initState.filter=[]),-1===s.target.settings.initState.filter.indexOf("tag|"+i)&&s.target.settings.initState.filter.push("tag|"+i),i&&a.push(i)),s.target.settings.compatCatTagInQuery&&a.length&&a.forEach(function(t){var e,i=t.split(",");100<i.length?i.forEach(function(t){var e;!t||(e=s.customFiltersWrapper.all('.archive-group-name-link[data-filter][data-filter-val*="'+Tt(t)+'"]')).size()&&(e.each(function(t){var e=t.ancestor(".archive-group-list"),i=e&&e.one(".archive-group-name-link[data-all-filter-attr]");i&&i.removeClass("active"),t.addClass("active")}),s.sqs_query_not_found=!1)}):(e=s.customFiltersWrapper.all('.archive-group-name-link[data-filter][data-filter-val="'+Tt(t)+'"]')).size()?(e.each(function(t){var e=t.ancestor(".archive-group-list"),i=e&&e.one(".archive-group-name-link[data-all-filter-attr]");i&&i.removeClass("active"),t.addClass("active")}),s.sqs_query_not_found=!1):s.sqs_query_not_found=!0}),this.target.settings.pagination&&this.target.settings.pagination.enabled&&this.target.settings.pagination.pageSize&&s.queryParams&&s.queryParams.page_n&&(s.pag_num_query=parseInt(s.queryParams.page_n)),(this.target.settings.initState&&(this.target.settings.initState.filter||this.target.settings.initState.sort)||t)&&(this.target.settings.initState.filter&&this.target.settings.initState.filter.length&&this.target.settings.initState.filter.forEach(function(t){var e=!!(t=t.toLowerCase().split("|"))[1]&&t[1].split(","),i=!!t[0]&&Tt(t[0]);s.rangesSliders&&s.rangesSliders.length&&s.rangesSliders.forEach(function(t){t.filterValue==i&&t.noUiSlider.set(e)}),e&&i&&(s.customFiltersWrapper.all('.archive-group-name-link[data-filter="'+i+'"][data-all-filter-attr]').removeClass("active"),e.forEach(function(t){s.customFiltersWrapper.all('.archive-group-name-link[data-filter="'+i+'"][data-filter-val="'+Tt(t)+'"]').addClass("active")}))}),this.target.settings.initState.sort&&this.target.settings.initState.sort.length&&this.target.settings.sort&&this.target.settings.sort.enabled&&(s.customFiltersWrapper.all(".archive-group-name-link[data-sort]").removeClass("active"),this.target.settings.initState.sort.forEach(function(t){var e,i;t&&(e=!!(t=t.toLowerCase().split("|"))[0]&&t[0].split(","),i=t[1]?Tt(t[1]):"asc",e&&i&&e.forEach(function(t){t=Tt(t),s.sort_param=t+"_"+i,s.customFiltersWrapper.all('.archive-group-name-link[data-sort="'+t+"_"+i+'"]').addClass("active")}))})),t&&this._sortGrid(!0),this.container.addClass("custom-filter-init-state"))},_initFiltering:function(){var e,c=this;this.filtersDropdowns=this.customFilters.all(".filterDropdown"),this.exclude_name=!!this.target.settings.excludeFilter&&Tt(this.target.settings.excludeFilter.trim()),this.filtersDropdowns.size()&&this.filtersDropdowns.each(function(r){var o,l;"dropdown"==r.getAttribute("data-filter-type")&&(r.one("label"),r.defaultLabel=(r.one(".archive-dropdown-toggle-title").get("textContent")||r.one(".archive-dropdown-toggle-title").get("innerText")).replace(/\r?\n|\r/g,"").trim(),o=r.all(".archive-group-name-link"),r.resetOthers=r.getAttribute("data-reset-others"),o.removeAttribute("data-ajax-loader"),l=!!r.getAttribute("data-multiple")&&"true"===r.getAttribute("data-multiple"),r.delegate("click",function(t){t.halt(),r.all(".archive-group-name-link.active").removeClass("active"),c.filterAnim=!0,c.advancedMap&&(c.needBoundsChange=!0),c._sortGrid()},".reset-button"),r.delegate("click",function(t){t.halt(),o=r.all(".archive-group-name-link"),t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget);var e,i,s=Tt(r.getAttribute("data-all-option")),a=t.currentTarget.getAttribute("data-filter"),n=t.currentTarget.hasAttribute("data-parent-cat");r.resetOthers&&("all"==r.resetOthers?c.container.all('.archive-group-name-link:not([data-filter="'+a+'"])').removeClass("active"):(e=(r.resetOthers+"").split("|")).length&&e.forEach(function(t){c.container.all(".filterDropdown.name-"+Tt(t,!0)+" .archive-group-name-link").removeClass("active")})),t.currentTarget.get("text").trim()===s||!l&&!n?(t.currentTarget.addClass("clicked"),o.filter(":not(.clicked)").removeClass("active"),t.currentTarget.toggleClass("active"),t.currentTarget.removeClass("clicked")):((i=t.currentTarget.ancestor(".nested-options"))&&i.all("a:not(.clicked)").removeClass("active"),t.currentTarget.toggleClass("active"),r.one('[data-filter-val="'+s+'"]')&&(t.currentTarget.getAttribute("data-filter-val")!==s?r.one('[data-filter-val="'+s+'"]').removeClass("active"):(o.removeClass("active"),t.currentTarget.addClass("active")),o.filter(".active").size()<1&&r.one('[data-filter-val="'+s+'"]').addClass("active")),t.currentTarget.hasClass("active")&&n&&t.currentTarget.ancestors("li[data-root-option]").each(function(t){t.one("a").addClass("active")})),c.target.settings.closeOptionsOnSelect&&r.one(".archive-dropdown-toggle-checkbox").set("checked",!1),c.filterAnim=!0,Y.fire("custom-filter:filter-filtering",{customFilter:c}),c.container.fire&&c.container.fire("custom-filter:filter-filtering",{customFilter:c,param:t.currentTarget.getAttribute("data-filter-val")}),c.advancedMap&&(c.needBoundsChange=!0),c._sortGrid()},".archive-group-name-link[data-filter-val]"))}),this.searchContainer&&(e=At(function(t){c.searchContainer.addClass("searching"),t.newVal=t.newVal?t.newVal:t.target&&t.target.value?t.target.value:!(!t.target||!t.target._node)&&t.target._node.value,c.searchValue=t.newVal;var e=t.newVal;c.hasOwnProperty("regExpWordsDelimiter")&&t.newVal&&-1<t.newVal.indexOf(c.regExpWordsDelimiter)&&(e=e.trim().replace(new RegExp(c.regExpWordsDelimiter,"gi"),"|").replace(/\|+/g,"|")),c.searchRegex=new RegExp(e,"gi"),t.newVal&&t.newVal.trim()||c.searchContainer.removeClass("searching"),t.newVal?c.searchContainer.addClass("dirty"):c.searchContainer.removeClass("dirty"),c.target.settings.search.disableSearch||((!t.newVal||t.newVal.length<c.searchMinLength)&&(c.searchRegex=""),c.advancedMap&&(c.needBoundsChange=!0),c.target.settings.search.customSearchFunc?(!t.newVal||t.newVal.length>=c.searchMinLength)&&c.target.settings.search.customSearchFunc(t):(c.target.settings.mobilePanel.enabled,Y.fire("custom-filter:filter-sorting",{customFilter:c}),c.container.fire&&c.container.fire("custom-filter:filter-sorting",{customFilter:c,param:"searching.."}),c.isotope?(c.isotope.options.transitionDuration=c.isotope.options.origTransitionDuration,c.isotope.arrange({sortBy:c.sort_param})):c.mixitup?c.mixitup.sort():(c.filterAnim=!0,c._sortGrid())))},c.target.settings.search.timeout,!1),this.searchContainer.one(".search-input").on("valuechange",function(t){t.currentTarget.getAttribute("data-submit-on-enter")?c.searchContainer.addClass("searching"):e(t)}),this.searchContainer.one(".search-input").on("keyup",function(t){13==t.keyCode&&e(t)}),this.searchContainer.delegate("click",function(t){t.halt(),c.filterAnim=!0,c.searchContainer.one(".search-input").set("value",""),c.searchContainer.removeClass("dirty"),e({newVal:"",reset:!0})},".reset-button"),this.debounce_search=e),this.sortContainer&&(this.sortContainer.defaultLabel=this.sortContainer.one(".archive-dropdown-toggle-title").get("innerHTML"),this.sortContainer.one("label"),this.sortContainer.delegate("click",function(t){t.halt(),c.sortContainer.all(".archive-group-name-link.active").removeClass("active"),c.filterAnim=!0,c._sortGrid()},".reset-button"),this.sortContainer.delegate("click",function(t){t.halt(),t.currentTarget=t.currentTarget._node?t.currentTarget:Y.one(t.currentTarget),t.currentTarget.addClass("clicked"),c.sortContainer.all(":not(.clicked)").removeClass("active"),t.currentTarget.toggleClass("active"),t.currentTarget.removeClass("clicked"),c.target.settings.closeOptionsOnSelect&&c.sortContainer.one(".archive-dropdown-toggle-checkbox").set("checked",!1),c.container.fire&&c.container.fire("custom-filter:filter-sorting",{customFilter:c,param:t.currentTarget.getAttribute("data-filter-val")}),c.filterAnim=!0,Y.fire("custom-filter:filter-sorting",{customFilter:c}),c._sortGrid()},".archive-group-name-link[data-sort]")),$&&console.log("filter init");var i,r,o,l,d,g,s,t,a,n,u,p=this.config&&this.config.design?"autocolumns"==this.config.design:c.itemsParent&&c.itemsParent.hasClass("sqs-gallery")&&c.itemsParent.hasClass("sqs-gallery-design-autocolumns");this.autocolumns_there=p,(!this.target.settings.isotope.enabled||!1 in window)&&(!this.target.settings.mixitup.enabled||!1 in window)&&this.container.addClass("using-simple-filter"),this.customFiltersWrapper.one(".quick-options-search")&&(i=At(function(t){t.target.__ul_list=t.target.__ul_list||t.target.ancestor(".archive-group-list");var e=t.hasOwnProperty("newVal")&&t.newVal||t.target.get("value");e?t.target.get("parentNode").addClass("dirty"):t.target.get("parentNode").removeClass("dirty");var i=new RegExp(e,"gi");t.target.__ul_list&&t.target.__ul_list.all(".archive-group-name-link").each(function(t){t._node.textContent.trim().match(i)?t.get("parentNode").show():t.get("parentNode").hide()})},300,!1),this.customFiltersWrapper.all(".quick-options-search input").each(function(t){t.on("valuechange",i),t.get("parentNode").delegate("click",function(t){t.halt();var e=t.target.get("parentNode").one("input");e&&(e.set("value",""),i({target:e,newVal:"",reset:!0}))},".qos-reset-button")})),"mixitup"in window&&this.target.settings.mixitup.enabled?($&&console.log("mixitup"),this.container.addClass("mixitup-filter-used"),c.mixitup=mixitup(c.itemsParent.getDOMNode(),{controls:{enable:!1},selectors:{target:c.target.items},animation:{duration:c.target.settings.mixitup.transitionDuration},callbacks:{onMixEnd:function(t){c.itemsCount&&c.itemsCount.one(".items-count").set("textContent",t.totalShow),0===t.totalShow?c.container.addClass("custom-filter-no-result"):c.container.removeClass("custom-filter-no-result"),c.advancedMap&&c._filterAdvancedMapMarkers(),Y.fire("custom-filter:gallery-refresh"),c.container.fire&&c.container.fire("custom-filter:gallery-refresh",{customFilter:c}),c.filterAnim=!1,c.waitingForNewItems=!1,c.target.settings.hooks&&c.target.settings.hooks.afterFilter&&"function"==typeof c.target.settings.hooks.afterFilter&&c.target.settings.hooks.afterFilter(c)}}})):"Isotope"in window&&this.target.settings.isotope.enabled?($&&console.log("isotope"),this.container.addClass("isotope-filter-used"),r=c.container.one('[data-controller*="Gallery"]'),o=!1,r&&(this.container.addClass("used-7_1-gallery"),o=(o=r.getAttribute("data-props"))&&JSON.parse(o)),l=this.target.settings.isotope.columnWidth?this.target.settings.isotope.columnWidth:this.config&&this.config.columnWidth?this.config.columnWidth:o&&o.numColumns?100/o.numColumns+"%":this.items.item(0).get("offsetWidth"),d=this.target.settings.isotope.gutter?this.target.settings.isotope.gutter:this.config&&this.config.hasOwnProperty("gutter")?this.config.gutter:o&&o.hasOwnProperty("gutter")?o.gutter:0,g=c.target.settings.isotope&&c.target.settings.isotope.transitionDuration?parseFloat(c.target.settings.isotope.transitionDuration):500,c.itemsParent.hasClass("sqs-gallery")&&((s=c.itemsParent.getData("gallery"))?(c.itemsParent.clearData("gallery"),Y.Squarespace.GalleryManager&&(Y.Squarespace.GalleryManager._galleries&&Y.Squarespace.GalleryManager._galleries.length&&Y.Squarespace.GalleryManager._galleries.forEach(function(t,e){s._yuid===t._yuid&&(t.after("destroy",function(){$&&console.log("DESTROY"),p&&c.itemsParent.addClass("sqs-gallery-design-autocolumns"),c.itemsParent.setStyles({margin:null,marginBottom:null,marginTop:null})}),c.target.settings.isotope.columnWidth||(l=c.items.item(0).width()),t.destroy(),Y.Squarespace.GalleryManager._galleries.splice(e,1))}),s=null)):(c.container.all(".sqs-gallery-container").removeClass("sqs-gallery-container"),console.log("prevent gallery start"))),function(){var e=c.itemsParent.hasClass("sqs-gallery")||r||c.target.settings.isotope.useMaxWidth;e&&c.itemsParent.addClass("clear").setStyle("height","auto"),d=parseFloat(d),l=-1<(l+"").indexOf("%")?l:parseFloat(l)/c.itemsParent.width()*100+"%";var t=o&&o.numColumns?o.numColumns:-1<(l+"").indexOf("%")?100/parseFloat(l):(c.itemsParent.width()/parseFloat(l)).toFixed(),i=-1==(d+"").indexOf("%")?parseFloat(d)/c.itemsParent.width()*100+"%":d+"px";c.itemsParent.append('<div style="width:'+i+'" class="gutter-sizer"></div>'),-1<(l+"").indexOf("%")&&-1<i.indexOf("%")&&(l=parseFloat(l)-(parseFloat(i)-parseFloat(i)/t)+"%"),c.isotope_item_width=l,c.isotope_column_gutter=i;var s={};for(var a in c.sortObj)c.sortObj.hasOwnProperty(a)&&-1<a.indexOf("_desc")&&(s[a]=!1);e&&c._setItemsMaxWidthStyle(l),c.items.each(function(t){e&&t.setStyles({width:"100%",height:null,marginRight:0,marginLeft:0,marginBottom:d,left:null,top:null,visibility:"visible"}),c.config&&c.config.imageAspectRatio&&"autocolumns"!==c.config.design&&(t.one(".img-wrapper")||"auto"===c.config.imageAspectRatio.toLowerCase()?t.one(".img-wrapper")&&t.one(".img-wrapper")&&!p&&"auto"!==c.config.imageAspectRatio.toLowerCase()&&t.one(".img-wrapper").setStyles({paddingBottom:100/parseFloat(c.config.imageAspectRatio)+"%",height:0,overflow:"hidden"}):t.one(".summary-thumbnail-container")&&!p&&t.one(".summary-thumbnail-container").setStyles({paddingBottom:100/parseFloat(c.config.imageAspectRatio)+"%",height:0,overflow:"hidden"}),t.all("img").each(function(t){t.loader||t.plug(Y.Squarespace.Loader2,{mode:t.get("parentNode").hasClass("content-fit")?"fit":"fill",load:!0}),t.loader&&t.fire("refresh")}))}),l=-1<(l+"").indexOf("%")?".custom-filter-grid-item":parseFloat(l),c.isotope=new Isotope(c.itemsParent.getDOMNode(),{itemSelector:c.target.items,transitionDuration:0,origTransitionDuration:g,initLayout:!0,layoutMode:c.target.settings.isotope&&c.target.settings.isotope.layoutMode?c.target.settings.isotope.layoutMode:p?"masonry":"fitRows",percentPosition:!0,stamp:c.target.settings.isotope&&c.target.settings.isotope.stamp?c.target.settings.isotope.stamp:".stamp",columnWidth:".custom-filter-grid-item",gutter:".gutter-sizer",fitWidth:!0,fitRows:{columnWidth:".custom-filter-grid-item",gutter:".gutter-sizer"},masonry:{columnWidth:".custom-filter-grid-item",gutter:".gutter-sizer"},packery:{columnWidth:".custom-filter-grid-item",gutter:".gutter-sizer"},filter:function(t,e){var i=t||e,s=!c.searchRegex||c.searchFunction(i).match(c.searchRegex),a=!c.filter_selectors||i.f_matches(c.filter_selectors.trim().replace(/ /g,","));return s&&a},sortAscending:Yt(s,{popular:!1}),getSortData:c.sortObj});var n=At(function(t){c.itemsCount&&c.itemsCount.one(".items-count").set("textContent",t.length),0===t.length?c.container.addClass("custom-filter-no-result"):(c.container.removeClass("custom-filter-no-result"),c.itemsParent.all("img").each(function(t){t._node&&t._node.clientWidth&&t.fire("refresh")})),c.filterAnim=!1,c.waitingForNewItems=!1,c.advancedMap&&c._filterAdvancedMapMarkers(),Y.fire("custom-filter:gallery-refresh"),c.container.fire&&c.container.fire("custom-filter:gallery-refresh",{customFilter:c}),c.target.settings.hooks&&c.target.settings.hooks.afterFilter&&"function"==typeof c.target.settings.hooks.afterFilter&&c.target.settings.hooks.afterFilter(c)},100,!0);c.isotope.on("arrangeComplete",n),c.isotope.once("layoutComplete",function(t){$&&console.log("first layout"),t&&t.length&&t.forEach(function(t){t.element&&(t.element.style.overflow="hidden")}),c.itemsParent.all("img").each(function(t){t._node&&t._node.clientWidth&&(t.loader?t.fire("refresh"):ImageLoader.load(t),t.setStyle("opacity","1"))})}),$&&console.log("isotope init"),c.filterAnim=!0,c._sortGrid(),Y.fire("custom-filter:isotope-inited",{customFilter:c}),c.container.fire&&c.container.fire("custom-filter:isotope-inited",{customFilter:c})}()):$&&console.log("No filter library"),c.itemsParent&&(c.gallery&&!c.container.hasClass("performance-mode-used")&&c.gallery.refresh(),window.imagesLoaded?imagesLoaded(c.itemsParent.getDOMNode(),function(t){c._sortGrid(),c.autocolumns_there&&c.gallery&&!c.container.hasClass("performance-mode-used")&&c.gallery.refresh()}):(t=c.itemsParent.all("img"),a=0,n=t.size(),u=!1,n&&t.on("load",function(t){n<=++a&&!u&&(u=!0,c.isotope&&c.isotope.layout(),c._sortGrid(),c.autocolumns_there&&c.gallery&&!c.container.hasClass("performance-mode-used")&&c.gallery.refresh())}))),window.Y&&Y.once("domready",function(){c.autocolumns_there&&c.gallery&&!c.container.hasClass("performance-mode-used")&&c.gallery.refresh()})},_followMapBounds:function(t,e,i){t=t||this.advancedMap._node;e=e||t.__map&&t.__map.getBounds();var s=!1;t.radiusCircle&&(e=t.radiusCircle.getBounds(),s=t.radiusCircle.getRadius());var a=t._markers;if(a&&a.length)for(var n=a.length-1;0<=n;n--){var r=a[n],o=r.outsideItem&&r.outsideItem._node;if(o)if(i)o.dataset.inBounds=!0;else{var l=r.getPosition();if(s){var c=t.radiusCircle.getCenter();try{google.maps.geometry.spherical.computeDistanceBetween(l,c)<=s?o.dataset.inBounds=!0:o.dataset.inBounds=!1}catch(t){u(l.lat(),l.lng(),c.lat(),c.lng())<=s/1e3?o.dataset.inBounds=!0:o.dataset.inBounds=!1}}else e.contains(l)?o.dataset.inBounds=!0:o.dataset.inBounds=!1}}this._sortGrid(),this.firstMapBoundRun=!0},_buildMapRadiusCircle:function(t){var e,i,s,a,n=this,r=n.target.settings.advancedMap;n.advancedMap&&((e=n.advancedMap)._node.radiusCircle&&(e._node.radiusCircle.setMap(null),e._node.radiusCircle=null),!e._node.radiusCircle&&t.lat&&(i=r.autocomplete.dimension.val||1e4,s=r.autocomplete.radius.val?r.autocomplete.radius.val*i:1e5,(a=r.autocomplete.circle).map=e._node.__map,a.center=t,a.radius=s,e._node.radiusCircle=new google.maps.Circle(a),setTimeout(function(){n.needBoundsChange=!0,n._followMapBounds(n.advancedMap._node,n.advancedMap._node.radiusCircle.getBounds())},50)))},_initMapAutoComplete:function(){var i=this,t=i.target.settings.advancedMap;if(t.autocomplete&&t.autocomplete.enabled&&i.mapAutocompleteContainer){function e(){var t=i.mapAutocomplete.getPlace(),e={};t&&t.geometry.location&&(e={lat:t.geometry.location.lat(),lng:t.geometry.location.lng()}),position=e,i.container.addClass("position-found"),i.placedContainer&&i.placedContainer.addClass("position-found"),i&&i.items.size()&&(i.items.each(function(t){var e=t._node._item_data,i="";e&&e.location&&e.location.markerLat&&(i=u(position.lat,position.lng,parseFloat(e.location.markerLat),parseFloat(e.location.markerLng)),t._node._item_data.distance=i),t.setAttribute("data-distance",i)}),i.sortContainer&&i.sortContainer.one(".distance_asc a")&&i.sortContainer.one(".distance_asc a").addClass("active")),position&&i._buildMapRadiusCircle(position)}function s(){!i.mapAutocomplete&&a?(i.mapAutocomplete=new window.google.maps.places.Autocomplete(a,n),i.mapAutocomplete.addListener("place_changed",e)):console.log("Can't start Autocomplete")}var a=i.mapAutocompleteContainer.one(".search-input")._node,n=t.autocomplete.options||{};try{window.google&&window.google.maps&&window.google.maps.places&&window.google.maps.places.Autocomplete?s():(window.google&&window.google.maps&&function(t,e,i,s,a){var n;(i=i||document.getElementsByTagName("head")[0]).querySelector("#"+e)?s&&s(this):((n=document.createElement("script")).src=t,n.id=e,n.onload=function(){a&&this.remove(),s&&s(this)},i.appendChild(n))}("https://maps.googleapis.com/maps-api-v3/api/js/"+(window.google.maps.version.slice(2).replace(/\./g,"/")+"/places.js"),"google-maps-places",null,function(){console.log("Google Places Loaded"),s()}),console.log("No Places API on page"))}catch(t){google&&google.maps&&google.maps.autocomplete||console.warn("We can't start autocomplete now")}}else console.log("Can't start Autocomplete")},_setItemsMaxWidthStyle:function(t){this.isotope_itemsWidthInRange=!1;var t=t||this.isotope_item_width||"25%",e=this.isotope_column_gutter&&-1<this.isotope_column_gutter.indexOf("%")?parseFloat(this.isotope_column_gutter):0;window.innerWidth<=1024&&(t=33.3-e+"%"),window.innerWidth<=640&&(t=50-e+"%"),window.innerWidth<=400&&(t="100%"),console.log(window.outerWidth,window.innerWidth,this.isotope_item_width,t,e);var i="."+this.u_id+" .custom-filter-grid-item{max-width:"+t+";margin-left:0!important;margin-right:0!important;width:100%!important;}";this.itemsWidthStyleNode&&this.itemsWidthStyleNode.remove(),this.itemsWidthStyleNode=Y.Node.create('<style id="'+this.u_id+'-ItemsWidthStyle">'+i+"</style>"),this.container.append(this.itemsWidthStyleNode)},_addItemsAttributes:function(t,e){var J=this;this.coll_data&&this.coll_data.collection&&this.coll_data.collection.typeName,this.data_items_hash||(this.data_items_hash={});function p(i,t,e,s){var a,n,r,o,l;J.target.settings.shuffle?(i.hasAttribute("data-randomized")||i.setAttribute("data-index",(a=J.shuffleMin||1,n=X,(Math.random()*(n-a)+a).toFixed(2))),i.setAttribute("data-randomized",!0)):i.getAttribute("data-randomized")||i.setAttribute("data-index",e),s&&t&&(i.attrsAdded=!0),t.categoryIds&&J.coll_data&&J.coll_data.nestedCategories&&J.coll_data.nestedCategories.tree&&(t.categories=(r=J.coll_data,l=[],(o=t)&&o.categoryIds&&r&&r.nestedCategories&&r.nestedCategories.tree&&o.categoryIds.forEach(function(t){var e=r.nestedCategories.tree[t];e&&(l.push(e.displayName),e.parentCategoryId&&r.nestedCategories.tree[e.parentCategoryId]&&l.push(r.nestedCategories.tree[e.parentCategoryId].displayName))}),l)),t&&(i._node._item_data=t),t.categories||(t.categories=[]),t.tags||(t.tags=[]),t.categories&&t.categories.indexOf&&t.categories.indexOf("all"),t.tags&&t.tags.indexOf("all");var c=t.categories.length,d=t.tags.length,g="",u="";if(K)c&&t.categories.forEach(function(t){var e;J.target.settings.filter&&J.target.settings.filter.category&&-1===J.currentCats.indexOf(t)&&J.currentCats.push(t),J.target.settings.filter&&J.target.settings.filter.setCategoriesClasses&&(e="category-"+Tt(t),-1===i._node.className.indexOf(" "+e+" ")&&-1===g.indexOf(e)&&(g+=" "+e))}),d&&t.tags.forEach(function(t){var e;J.target.settings.filter&&J.target.settings.filter.tag&&-1===J.currentTags.indexOf(t)&&J.currentTags.push(t),J.target.settings.filter&&J.target.settings.filter.setTagsClasses&&(e="tag-"+Tt(t),-1===i._node.className.indexOf(" "+e+" ")&&-1===u.indexOf(e)&&(u+=" "+e))});else{if(c)for(var p=0;p<c;p++){var m,h=t.categories[p];J.target.settings.filter&&J.target.settings.filter.category&&-1===J.currentCats.indexOf(h)&&J.currentCats.push(h),J.target.settings.filter&&J.target.settings.filter.setCategoriesClasses&&(m="category-"+Tt(h),-1===i._node.className.indexOf(" "+m+" ")&&-1===g.indexOf(m)&&(g+=" "+m))}if(d)for(var f=0;f<d;f++){var v,b=t.tags[f];J.target.settings.filter&&J.target.settings.filter.tag&&-1===J.currentTags.indexOf(b)&&J.currentTags.push(b),J.target.settings.filter&&J.target.settings.filter.setTagsClasses&&(v="tag-"+Tt(b),-1===i._node.className.indexOf(" "+v+" ")&&-1===u.indexOf(v)&&(u+=" "+v))}}var w,_=g+" "+u;_.length&&(i._node.className+=_),t.hasOwnProperty("likeCount")&&i.setAttribute("data-like-count",t.likeCount),t.publishOn&&i.setAttribute("data-publish-on",t.publishOn),t.id&&i.setAttribute("data-set-id",t.id),t.price&&(w=parseInt((t.price+"").replace(/[^\d]/g,""))/100,i.setAttribute("data-price",w),-1===J.items_prices.indexOf(w)&&(J.items_prices.push(w),J.items_prices.sort(function(t,e){return t-e})));var C=t.variants?t.variants:!!t.structuredContent&&t.structuredContent.variants;if(C&&C.length){t.variantOptions=function(t){var s={width:[],height:[],weight:[],sku:[],prices:[],qtyInStock:0},e=t.structuredContent;e&&2===e.productType&&(s.qtyInStock=1e10);var i=t&&t.variants?t.variants:!(!t||!t.structuredContent)&&t.structuredContent.variants;if(i&&i.length){for(var a=0,n=0;n<i.length;n++){var r=(i[n].onSale?i[n].salePrice:i[n].price)/100;-1===s.prices.indexOf(r)&&s.prices.push(r);var o=i[n].optionValues;["width","height","len","weight","sku"].forEach(function(t){var e=i[n][t]&&(i[n][t]+"").trim();e&&s[t]&&-1==s[t].indexOf(e)&&s[t].push(e)}),s.qtyInStock||(i[n].unlimited?s.qtyInStock=1e10:a+=i[n].qtyInStock),o.length&&o.forEach(function(t){var e=t.optionName,i=(t.value+"").trim();s[e]||(s[e]=[]),i&&-1==s[e].indexOf(i)&&s[e].push(i)})}s.qtyInStock||(s.qtyInStock=a)}for(var l in s.prices.sort(function(t,e){return t-e}),s)s.hasOwnProperty(l)&&s[l].length&&-1<(s[l]+"").indexOf(", ")&&(s[l]=(s[l]+"").split(", ").map(function(t){return t.trim()}));return s}(t);var y=t.variantOptions.prices;for(var x in y.forEach(function(t){-1===J.items_prices.indexOf(t)&&J.items_prices.push(t)}),i.setAttribute("data-price",y[0]),i.setAttribute("data-prices",y),t.variantOptions)t.variantOptions.hasOwnProperty(x)&&"prices"!==x&&"qtyInStock"!==x&&i.setAttribute("data-variant-option-"+Tt(x),t.variantOptions[x]||"")}if((t.productType||t.recordTypeLabel&&"store_item"==t.recordTypeLabel)&&i.setAttribute("data-in-stock",function(t){if(t.variantOptions&&t.variantOptions.hasOwnProperty("qtyInStock"))return t.variantOptions.qtyInStock;var e=t.structuredContent;if(2===e.productType)return 1e10;for(var i=0,s=0;s<e.variants.length;s++){var a=e.variants[s];if(a.unlimited)return 1e10;i+=a.qtyInStock}return i}(t)),J.items_prices.sort(function(t,e){return t-e}),J.getFilterAttrObj)for(var k in J.getFilterAttrObj)if(J.getFilterAttrObj.hasOwnProperty(k)){var O=J.getFilterAttrObj[k].attr,F=J.getFilterAttrObj[k],S=F.type;if("function"==typeof O)var A=J.getFilterAttrObj[k].variantOption,P=A?O(t,A):O(i,t);else{var I=(O=O.split("|"))[0],T=O[1]||!1,L=O[2]||!1,M=0<I.indexOf(".")?function(t,e){for(var i=t.split("."),s=i.length,a=e||this,n=0;n<s;n++)a=a&&a[i[n]];return a}(I,t):t[I];if(M){if(P=M,T)try{var N=Y.Node.create(P),q=N.one(T);N&&q?(P=(q.get("textContent")||q.get("innerText")).replace(/\r?\n|\r/g,"").trim()||null,L&&(P=q.getAttribute(L).replace(/\r?\n|\r/g,"").trim()||null)):P=null}catch(t){$&&console.log(t)}}else{try{(P=!!i.one(I)&&(0==I.indexOf("[")&&(i.one(I).getAttribute(I.replace(/[\[\]']+/g,"").trim())+"").trim()||(i.one(I).get("textContent")||i.one(I).get("innerText")).replace(/\r?\n|\r/g,"").trim()))&&1<i.one(I)._node.children.length&&(P=P.split(","))}catch(t){$&&console.log(t)}!1===P&&t.categories}}P?"object"!=typeof P&&(P=[P]):P=[];var E="",D=J.getFilterAttrObj[k].allOption,W=J.getFilterAttrObj[k].allowedPrefSuf,U=!0;P&&-1===P.indexOf(D)&&"range-slider"!==S&&P.push(D),J.getFilterAttrObj[k].defaultAttrs&&(0===P.length||1===P.length&&P[0]===D)&&J.getFilterAttrObj[k].defaultAttrs.split("|").forEach(function(t){t=Tt(t),-1===P.indexOf(t)&&P.push(t)});var B,j,z,R,V=P.length;if(V){"range-slider"==S&&(B=[],F[j="ranges"]||(F[j]=[]),P.forEach(function(t){var e=parseFloat((t+"").replace(/\D/g,""));-1===B.indexOf(e)&&B.push(e),-1===F[j].indexOf(e)&&(F[j].push(e),F[j].sort(function(t,e){return t-e}))}),i.setAttribute("data-range-value-"+Tt(F.name),B+""));for(var G,x=0;x<V;x++){P[x]=(P[x]+"").trim(),J.getFilterAttrObj[k].lowercase&&(P[x]=P[x].toLowerCase()),J.getFilterAttrObj[k].capitalcase&&(P[x]=tt(P[x])),J.getFilterAttrObj[k].uppercase&&(P[x]=P[x].toUpperCase()),W&&W.length&&P[x]&&P[x]!==D&&(U=-1<(P[x]+"").indexOf(W)&&(G=new RegExp(W,"gi"),P[x]=P[x].replace(G,"").trim(),!0)),P[x]&&U&&((P[x]==D||J.getFilterAttrObj[k].allowedOptions.length&&-1<J.getFilterAttrObj[k].allowedOptions.indexOf(P[x])||!J.getFilterAttrObj[k].allowedOptions.length)&&(!F.notAllowedOptions||F.notAllowedOptions&&F.notAllowedOptions.length&&-1===F.notAllowedOptions.indexOf(P[x]))&&(E+=" "+k+"-"+Tt(P[x])),(-1===J.getFilterAttrObj[k].currentOptions.indexOf(P[x])&&J.getFilterAttrObj[k].allowedOptions.length&&-1<J.getFilterAttrObj[k].allowedOptions.indexOf(P[x])||-1===J.getFilterAttrObj[k].currentOptions.indexOf(P[x])&&!J.getFilterAttrObj[k].allowedOptions.length)&&(P[x]===D||J.getFilterAttrObj[k].disableOptionsUpdate||(!F.notAllowedOptions||F.notAllowedOptions&&F.notAllowedOptions.length&&-1===F.notAllowedOptions.indexOf(P[x]))&&J.getFilterAttrObj[k].currentOptions.push(P[x])))}}else{"range-slider"==S&&(i.setAttribute("data-range-value-"+Tt(F.name),0),F[j="ranges"]||(F[j]=[]),-1===F[j].indexOf(0)&&(F[j].push(0),F[j].sort(function(t,e){return t-e})))}"range-slider"!==S&&(z=i._node.className,E&&(E=E.trim().split(" "),R="",E.forEach(function(t){-1===z.indexOf(" "+t+" ")&&(R+=" "+t)}),R.length&&(i._node.className+=R)))}var H,Q=[];for(var Z in J.sortObj){J.sortObj.hasOwnProperty(Z)&&(H=Z.replace("_desc","").replace("_asc",""),-1===Q.indexOf(H)&&(Q.push(H),"function"==typeof J.sortObj[Z]&&(i.setAttribute("data-"+H,J.sortObj[Z](i._node,t)),i._node.itemData=t)))}J.isotope&&J.isotope.updateSortData()}var i,m,h,f,X=J.items.size(),s=!1,a=!1;e&&e.size()&&(s=!0,a=J.items,J.items&&(J.items.size(),e.size()),J.items=new Y.NodeList(e._nodes)),X=J.items.size(),t?J.items.each(function(t,e){var s=[],a=[];t.one(".summary-metadata-item--cats")?s=(t.one(".summary-metadata-item--cats").get("textContent")||t.one(".summary-metadata-item--cats").get("innerText")).replace(/\r?\n|\r/g,"").trim().split(", "):t.one(".Blog-meta-item--categories")?s=(t.one(".Blog-meta-item--categories").get("textContent")||t.one(".Blog-meta-item--categories").get("innerText")).replace(/\r?\n|\r/g,"").trim().split(", "):t.one(".entry-category")&&(s=(t.one(".entry-category").get("textContent")||t.one(".entry-category").get("innerText")).replace(/\r?\n|\r/g,"").trim().split(", ")),t.one(".summary-metadata-item--tags")?a=(t.one(".summary-metadata-item--tags").get("textContent")||t.one(".summary-metadata-item--tags").get("innerText")).replace(/\r?\n|\r/g,"").trim().split(", "):t.one(".Blog-meta-item--tags")?a=(t.one(".Blog-meta-item--tags").get("textContent")||t.one(".Blog-meta-item--tags").get("innerText")).replace(/\r?\n|\r/g,"").trim().split(", "):t.one(".entry-tags")&&(a=(t.one(".entry-tags").get("textContent")||t.one(".entry-tags").get("innerText")).replace(/\r?\n|\r/g,"").replace("Tagged:","").trim().split(", ")),J.target.settings.filter.useItemsClassesForData&&t.hasClass("hentry")&&t._node&&(-1<t._node.className.indexOf("category-")||-1<t._node.className.indexOf("tag-"))&&t._node.className.split(" ").forEach(function(t){var e,i;-1<(t=t.trim()).indexOf("category-")?(e=tt(t.replace("category-","")).replace(/-/g," "),-1===s.indexOf(e)&&s.push(e)):-1<t.indexOf("tag-")&&(i=tt(t.replace("tag-","")).replace(/-/g," "),-1===a.indexOf(i)&&a.push(i))});var i={categories:s,tags:a,price:t.one(".sqs-money-native")?parseFloat(t.one(".sqs-money-native").get("textContent").replace(/\D/g,"")):0,publishOn:t.one("time")?new Date(t.one("time").get("innerText")).getTime():"",likeCount:t.one(".like-count")?t.one(".like-count").get("innerText"):0};p(t,i,e)}):((i=this.coll_data.collection&&this.coll_data.collection.collections?this.coll_data.collection.collections:this.coll_data.items)&&i.length&&this.items&&this.items.size()&&(this.requestComplete,this.items&&this.items.size()&&(this.items.item(this.items.size()-1)||this.items.item(0))._node._LZSData?J.items.each(function(t,e){t._node._LZSData&&p(t,t._node._LZSData,e,"direct LZS logic")}):this.items.item(0).hasAttribute("data-item-id")?(i.forEach(function(t,e){var i=t.id;i&&!J.data_items_hash.hasOwnProperty(i)&&(J.data_items_hash[i]=t)}),J.items.each(function(t,e){var i=t&&t.getAttribute("data-item-id");i&&J.data_items_hash.hasOwnProperty(i)&&p(t,J.data_items_hash[i],e,"Data Item Id")})):this.items.item(0).hasClass("index-section")&&this.items.item(0).getAttribute("id")&&0==this.items.item(0).getAttribute("id").indexOf("index-section")?i.forEach(function(e,i){J.items.some?J.items.some(function(t){if(t&&t.getAttribute("id")=="index-section-"+e.urlId)return p(t,e.items&&e.items[0]||e,i,"Index Section Id"),!0}):J.items.each(function(t){t&&t.getAttribute("id")=="index-section-"+e.urlId&&p(t,e.items&&e.items[0]||e,i,"Index Section Id")})}):this.items.item(0).getAttribute("data-slide-id")?(i.forEach(function(t,e){var i=t.id;i&&!J.data_items_hash.hasOwnProperty(i)&&(J.data_items_hash[i]=t)}),J.items.each(function(t,e){var i=t&&t.getAttribute("data-slide-id");i&&J.data_items_hash.hasOwnProperty(i)&&p(t,J.data_items_hash[i],e,"Slide Gallery Item Id")})):this.items.item(0).hasClass("slide")&&this.items.item(0).getAttribute("data-slide-url")?i.forEach(function(e,i){J.items.some?J.items.some(function(t){if(t&&t.getAttribute("data-slide-url")==e.urlId)return p(t,e,i,"Slide Gallery Item URL"),!0}):J.items.each(function(t){t&&t.getAttribute("data-slide-url")==e.urlId&&p(t,e,i,"Slide Gallery Item URL")})}):this.items.item(0).hasClass("project")&&this.items.item(0).getAttribute("href")?i.forEach(function(e,i){e.items&&e.items[0]&&(J.items.some?J.items.some(function(t){if(t&&t.getAttribute("href")=="/"+e.urlId+"/")return p(t,e.items&&e.items[0]||e,i,"Index Gallery Item href"),!0}):J.items.each(function(t){t&&t.getAttribute("href")=="/"+e.urlId+"/"&&p(t,e.items&&e.items[0]||e,i,"Index Gallery Item href")}))}):this.items.item(0).hasClass("grid-item")&&this.items.item(0).getAttribute("href")?i.forEach(function(e,i){J.items.some?J.items.some(function(t){if(t&&t.getAttribute("href")==e.fullUrl)return p(t,e,i,"Portfolio Item href"),!0}):J.items.each(function(t){t&&t.getAttribute("href")==e.fullUrl&&p(t,e,i,"Portfolio Item href")})}):this.items.item(0).hasClass("slide")||this.items.item(0).hasClass("summary-item")||this.items.item(0).hasAttribute("data-id")||!this.items.item(0).hasAttribute("data-item-id")&&!this.items.item(0).hasClass("archive-item-link")?(m=!(e&&!J.isotope||J.target.settings.pagination&&J.target.settings.pagination.enabled)&&(J.container.one(J.target.items)||J.isotope)?J.container:J.items.toFrag(),h=J.items.size(),f=J.items.item(0).one(".eventlist-title-link")?"events":!!J.items.item(0).one(".blog-title a")&&"blog_v_7_1",i.forEach(function(i,s){if(h<=0||!i)return!1;var t,e,a,n,r=i.fullUrl,o=i.clickthroughUrl||i.sourceUrl,l=i.id,c=i.systemDataId,d=i.mainImage?i.mainImage.assetUrl:i.systemDataId&&i.assetUrl,g=i.title&&i.title.trim(),u=m.one('.custom-filter-grid-item[data-id="'+l+'"]');u?(u.attrsAdded||p(u,i,s,"id logic"),h--):f?"events"==f?(a=(a=o&&m.one('.eventlist-title-link[href="'+o+'"]')?m.one('.eventlist-title-link[href="'+o+'"]'):r?m.one('.eventlist-title-link[href="'+r+'"]')||m.one('a.image-wrapper[href="'+r+'"]'):"")&&a.ancestor(J.target.items))&&(a.attrsAdded||p(a,i,s,"href logic"),h--):"blog_v_7_1"==f&&(a=(a=o&&m.one('.blog-title a[href="'+o+'"]')?m.one('.blog-title a[href="'+o+'"]'):r?m.one('.blog-title a[href="'+r+'"]')||m.one('a.image-wrapper[href="'+r+'"]'):"")&&a.ancestor(J.target.items))&&(a.attrsAdded||p(a,i,s,"href logic"),h--):(n=(n=c&&m.all('[data-src*="'+c+'"]').size()?m.all('[data-src*="'+c+'"]'):m.all('[data-src*="'+d+'"]'))&&1==n.size()&&n.item(0).ancestor(J.target.items)||!1)?(n.attrsAdded||p(n,i,s,"asset logic"),h--):(t=g&&r&&m.one('.summary-title-link[href="'+r+'"]')&&m.one('.summary-title-link[href="'+r+'"]').get("textContent").replace(/\r?\n|\r/g,"").trim()===g?m.one('.summary-title-link[href="'+r+'"]').ancestor(J.target.items):!(!g||!r||!m.one('.image-slide-anchor[href="'+r+'"]')&&!m.one('.image-slide-anchor[href="'+i.clickthroughUrl+'"]'))&&(m.one('.image-slide-anchor[href="'+r+'"]')||m.one('.image-slide-anchor[href="'+i.clickthroughUrl+'"]')).ancestor(J.target.items))?(t.attrsAdded||p(t,i,s,"title&href logic"),h--):(e=!(!g||!m.one('[data-title="'+g+'"]'))&&m.one('[data-title="'+g+'"]').ancestor(J.target.items))?(e.attrsAdded||p(e,i,s,"title logic"),h--):(8==i.recordType||"video"==i.recordTypeLabel)&&i.oembed&&i.oembed.html?m.all(".summary-item-record-type-video").each(function(t){var e=t.one(".summary-thumbnail-container>.sqs-video-wrapper");e&&e.getAttribute("data-html")==i.oembed.html&&(t.attrsAdded||p(t,i,s,"video iframe logic"),h--)}):(a=r&&m.one('.summary-title-link[href="'+r+'"]'))&&(a.attrsAdded||p(a.ancestor(".summary-item"),i,s,"url logic"),h--)})):this.items.item(0).hasClass("archive-item-link")?i.forEach(function(t,e){var i=t.fullUrl,s=J.container.one('.archive-item-link[href="'+i+'"]');s&&p(s,t,e)}):i.forEach(function(t,e){var i=J.container.one('.hentry[data-item-id="'+t.id+'"]')||J.container.one(J.target.items+'[href="'+t.fullUrl+'"]');i&&p(i,t,e)})),J.requestComplete=!0),J.shuffleMin=X||1,this._addMarkersInstancesToItems(),s&&a&&(J.items=a),this._addProductsBadges(),J.target.settings.hooks&&J.target.settings.hooks.attributesAdded&&"function"==typeof J.target.settings.hooks.attributesAdded&&J.target.settings.hooks.attributesAdded(J),this.container.fire&&this.container.fire("custom-filter:attributes-added",{customFilter:J}),Y.fire("custom-filter:attributes-added",{customFilter:J})},_addProductsBadges:function(){var a;this.target.settings.productsBadges&&this.target.settings.productsBadges.length&&((a=this.target.settings.productsBadges)&&a.length&&this.items.each(function(i){var t,s=i.one(".sqs-product-mark-wrapper"),e=i.one(".ProductList-innerImageWrapper")||i.one(".grid-meta-status")||i.one(".img-wrapper");!s&&e&&(t=-1<e._node.className.indexOf("ProductList")?"ProductList-statusWrapper":-1<e._node.className.indexOf("grid-meta-status")?"grid-product-status":"summary-product-status",s=Y.Node.create('<div class="'+t+' sqs-product-mark-wrapper"></div>'),e.append(s)),s&&a.forEach(function(t){var e;2==(t=t.split("|")).length&&t[0]&&(e=Tt(t[0]),i.hasClass("tag-"+e)&&!s.one(".badge-"+e)&&s.append('<div class="product-mark badge-'+e+'">'+(t[1]||t[0])+"</div>"))})}))},_checkChildFilterForOptions:function(t){var e=this;if(t=t.customFilter||t,this.getFilterAttrObj&&t.getFilterAttrObj)for(var i in this.getFilterAttrObj)this.getFilterAttrObj.hasOwnProperty(i)&&t.getFilterAttrObj[i]&&t.getFilterAttrObj[i].currentOptions.forEach(function(t){-1==e.getFilterAttrObj[i].currentOptions.indexOf(t)&&e.getFilterAttrObj[i].currentOptions.push(t)})},_sortChildFilters:function(){if(this.container._node&&this.container._node.__childFilters&&this.container._node.__childFilters.length)for(var t=this.container._node.__childFilters,e=t.length-1;0<=e;e--)t[e].filter_selectors=this.filter_selectors,t[e].sort_param=this.sort_param,t[e].searchRegex=this.searchRegex,t[e].filterAnim=this.filterAnim,t[e]._sortGrid()},_countItemsInChildFilters:function(){if(this.container._node&&this.container._node.__childFilters&&this.container._node.__childFilters.length){for(var t=this.filtered.size(),e=this.container._node.__childFilters,i=e.length-1;0<=i;i--)t+=e[i].filtered.size();this.itemsCount&&this.itemsCount.one(".items-count").set("textContent",t)}},_registerChildFilters:function(){var e=this;if(this.container._node&&this.container._node.__childFilters&&this.container._node.__childFilters.length)for(var t=At(function(t){e._countItemsInChildFilters()},100,!1),i=this.container._node.__childFilters,s=i.length-1;0<=s;s--)e._checkChildFilterForOptions(i[s]),i[s].container.on("custom-filter:cats-tags-filters-built",function(t){e._buildDropdowns(t.currentFilter)}),i[s].container.on("custom-filter:sort-grid",t)},_buildDropdowns:function(){this.coll_data||(this.coll_data={collection:{}});var h=this;(this.currentTags.length||this.currentCats.length)&&this.coll_data.collection&&((!this.coll_data.collection.categories||this.coll_data.collection.categories.length<this.currentCats.length-1)&&(this.coll_data.collection.categories=this.currentCats),(!this.coll_data.collection.tags||this.coll_data.collection.tags.length<this.currentTags.length-1)&&(this.coll_data.collection.tags=this.currentTags));var f,t,e,i,v,b,s,a,n,r,o,l,c,d,w,_,C,y,g,u,p,m,x,k,O,F=h.filterCachedOptions;if(h.getFilterAttrObj&&Y.Object.keys(h.getFilterAttrObj).length)for(var S in h.getFilterAttrObj){h.getFilterAttrObj.hasOwnProperty(S)&&h.getFilterAttrObj[S].container&&(t=(f=h.getFilterAttrObj[S]).container,e=f.currentOptions,i=f.type,v=f.visibleOptions,b=f.notVisibleOptions,"dropdown"==i?(F&&F[S]&&-1==F[S].indexOf("li class=")&&!h.requestComplete&&(e=F[S]),e&&("desc"===f.sort?e.sort(A)&&e.reverse():"asAllowed"===f.sort&&f.allowedHash?e.sort(function(t,e){return f.allowedHash[t]-f.allowedHash[e]}):f.sort&&"string"==typeof f.sort&&-1<f.sort.indexOf("asDate")?(s=f.sort.split("|")[1]||"asc",e.sort(function(t,e){try{return new Date(t).getTime()-new Date(e).getTime()}catch(t){console.log(t)}}),"desc"==s&&(e=e.reverse())):"asOptions"===f.sort||"no-sort"===f.sort||(f.sort&&"function"==typeof f.sort?e.sort(f.sort):e.sort(A))),f.firstOption&&(a=f.firstOption,0<(n=e.indexOf(a))?(e.splice(n,1),e.unshift(a)):-1===n&&e.unshift(a)),f.showAll&&(r=f.allOption,o=e.indexOf(r),l=f.allOptionLast,0<o?(e.splice(o,1),l?e.push(r):e.unshift(r)):-1===o&&(l?e.push(r):e.unshift(r))),d=(c=t.one("ul:not(.nested-options)")).all(".archive-group-name-link.active"),w=[],d&&d.size()&&d.each(function(t){w.push(t.getAttribute("data-filter-val"))}),_=f.optionsDelimiter||"string"==typeof f.optionsDelimiter&&f.optionsDelimiter.length?' data-delimiter="'+f.optionsDelimiter+'" ':"",h.filterSelectors||(h.filterSelectors={}),e&&0<e.length?(!F||F&&F[S],f.quickSearch?c.all(".archive-group").remove():c.empty(),C=new Y.NodeList,y={},e.forEach(function(s,t){var e=s.trim()||"",i=encodeURIComponent(e),a=Tt(e),n="";e===f.allOption&&(n=' data-all-filter-attr=""');var r=-1<w.indexOf(a)?" active":"",o="",l="";(f.optionsStructure&&f.optionsStructure[e]||!f.optionsStructure)&&(o='data-root-option="'+("."+S+"-"+a)+'"'),b&&b.length&&-1<b.indexOf(e)&&(l=" n-visible-option"),v&&v.length&&(l=-1<v.indexOf(e)?" visible-option":" n-visible-option");var c,d,g,u,p=(c=f.optionsStructure,d=e,g=[],(u=function(t){for(var i in t)t.hasOwnProperty(i)&&t[i]&&("object"!=typeof t[i]||t[i].length?"object"==typeof t[i]&&t[i].forEach&&t[i].forEach(function(t){var e;"object"!=typeof t||t.length?t.trim()==d&&(e=i.trim(),-1==g.indexOf(e)&&g.push(e)):u(t)}):u(t[i]))})(c),g),m=o?'<ul class="nested-options"></ul>':"",s=Y.Node.create("<li "+o+' class="archive-group'+l+'"'+_+'  data-ind="'+t+'"><a href="?'+S+"="+i+'" data-filter-val="'+a+'" data-filter="'+S+'"'+n+' class="archive-group-name-link'+r+'">'+e+"</a>"+m+"</li>");o&&(y[e]={el:s,slug:a,nested:s.one(".nested-options"),children:[]}),p.length&&p.forEach(function(t){var e,i;y[t]&&(y[t].nested.one('[data-filter-val="'+a+'"]')||(i=(i=(e=s.cloneNode(!0)).one("a").getAttribute("href").split("="))[0]+"="+encodeURIComponent(t)+","+i[1],y[t].nested.append(e.one("a").setAttribute("data-parent-cat",t).setAttribute("href",i)),y[t].children.push(s)))}),o&&C.push(s),h.filterSelectors.hasOwnProperty(S+"-"+a)||(h.filterSelectors[S+"-"+a]=[])}),c&&C.size()&&c.append(C),t.show(),t.removeClass("first")):(null!==h.requestComplete&&void 0!==h.requestComplete&&!0!==h.requestComplete||c.one("li")||t.hide(),h.customFiltersWrapper.one(".sqs-block:not([hidden]):not(.items-count-wrapper)")&&h.customFiltersWrapper.one(".sqs-block:not([hidden]):not(.items-count-wrapper)").addClass("first")),c.setAttribute("data-items-count",c.all(".archive-group").size()),t.setAttribute("data-options-count",c.all(".archive-group").size())):"range-slider"!=i||(x=t.one(".range-slider"))&&(x=x._node).noUiSlider&&("price"==f.attr&&h.items_prices&&h.items_prices.length?(u=h.items_prices.length-1,p=h.items_prices[u],m=h.items_prices[0],g=parseFloat(x.dataset.step||10),m==p&&(p=m+g),x.noUiSlider.updateOptions({range:{min:m,max:p}}),x.noUiSlider.set([m,p])):f.ranges&&f.ranges.length&&(u=f.ranges.length-1,p=f.ranges[u],m=f.ranges[0],p&&m==p&&(m=0),p&&(x.noUiSlider.updateOptions({range:{min:m,max:p}}),x.noUiSlider.set([m,p])))))}this.target.settings.updateFilterOptions&&this._updateFilterOptions(),this.container.fire&&this.container.fire("custom-filter:cats-tags-filters-built",{customFilter:h}),Y.fire("custom-filter:cats-tags-filters-built",{customFilter:h}),h.target.settings.hooks&&h.target.settings.hooks.onDropdownsBuilt&&"function"==typeof h.target.settings.hooks.onDropdownsBuilt&&h.target.settings.hooks.onDropdownsBuilt(h),h.target.settings&&h.target.settings.filter&&h.target.settings.filter.cacheOptions&&h.requestComplete&&h.filtersDropdowns&&h.filtersDropdowns.size()&&!h.filtersOptionsCached&&(k=h.u_id+"_"+Tt(h.customIndexUrl||h.collectionUrl)+"_filter_options_"+location.pathname,O={},h.filtersDropdowns.each(function(t){var e,i=t.getAttribute("data-filter"),s=t.one("ul.archive-group-list");try{i&&s&&(e=[],s.all("a").each(function(t){e.push(t.get("textContent"))}),O[i]=e)}catch(t){console.log(t)}}),parseFloat(h.target.settings.filter.cacheOptions),P(O,k,!0),h.filtersOptionsCached=!0)},_destroy:function(){this.items&&this.items.each&&this.items.each(function(t){t.attrsAdded=!1}),this.isotope&&this.isotope.destroy(),this.container.removeClass("custom-filter-container").removeClass("isotope-filter-used").removeClass(this.all_filter_classes),this.customFiltersWrapper&&this.customFiltersWrapper.remove(),this.container.one(".custom-filter-grid")&&this.container.one(".custom-filter-grid").removeClass("custom-filter-grid"),this.container.one(".mobile-filter-trigger")&&this.container.one(".mobile-filter-trigger").remove(),this.container.one(".item-filter-loaded")&&this.container.all(".item-filter-loaded").remove(),this.externalClicksListener&&(this.externalClicksListener.detach(),this.externalClicksListener=null),window.removeEventListener("popstate",this.popstateListener)}},window.CustomSQSFilter?console.log("Seems Universal Filter was already started."):(window.CustomSQSFilter=f,window.Y?w():document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t,!1),setTimeout(function(){w()},16)},!1)),window.Squarespace&&(!window.Squarespace.initializeSummaryV2Block||document.querySelector('script[src*="lazy-summaries"]')||window.lazy_summaries_script_loaded||(window.Squarespace.initializeSummaryV2Block=function(e){e.all(".sqs-block-summary-v2").each(function(t){(t.getAttribute("data-block-json")?JSON.parse(t.getAttribute("data-block-json")):{ignoreInit:!1}).ignoreInit||e.Squarespace.GalleryManager.initializeBlock(t)})}))}();
